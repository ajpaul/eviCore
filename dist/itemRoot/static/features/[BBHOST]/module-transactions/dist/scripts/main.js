/* module-transactions@v3.1.0 build with â™¥ by bb-lp-cli@v1.9.12 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("base"),require("core"),require("module-tags"),require("module-charts"),require("hammerjs"),require("ui"),require("moment"),require("module-contacts"),require("d3")):"function"==typeof define&&define.amd?define(["base","core","module-tags","module-charts","hammerjs","ui","moment","module-contacts","d3"],e):"object"==typeof exports?exports["module-transactions"]=e(require("base"),require("core"),require("module-tags"),require("module-charts"),require("hammerjs"),require("ui"),require("moment"),require("module-contacts"),require("d3")):t["module-transactions"]=e(t.base,t.core,t["module-tags"],t["module-charts"],t.hammerjs,t.ui,t.moment,t["module-contacts"],t.d3)}(this,function(t,e,n,a,i,o,r,s,c){return function(t){function e(a){if(n[a])return n[a].exports;var i=n[a]={exports:{},id:a,loaded:!1};return t[a].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="/_karma_webpack_//",e(0)}([function(t,exports,e){e(1),t.exports=e(5)},function(t,exports,e){var n=e(2);"string"==typeof n&&(n=[[t.id,n,""]]);e(4)(n,{});n.locals&&(t.exports=n.locals)},function(t,exports,e){exports=t.exports=e(3)(),exports.push([t.id,'.lp-transactions-list-authorizations .lp-auth-header{padding-left:15px;cursor:pointer;font-size:1.3em}.lp-transactions-list-authorizations .centered div{line-height:1.5}.lp-chart-balances,.lp-chart-turnovers{height:260px}.chart-progress-indicator .panel{border:0}.chart-empty-data{text-align:center;padding:80px 0}.lp-search-right .input-group-btn{width:170px}.lp-search-right .input-group-btn>button>span{font-size:.857em;width:100%;min-width:25px;display:inline-block;overflow:hidden;text-overflow:ellipsis;line-height:1em}.lp-search-right .input-group-btn>button>span:before{font-family:Backbase-Neue;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;content:"\\E603";position:absolute;right:5px;top:50%;margin-top:-.5em}.lp-search-right .input-group-btn.open>button>span:before{content:"\\E604"}.lp-search-right .input-group-btn .dropdown-toggle i{display:none}.lp-search-right .input-group-btn .dropdown-toggle .option-icon{display:inline-block}.lp-search-right .dropdown .dropdown-menu{margin-top:4px;right:0;border:1px solid #ddd}.lp-search-right .dropdown .dropdown-menu>li:first-child{border-top:none}.lp-search-right .dropdown .dropdown-menu>li>a{padding:20px}.lp-search-right .dropdown .dropdown-menu>li>a i{font-size:1.2em}.lp-search-right .dropdown .dropdown-menu>li>a .option-label{font-size:1em;padding:0 36px 0 18px}.lp-search-right .dropdown .dropdown-menu>li>a>span>i.lp-icon-checkmark_fat{visibility:hidden;position:absolute;top:22px;right:20px}.lp-search-right .dropdown .dropdown-menu>li.active>a>span>i.lp-icon-checkmark_fat{visibility:visible}.lp-search-right .dropdown .dropdown-menu>li.active>a>span>i.option-icon{color:currentColor}.lp-medium-size .lp-search-tags>input,.lp-small-size .lp-search-tags>input{height:47px}.lp-medium-size .lp-search-right .input-group-btn,.lp-small-size .lp-search-right .input-group-btn{width:60px}.lp-medium-size .lp-search-right .input-group-btn button .option-label,.lp-small-size .lp-search-right .input-group-btn button .option-label{display:none}.lp-medium-size .lp-search-right .input-group-btn button .option-icon,.lp-small-size .lp-search-right .input-group-btn button .option-icon{font-size:1.8em}.lp-transactions-export-btn{text-align:center}.lp-transactions-export-btn button>span{padding-left:5px}.lp-medium-size .lp-transactions-export-btn button>span,.lp-small-size .lp-transactions-export-btn button>span{display:none}.export-transactions-modal p{margin:0;padding:0}.export-transactions-modal .panel-body{padding:0}.export-transactions-modal .modal-header{color:#fff;background-color:#d67500;margin:0;padding:15px 20px;text-transform:uppercase}.export-transactions-modal .modal-body{padding:0 20px;margin:20px 0;text-align:center}.export-transactions-modal .modal-body ul{list-style-type:none;text-align:left;margin:40px 15%;padding:0}.export-transactions-modal .modal-footer{margin:40px 0 20px;padding:0 20px;text-align:center}.export-transactions-modal .modal-footer button.btn-primary{border:0 none;color:#fff;background-color:#d67500;padding-left:30px;padding-right:30px}.export-transactions-modal .modal-footer button.btn-primary[disabled]{background-color:#878787}.export-transactions-modal .modal-footer i{color:#d67500}.export-transactions-modal .modal-footer p{margin-top:20px}.lp-transactions-list{min-height:248px}.transaction-details .transaction-details-navbar .tab-content{background-color:transparent;padding:0 19px 14px}.transaction-details .transaction-details-navbar .tab-content .lp-category-select{margin-top:14px}.transaction-details .transaction-details-navbar .tab-content .lp-transaction-details .progress-indicator{border:0 none}.transaction-details .transaction-details-navbar .tab-content .lp-transaction-details .row>div{margin-top:14px;text-align:left;padding-right:10px}.transaction-details .transaction-details-navbar .tab-content .lp-transaction-details .row>div .transaction-detail-label{line-height:1em;margin-bottom:10px;font-weight:700}.transaction-details .transaction-details-navbar .tab-content .lp-transaction-details .row>div .transaction-detail-map{width:100%;height:90px;max-width:160px}.transaction-details .transaction-details-navbar .tab-content .lp-transaction-details .row.transaction-detail-reference{margin-top:23px}.transaction-details .transaction-details-navbar .tab-content .lp-transaction-details .row.transaction-detail-reference .transaction-detail-value{white-space:nowrap}.lp-transactions-list-category{max-width:150px}.lp-transactions-list-category.lp-transactions-list-category-noanim{transition:none}.lp-transactions-list-item .lp-transactions-list-item-head{display:block;padding-left:9px;white-space:nowrap;transition:padding-left .4s ease}.lp-transactions-list-item-head-noanim{transition:none}.preview-all .lp-transactions-list-item-head,.preview.lp-transactions-list-item-head{padding-left:160px}.lp-transactions-list .column{display:inline-block;vertical-align:top;transition:padding .4s ease,width .4s ease}.lp-transactions-list-large .column{padding-left:15px;padding-right:15px}.lp-transactions-list .lp-transactions-list-item-head .lp-transactions-list-item-category{display:block}.lp-transactions-list-item-content{height:55px;position:relative;width:100%}.lp-transactions-list-item-date{width:16.66666667%}.lp-transactions-list-large .lp-transactions-list-item-date{width:8.33333333%}.lp-transactions-list-no-icons .lp-transactions-list-item-date{width:16.66666667%}.lp-transactions-list-item-date-value{font-size:16px;font-weight:500;line-height:1.1;text-align:center}.lp-transactions-list-item-icon{width:8.33333333%}.lp-transactions-list-medium .lp-transactions-list-item-icon,.lp-transactions-list-no-icons .lp-transactions-list-item-icon,.lp-transactions-list-small .lp-transactions-list-item-icon{display:none}.lp-transactions-list-item-summary{text-align:left;width:58.33333333%}.lp-transactions-list-item-name{font-size:16px;font-weight:500;line-height:1.1;margin-bottom:3px}.lp-transactions-list-item-info,.lp-transactions-list-item-type{font-size:12px;font-weight:500;line-height:1.1;margin-top:0;margin-bottom:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.lp-transactions-list-large .lp-transactions-list-item-info,.lp-transactions-list-medium .lp-transactions-list-item-type,.lp-transactions-list-small .lp-transactions-list-item-type{display:none}.lp-transactions-list-item-amount{font-weight:500;line-height:1.1;text-align:right;white-space:nowrap;width:24.99999999%}.lp-transactions-list-item-amount-value{float:right;font-size:16px}.lp-transactions-list-item-details{height:0;overflow:hidden}.lp-transactions-list-item.open .lp-transactions-list-item-details{height:auto}.preview-all .lp-transactions-list-category{width:160px}.lp-transactions-list-item-head-noanim .lp-transaction-category{transition:none}.lp-search-wrapper{margin-left:0}.lp-search-wrapper .sort-select button.dropdown-toggle .caret{display:none}',""])},function(t,exports){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},t.i=function(e,n){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(a[o]=!0)}for(i=0;i<e.length;i++){var r=e[i];"number"==typeof r[0]&&a[r[0]]||(n&&!r[2]?r[2]=n:n&&(r[2]="("+r[2]+") and ("+n+")"),t.push(r))}},t}},function(t,exports,e){function n(t,e){for(var n=0;n<t.length;n++){var a=t[n],i=d[a.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](a.parts[o]);for(;o<a.parts.length;o++)i.parts.push(r(a.parts[o],e))}else{for(var s=[],o=0;o<a.parts.length;o++)s.push(r(a.parts[o],e));d[a.id]={id:a.id,refs:1,parts:s}}}}function a(t){for(var e=[],n={},a=0;a<t.length;a++){var i=t[a],o=i[0],r=i[1],s=i[2],c=i[3],l={css:r,media:s,sourceMap:c};n[o]?n[o].parts.push(l):e.push(n[o]={id:o,parts:[l]})}return e}function i(){var t=document.createElement("style"),e=g();return t.type="text/css",e.appendChild(t),t}function o(){var t=document.createElement("link"),e=g();return t.rel="stylesheet",e.appendChild(t),t}function r(t,e){var n,a,r;if(e.singleton){var d=h++;n=f||(f=i()),a=s.bind(null,n,d,!1),r=s.bind(null,n,d,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=o(),a=l.bind(null,n),r=function(){n.parentNode.removeChild(n),n.href&&URL.revokeObjectURL(n.href)}):(n=i(),a=c.bind(null,n),r=function(){n.parentNode.removeChild(n)});return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else r()}}function s(t,e,n,a){var i=n?"":a.css;if(t.styleSheet)t.styleSheet.cssText=m(e,i);else{var o=document.createTextNode(i),r=t.childNodes;r[e]&&t.removeChild(r[e]),r.length?t.insertBefore(o,r[e]):t.appendChild(o)}}function c(t,e){var n=e.css,a=e.media;e.sourceMap;if(a&&t.setAttribute("media",a),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function l(t,e){var n=e.css,a=(e.media,e.sourceMap);a&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var i=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(i),o&&URL.revokeObjectURL(o)}var d={},p=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},u=p(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),g=p(function(){return document.head||document.getElementsByTagName("head")[0]}),f=null,h=0;t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=u());var i=a(t);return n(i,e),function(t){for(var o=[],r=0;r<i.length;r++){var s=i[r],c=d[s.id];c.refs--,o.push(c)}if(t){var l=a(t);n(l,e)}for(var r=0;r<o.length;r++){var c=o[r];if(0===c.refs){for(var p=0;p<c.parts.length;p++)c.parts[p]();delete d[c.id]}}}};var m=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,exports,e){var n;(function(t){"use strict";n=function(require,exports,t){t.name="module-transactions-3";var n=e(7),a=e(8),i=e(9),o=e(10),r=e(11),s=e(16),c=e(18),l=e(20),d=e(28),p=e(32),u=e(40),g=e(44),f=e(18),h=[a.name,i.name,o.name,r.name,s.name,c.name,l.name,d.name,p.name,u.name,g.name,f.name];t.exports=n.createModule(t.name,h).provider(e(49)).directive(e(50))}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))}).call(exports,e(6)(t))},function(t,exports){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(e,exports){e.exports=t},function(t,exports){t.exports=e},function(t,exports){t.exports=n},function(t,exports){t.exports=a},function(t,exports,e){var n;(function(t){"use strict";n=function(require,exports,t){t.name="component.transactions-categories";var n=e(7),a=e(8),i=[a.name];t.exports=n.createModule(t.name,i).provider(e(12)).directive(e(13)).filter(e(15))}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))}).call(exports,e(6)(t))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";exports.lpTransactionsCategory=function(t){var e={generic:"Generic error",badId:"The id must be a string"};this.$get=function(n,a,i){function o(){function o(){this.categories=[]}return o.prototype.getAll=function(){return n.get(r.endpoint).then(function(e){return this.categories=t.isArray(e.data)?e.data:[],this.categories}.bind(this),function(t,n,a,o){i.throwException(new Error(e.generic))})},o.prototype.getById=function(e){var n=t(this.categories).find({id:e});return a.when(n)},o.prototype.create=function(a){return t.isObject(a)&&a.name&&a.color||i.throwException(new Error("Bad category data: "+a)),n.post(r.endpoint,a).then(function(t){var e=t.data;return this.categories.push(e),e}.bind(this),function(t){i.throwException(new Error(e.generic))})},o.prototype.removeById=function(a){return t.isString(a)||i.throwException(new TypeError(e.badId)),n["delete"](r.endpoint+"/"+a).then(function(e){var n=t(this.categories).find({id:a});return this.categories.splice(t(this.categories).indexOf(n),1),n}.bind(this),function(t){i.throwException(new Error(e.generic))})},new o}var r={endpoint:""};return{setConfig:function(e){return r=t(e).chain().mapValues(t.resolvePortalPlaceholders).defaults(r).value(),this},api:o}},this.$get.$inject=["$http","$q","lpCoreError"]},exports.lpTransactionsCategory.$inject=["lpCoreUtils"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";function n(){var t,e,n=arguments[0]/255,a=arguments[1]/255,i=arguments[2]/255,o=Math.max(n,a,i),r=Math.min(n,a,i),s=(o+r)/2;if(o===r)t=e=0;else{var c=o-r;switch(e=s>.5?c/(2-o-r):c/(o+r),o){case n:t=(a-i)/c+(i>a?6:0);break;case a:t=(i-n)/c+2;break;case i:t=(n-a)/c+4}t/=6}return{h:Math.round(360*t),s:Math.round(100*e),l:Math.round(100*s)}}var a=e(14),i=window.jQuery;exports.lpCategoryDisplay=function(t,e){return t.put("$categoryDisplay.html",'<div class="lp-transaction-category" ng-click="onClick($event, transaction)"><span class="category-marker" ng-style="markerStyle"></span><div class="category-name"><span class="h4">{{category.name}}</span></div></div>'),{restrict:"A",replace:!0,require:"ngModel",scope:{isCategoryView:"=lpCategoryView",categoryList:"=lpCategoryList",transaction:"=ngModel",categoryClick:"&",categorySwipe:"&",categoryStartSwipe:"&",categoryEndSwipe:"&"},template:t.get("$categoryDisplay.html"),link:function(t,n,i){var o=n.parent().parent(),r=0;t.markerStyle={},t.category=null,t.onClick=function(e,n){t.categoryClick({$event:e,transaction:t.transaction})};var s={},c=o.data("touch"),l=function(e){e.srcEvent.stopPropagation(),e.preventDefault(),n.parent().addClass("no-animation");var a=r+Math.floor(e.deltaX);a>160&&(a=160),a>r&&n.parent().css("width",a+"px"),t.categorySwipe({$event:e,transaction:t.transaction})},d=function(e){e.srcEvent.stopPropagation(),e.preventDefault(),r=parseInt(n.css("width"),10),t.categoryStartSwipe({$event:e,transaction:t.transaction})},p=function(e){e.srcEvent.stopPropagation(),e.preventDefault(),n.parent().removeClass("no-animation");var a=r+Math.floor(e.deltaX);a>160&&(a=160),a>150&&t.categoryClick({$event:null,transaction:t.transaction}),n.parent().css("width",""),t.categoryEndSwipe({event:e,transaction:t.transaction})};t.isCategoryView||"undefined"==typeof a||(c||(c=new a(o[0]),o.data("touch",c)),s.panright=c.on("panright",l),s.panstart=c.on("panstart",d),s.panend=c.on("panend",p)),t.$on("$destroy",function(){Object.keys(s).forEach(function(t){var e=s[t];e.off(t,e.handlers[t][0])})}),t.$watch("transaction.categoryId",function(e){t.setCategory(e)}),t.setCategory=function(e){if(t.categoryList)for(var n=0;n<t.categoryList.length;n++)t.categoryList[n].id===e&&(t.category=t.categoryList[n]);t.category&&e?t.markerStyle.backgroundColor=t.category.color:t.transaction.categoryId="00cc9919-ba0c-4702-917b-1fba4c256b4d"},e.subscribe("launchpad-retail.categoryDelete",function(e){e.id===t.transaction.categoryId&&t.setCategory()})}}},exports.lpCategoryDisplay.$inject=["$templateCache","lpCoreBus"],exports.lpCategoryItem=function(){return{restrict:"A",replace:!0,template:'<div class="category-item btn btn-block btn-default" tabIndex="{{category.id !== transaction.categoryId ? 0 : -1}}" ng-style="{\'background-color\': category.id === newCategoryId ? category.color : \'#ffffff\'}" ng-click="markNewCategory(category.id)" ng-keydown="categoryKeyDown($event, category)"><div class="marker" ng-style="{\'background-color\':category.color}"></div><span class="name" ng-class="{ light: (category.id === newCategoryId && getTextColor(category.color)) }">{{category.name}}</span><button type="button" class="close" aria-hidden="true" ng-click="deleteCategory($event, category)" ng-if="category.type ===\'NORMAL\'">&times;</button></div>'}},exports.lpCategorySelect=function(t,e,a,o){return t.put("$categorySelect.html",'<div class="lp-category-select clearfix"><div class="clearfix"><label class="control-label pull-left" lp-i18n="Current Category:"></label><div ng-repeat="category in transactionCategories | orderBy:\'-priority\' | selectedCategory:this" class="col-xs-6 col-sm-4 col-md-4"><div lp-category-item="lp-category-item"></div></div></div><label class="control-label pull-left" lp-i18n="Change category to:"></label><form class="form category-search clearfix" role="form" ng-submit="createCategory()"><input type="text" ng-model="categoryFilter" class="form-control" placeholder="{{\'Search categories / Create category\'|translate}}" maxlength="40" ng-disabled="showColorPicker" /></form><div class="category-list col-xs-12 col-sm-12 col-md-9"><div class="new-category col-xs-12 col-sm-12 col-md-12" ng-if="!categoryExists() && !showColorPicker && categoryFilter.length > 0"><label class="control-label pull-left" lp-i18n="Create new category:"></label><div ng-repeat="category in newCategory" class="col-xs-6 col-sm-6 col-md-6"><div lp-category-item="lp-category-item"></div></div></div><ul class="category-list col-xs-12 col-sm-12 col-md-12"><li ng-repeat="category in transactionCategories | orderBy:\'-priority\' | categoryList:this" class="col-xs-6 col-sm-4 col-md-4" ng-show="!showColorPicker"><div lp-category-item="lp-category-item"></div></li><div id="{{\'transaction-\' + transaction.id + \'-category-step-2\'}}" class="clearfix" ng-if="showColorPicker"><label class="clearfix" lp-i18n="Choose a color for the new category:"></label><div lp-color-picker="lp-color-picker" select-color="selectColor"></div></div></ul></div><div id="{{\'transaction-\' + transaction.id + \'-category-step-3\'}}" class="col-xs-12 col-sm-12 col-md-3 category-apply" ng-if="(smallLayout && newCategoryId.length) || !smallLayout"><div class="row" ng-if="smallLayout"><div class="col-xs-12 col-sm-12 clearfix"><label class="control-label pull-left" lp-i18n="You\'ve selected:"></label><div ng-repeat="category in transactionCategories | orderBy:\'-priority\' | markedCategory:this" class="col-xs-7 col-sm-6 col-md-4"><div lp-category-item="lp-category-item"></div></div></div><div class="col-xs-12 col-sm-12 clearfix"><p lp-i18n="Would you like to change the category for only this transaction or all similar transactions?"></p></div></div><div class="row"><div class="col-sm-12 col-md-12" ng-if="!smallLayout"><p lp-i18n="Apply category change to?"></p></div><div class="col-xs-6 col-sm-6 col-md-12"><button type="button" class="btn btn-default btn-block" ng-click="changeCategory(newCategoryId)" ng-disabled="!newCategoryId.length" lp-i18n="Only This"></button></div><div class="col-xs-6 col-sm-6 col-md-12"><button type="button" class="btn btn-default btn-block" ng-click="changeCategory(newCategoryId, true)" ng-disabled="!newCategoryId.length" lp-i18n="All Similar"></button></div></div></div></div>'),{restrict:"A",replace:!1,require:"ngModel",scope:{model:"=ngModel",transaction:"=",update:"=",smallLayout:"=",offsetTopCorrection:"="},template:t.get("$categorySelect.html"),link:function(t,r,s){t.showColorPicker=!1,t.searchResultNumber=t.model.categories.length;var c=function(){t.transactionCategories=[];for(var e=0;e<t.model.categories.length;e++)t.transactionCategories.push(o.cloneDeep(t.model.categories[e]))};c();var l=function(n){t.smallLayout&&e(function(){i("body").animate({scrollTop:i("#transaction-"+t.transaction.id+(n>1?"-category-step-"+n:"")).offset().top-5-(t.offsetTopCorrection||0)},500)},0)},d=function(){e(function(){i(r).find('button[ng-click^="changeCategory"]')[0].focus()},0)};t.$watch("categoryFilter",function(e){t.newCategory=[{id:null,name:e,color:"#cccccc"}]}),t.categoryExists=function(){var e=!1;if(t.categoryFilter&&t.categoryFilter.length>0)for(var n=0;n<t.model.categories.length;n++)t.categoryFilter.toLowerCase()===t.model.categories[n].name.toLowerCase()&&(e=!0);return e},t.getTextColor=function(t){var e=!0,a=t.substr(1,2),i=t.substr(3,2),o=t.substr(5,2);return 4===t.length&&(a=t.substr(1,1)+t.substr(1,1),i=t.substr(2,1)+t.substr(2,1),o=t.substr(3,1)+t.substr(3,1)),a=parseInt(a,16),i=parseInt(i,16),o=parseInt(o,16),n(a,i,o).l>45&&(e=!1),e},t.newCategoryId="",t.markNewCategory=function(e){if(null===e)return void t.createCategory();if(t.transaction.categoryId!==e){if(t.newCategoryId===e)return void(t.newCategoryId="");t.newCategoryId=e,l(3),d()}},t.categoryKeyDown=function(e,n){if(13===e.which||32===e.which){if(e.preventDefault(),e.stopPropagation(),"button"===e.target.tagName.toLowerCase())return void t.deleteCategory(e,n);t.markNewCategory(n.id)}},t.createCategory=function(){var n=!t.categoryExists()&&t.categoryFilter.length>0;n?(t.showColorPicker=!0,l(2)):t.searchResultNumber&&e(function(){i(".category-list .category-item")[0].focus()},0)},t.selectColor=function(e){t.model.create({name:t.categoryFilter,color:e}).then(function(e){t.categoryFilter="",t.showColorPicker=!1,c(),t.markNewCategory(e.id),a.publish("launchpad-retail.categoryListUpdate",null,!0),l(3),d()},function(e){a.publish("launchpad.add-notification",{notification:{id:"category-create-duplicate",level:"SEVERE",message:e.data.error,closable:!0}},!0),t.categoryFilter="",t.showColorPicker=!1})},t.deleteCategory=function(e,n){e.stopPropagation(),"NORMAL"===n.type&&t.model.removeById(n.id).then(function(){t.newCategoryId===n.id&&(t.newCategoryId=""),c(),a.publish("launchpad-retail.categoryDelete",{id:n.id},!0),a.publish("launchpad-retail.categoryListUpdate",null,!0)})},t.changeCategory=function(n,a){t.newCategoryId="",t.categoryFilter="",t.update(t.transaction,n,a),e(function(){t.transaction.showDetails=!1},100),l(1),i("#transaction-"+t.transaction.id)[0].focus()},a.subscribe("launchpad-retail.categoryListUpdate",function(){c()})}}},exports.lpCategorySelect.$inject=["$templateCache","$timeout","lpCoreBus","lpCoreUtils"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports){t.exports=i},function(t,exports,e){var n;n=function(require,exports,t){"use strict";exports.categoryList=function(){return function(t,e){var n=t;e.initialSelected||(e.initialSelected=e.transaction.categoryId);for(var a=0;a<n.length;a++)"TEMPORARY"!==n[a].type?(n[a].priority=1,"CONTROL"===n[a].type&&(n[a].priority=0),n[a].id===e.initialSelected&&(n[a].priority=2)):(n.splice(a,1),a--);for(a=0;a<n.length;a++)e.categoryFilter&&e.categoryFilter.length&&-1===n[a].name.toLowerCase().indexOf(e.categoryFilter.toLowerCase())?(n.splice(a,1),a--):n[a].id===e.transaction.categoryId&&(n.splice(a,1),a--);return e.searchResultNumber=n.length,n}},exports.selectedCategory=function(){return function(t,e){for(var n=t,a=0;a<n.length;a++)n[a].id!==e.transaction.categoryId&&(n.splice(a,1),a--);return n}},exports.markedCategory=function(){return function(t,e){for(var n=t,a=0;a<n.length;a++)n[a].id!==e.newCategoryId&&(n.splice(a,1),a--);return n}}}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;(function(t){"use strict";n=function(require,exports,t){t.name="component.transactions-p2p";var n=e(7),a=e(8),i=[a.name];t.exports=n.createModule(t.name,i).provider(e(17))}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))}).call(exports,e(6)(t))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";exports.lpP2PTransactions=function(t){this.$get=function(e,n){function a(){var a=function(){this.transactions=[],this.from=i.from,this.moreAvailable=!0,this.accountsArray=[],this.errorCode=null};return a.prototype.clearTransactionsList=function(){this.transactions=[],this.moreAvailable=!0,this.from=i.from},a.prototype.loadTransactions=function(t){return this.clearTransactionsList(),this.accountsArray=t,this.loadMoreTransactions()},a.prototype.loadTransactions=function(t){return this.clearTransactionsList(),this.accountsArray=t,this.loadMoreTransactions()},a.prototype.loadMoreTransactions=function(){var t=this,a=n.defer();this.loading=!0;var o={accountIds:this.accountsArray.join(","),offset:this.from,limit:i.pageSize};return e.get(i.transactionsEndpoint,{params:o}).success(function(e){t.from+=i.pageSize;var n=t.preprocessTransactions(e);n&&n.length<i.pageSize&&(t.moreAvailable=!1),t.transactions=t.transactions.concat(n),a.resolve(t.transactions)}).error(function(e){t.errorCode=e.errorCode||500})["finally"](function(){t.loading=!1}),a.promise},a.prototype.preprocessTransactions=function(e){var n=[];return e&&e.length>0&&(n=t.map(e,function(t,n){var a=new Date(t.initiationDateTime);if(t.showDate=!0,n>0){var i=new Date(e[n-1].initiationDateTime);t.showDate=i.getDate()!==a.getDate()||i.getMonth()!==a.getMonth()||i.getFullYear()!==a.getFullYear()}return t.requiresUserAction=!1,"CREDIT"===t.creditDebitIndicator&&"PENDING"===t.status&&(t.requiresUserAction=!0),t})),n},a.prototype.allowMoreResults=function(){return!this.loading&&this.moreAvailable&&!this.errorCode},a.prototype.noTransactionsFound=function(){return!this.loading&&0===this.transactions.length&&!this.errorCode},new a}var i={transactionsEndpoint:"/mock/v1/p2p-payments",pageSize:20,from:1};return{setConfig:function(e){return i=t(e).chain().mapValues(t.resolvePortalPlaceholders).defaults(i).value(),this},getConfig:function(e){return e&&t.isString(e)?i[e]:i},api:a}},this.$get.$inject=["$http","$q"]},exports.lpP2PTransactions.$inject=["lpCoreUtils"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;(function(t){"use strict";n=function(require,exports,t){t.name="component.transactions-currency";var n=e(7),a=e(8),i=[a.name];t.exports=n.createModule(t.name,i).provider(e(19))}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))}).call(exports,e(6)(t))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";exports.lpTransactionsCurrency=function(t){this.$get=function(e,n){function a(){var a=function(){this.groups={defaultCurrency:"aDefault",preferredCurrencies:"bPreferred",rest:"cOther"},this.orderedCurrencies=[]};return a.prototype.loadDefaultCurrency=function(){var t=this,a=n.defer();return e.get(i.defaultCurrencyEndpoint).success(function(t){a.resolve(t)}).error(function(){t.error="currencyServiceError"}),a.promise},a.prototype.configureDefaultCurrency=function(t){var e={currency_code:t.currency_code,exchange_rate:1,group:this.groups.defaultCurrency};this.defaultCurrency=e,this.selected=this.defaultCurrency,this.orderedCurrencies.push(this.defaultCurrency)},a.prototype.loadOtherCurrencies=function(){var t=this,a=n.defer();return e.get(i.currencyListEndpoint,{params:{currency:this.defaultCurrency.currency_code}}).success(function(e){e&&t.sortCurrencies(e),a.resolve(e)}).error(function(){t.error="currencyServiceError"}),a.promise},a.prototype.sortCurrencies=function(t){for(var e=0;e<t.preferred.length;e++)t.preferred[e].group=this.groups.preferredCurrencies;if(this.orderedCurrencies.push.apply(this.orderedCurrencies,t.preferred),!i.disableExtraCurrencies){for(var n=0;n<t.rest.length;n++)t.rest[n].group=this.groups.rest;t.rest.sort(function(t,e){var n=t.currency_code.toLowerCase(),a=e.currency_code.toLowerCase();return a>n?-1:n>a?1:0}),this.orderedCurrencies.push.apply(this.orderedCurrencies,t.rest)}},a.prototype.findCurrency=function(e){return t.find(this.orderedCurrencies,function(t){return t.currency_code===e})},a.prototype.selectCurrency=function(t){this.selected=this.findCurrency(t)},new a}var i={defaultCurrencyEndpoint:"/mock/v1/currency-rates/default",currencyListEndpoint:"/mock/v1/currency-rates",disableExtraCurrencies:!1};return{setConfig:function(e){return i=t(e).chain().mapValues(t.resolvePortalPlaceholders).defaults(i).value(),this},getConfig:function(e){return e&&t.isString(e)?i[e]:i},api:a}},this.$get.$inject=["$http","$q"]},exports.lpTransactionsCurrency.$inject=["lpCoreUtils"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;(function(t){"use strict";n=function(require,exports,t){t.name="component.transactions-list";var n=e(7),a=e(21),i=e(9),o=[a.name,i.name];t.exports=n.createModule(t.name,o).directive(e(22)).directive(e(23))}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))}).call(exports,e(6)(t))},function(t,exports){t.exports=o},function(t,exports,e){var n;n=function(require,exports){"use strict";exports.lpTransactionDetailsAddress=function(){var t=['<div class="transaction-detail-label" lp-i18n="Address:"></div>',"<div>",'<span ng-show="address.street">{{address.street}}</span><br/>','<span ng-show="address.city">{{address.city}}</span>','<span ng-show="address.state">, {{address.state}}</span><br/>','<span ng-show="address.country">{{address.country}}</span><br/>','<span ng-show="address.zip">{{address.zip}}</span>',"</div>"].join("");return{restrict:"AE",scope:{address:"=lpTransactionDetailsAddress"},template:t,link:function(t,e,n){}}},exports.lpTransactionDetailsDatetime=function(){var t=['<div class="transaction-detail-label" lp-i18n="{{detailLabel || \'Time\'}}:"></div>',"<div>{{datetime|date:'shortTime'}}<br/>{{datetime|date:'longDate'}}</div>"].join("");return{restrict:"AE",scope:{detailLabel:"=",datetime:"=lpTransactionDetailsDatetime"},template:t,link:function(t,e,n){}}},exports.lpTransactionDetailsMap=function(){var t=['<img ng-src="{{location.mapUrl}}" class="transaction-detail-map" alt="{{\'Location map\' | translate}}" />'].join("");return{restrict:"AE",scope:{location:"=lpTransactionDetailsMap"},template:t,link:function(t,e,n){}}},exports.lpTransactionDetailsVertical=function(){var t=['<div class="transaction-detail-vertical">','<div class="transaction-detail-label" lp-i18n="{{detailLabel}}:"></div>','<span class="transaction-detail-value">{{detailValue}}</span>',"</div>"].join("");return{restrict:"AE",scope:{detailLabel:"=",detailValue:"="},template:t,link:function(t,e,n){}}},exports.lpTransactionDetailsHorizontal=function(){var t=['<div class="transaction-detail-vertical">','<span class="transaction-detail-label" lp-i18n="{{detailLabel}}:"></span> ','<span class="transaction-detail-value">{{detailValue}}</span>',"</div>"].join("");return{restrict:"AE",scope:{detailLabel:"=",detailValue:"="},template:t,link:function(t,e,n){}}}}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports){"use strict";function t(){var t=!1;try{Object.defineProperty({},"x",{})}catch(e){t=!0}return t}var n=window.jQuery,a=e(7).ng,i=e(24);exports.lpTransactionsList=function(a,o,r,s,c,l,d){function p(t){return n("#transaction-"+t.id)}function u(t){return p(t).find('[data-role="transactions-list-item-category"]')}function g(r,l,d){var g=t(),f=160,h=9;r.groupTransactionsByDate=m,r.$watch("accounts.selected",function(t){t&&r.transactions.loadTransactions(t).then(function(){s.publish("widget-transactions:transactions:ready",r.transactions.transactions),
r.showScrollbar&&b(l.find(".transactions-list-wrapper"))})}),r.isTodayOrYesterday=function(t){var e=i((new Date).getTime()).startOf("day"),n=i(e).subtract(1,"days"),a=i(parseInt(t,10)).startOf("day"),o=!1;return e.isSame(a)?(r.todayOrYesterday="Today",o=!0):n.isSame(a)&&(r.todayOrYesterday="Yesterday",o=!0),o},r.$on("$destroy",function(){}),r.previewAll=!1,r.transactionKeydown=function(t,e){13!==t.which&&32!==t.which||(t.preventDefault(),t.stopPropagation(),r.loadTransactionDetails(e),r.openDetails(e))},r.loadTransactionDetails=function(t){t.isLoading=!0,r.transactions.loadTransactionDetails(t).then(function(e){t.categoryId&&r.transactionsCategories.getById(t.categoryId).then(function(t){e.category=t})})["finally"](function(){t.isLoading=!1})},r.loadMoreTransactions=function(){r.transactionsLoading=!0,r.transactions.loading||r.transactions.loadMoreTransactions().then(function(){r.transactionsLoading=!1})},r.updateTransactionCategory=function(t,e,n){var a;a=n?r.transactions.updateSimilarTransactionCategory(t,e):r.transactions.updateTransactionCategory(t,e),a.success(function(){})},r.openDetails=function(t,i){var s=l.find("#transaction-details-"+t.id);if(t.showDetails=!t.showDetails,!s.children().size()){var c=n(e(25));s.append(c),o(c)(s.scope())}var d=function(t,e){for(var n in t)t.hasOwnProperty(e)&&(t[n]=!1,n===e&&(t[n]=!0))};null!==i&&void 0!==i||(i="details"),t.showDetails&&a(function(){d(t.detailTabs,i)},0),"details"===i&&r.loadTransactionDetails(t),r.closePreview(t),r.categorySmallLayout&&t.showDetails&&n("body").animate({scrollTop:n("#transaction-"+t.id).offset().top-5-(r.offsetTopCorrection||0)},500);var p=document.getElementById("transactions-tabs");!r.showDetails&&p&&(p.style.display="none",p.style.display="block")},r.selectDetailsTab=function(t){r.loadTransactionDetails(t)},r.openPreview=function(t){t.preview=!0,t.showDetails||(g?n("#transaction-"+t.id+" .categories").width(f):n("#transaction-"+t.id).addClass("preview"))},r.closePreview=function(t){t.preview=!1,g?n("#transaction-"+t.id+" .categories").width(h):n("#transaction-"+t.id).removeClass("preview"),p(t).removeClass("lp-transactions-list-item-head-noanim").css("padding-left",""),u(t).css("width","")},r.categoryClick=function(t,e){null!==t&&void 0!==t&&(t.preventDefault(),t.stopPropagation()),r.openDetails(e,"categories")},r.categorySwipeStart=function(t,e){p(e).addClass("lp-transactions-list-item-head-noanim")},r.categorySwipe=function(t,e){var n,a=u(e),i=Math.max(t.deltaX,0);a.width(i),n=a.width(),p(e).css("padding-left",n)},r.categorySwipeEnd=function(t,e){r.closePreview(e)};var v=function(t){return c.isString(t)?c.trim(t):c.isArray(t)&&!t.length?"":t||""};r.getTransactionDescription=function(t){var e=v(t.counterpartyName),n=v(t.transactionDescription),a=v(t.transactionType);return e||n||a},r.getTransactionSubDescription=function(t){var e=v(t.accountName),n=v(t.counterpartyName),a=v(t.transactionDescription),i=v(t.transactionType);return e?e:n||a?i:""},r.toggleCategoryView=function(){c.safeApply(r,function(){r.previewAll=!r.previewAll})},s.subscribe("launchpad-retail.module-transactions.toggleCategoryView",r.toggleCategoryView)}function f(t,e){return g}var h=d.getConfig("customTemplateSrc"),m=d.getConfig("groupTransactionsByDate"),v=h&&r.get(h),y=h&&l.resolvePath(h),b=function(t){a(function(){var e=t.length?t[0]:t,n=e.offsetHeight;n&&(e.style.height=n+"px",e.style.overflowY="auto")})};return{scope:{accounts:"=lpAccounts",transactions:"=lpTransactions",transactionsCategories:"=lpTransactionsCategories",categoryLayout:"=",showCategories:"=",showTransactionIcons:"=",showDatesAllTransactions:"=",hideDetailsPreference:"=",offsetTopCorrection:"=?",showScrollbar:"="},restrict:"AE",compile:f,templateUrl:!v&&y,template:v||!h&&e(26)}},exports.lpTransactionsList.$inject=["$timeout","$compile","$templateCache","lpCoreBus","lpCoreUtils","lpCoreTemplate","lpTransactions"],exports.lpTransactionsListDetails=function(t,n,a){function i(t,e,n){}function o(t,e){return i}return{restrict:"AE",scope:{transaction:"=",categories:"=",isLoading:"="},compile:o,template:e(27)}},exports.lpTransactionsListDetails.$inject=["$templateCache","$timeout","lpCoreUtils"],exports.lpStickyTitle=function(t,e){function i(e,i,o){var r,s,c;e.isSpecialDate=function(){return e.isTodayOrYesterday({bookingDateTime:e.transaction.bookingDateTime})},s=function(){for(var t=document.querySelectorAll(".followMeBar"),e=0,i=t.length;i>e;e++){var o,r,s=t[e],c=e+1,l=e-1,d=a.element(s),p=window.scrollY,u=parseInt(s.getAttribute("data-original-position"),10),g=parseInt(s.getAttribute("data-original-height"),10);o=t[c];var f,h;f=t[l],h=a.element(f),isNaN(u)&&(u=n(s).offset().top),isNaN(g)&&(g=n(s).outerHeight()),p>=u?(d.addClass("fixed"),o&&(r=parseInt(o.getAttribute("data-original-position"),10)-g,u>=r&&d.addClass("absolute").css("top",r+"px"))):(d.removeClass("fixed"),f&&u-g>=p&&h.removeClass("absolute").css("top",parseInt(o.getAttribute("data-original-position"),10)+"px"))}},r=i.find(".followMeBar").wrap('<div class="followWrap"/>');var l=r[0];t(function(){c=n(l).outerHeight(),l.setAttribute("data-original-position",n(l).offset().top),l.setAttribute("data-original-height",c),l.parentNode.style.height=c+"px"},100),a.element(window).off("touchmove.stickies, touchend.stickies, scroll.stickies").on("touchmove.stickies, touchend.stickies, scroll.stickies",function(){s()})}function o(t,e){return i}return{restrict:"AE",priority:400,scope:{transaction:"=",todayOrYesterday:"=",isTodayOrYesterday:"&"},compile:o,template:function(){return'<div class="header followMeBar"><span ng-if="isSpecialDate()">{{todayOrYesterday}}, </span><span itemprop="dateTimeMonth">{{transaction.bookingDateTime | date:\'MMM\'}}</span> <span itemprop="dateTimeDate">{{transaction.bookingDateTime | date:\'dd\'}}</span></div>'}}},exports.lpStickyTitle.$inject=["$timeout","lpCoreBus"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports){t.exports=r},function(t,exports,e){var n;n=function(){"use strict";var t='<div class="col-xs-12 col-sm-12"><div alert="alert" class="alert alert-info" ng-show="transaction.errorCode"><span lp-i18n="{{transaction.errorCode}}"></span></div><ul tabset="tabset" class="transaction-details-navbar" ng-if="showCategories && transaction.showDetails && !hideDetailsPreference"><li tab="tab" select="selectDetailsTab(transaction)" active="transaction.detailTabs.details"><span tab-heading="tab-heading" lp-i18n="Details"></span><div lp-transactions-list-details="lp-transactions-list-details" transaction="transaction" categories="transactionsCategories" is-loading="transaction.isLoading"></div></li><li tab="tab" active="transaction.detailTabs.categories">  <span tab-heading="tab-heading" lp-i18n="Categories"></span>  <div lp-category-select="lp-category-select" ng-model="transactionsCategories" transaction="transaction" update="updateTransactionCategory" small-layout="categoryLayout === \'small\'" offset-top-correction="offsetTopCorrection" class="panel-body no-padding"></div></li></ul><div class="panel-body no-padding" ng-if="showCategories && transaction.showDetails && hideDetailsPreference"><div lp-category-select="lp-category-select" ng-model="transactionsCategories" transaction="transaction" update="updateTransactionCategory" small-layout="categoryLayout === \'small\'" offset-top-correction="offsetTopCorrection" class="panel-body no-padding"></div></div><div lp-transactions-list-details="lp-transactions-list-details" transaction="transaction" categories="transactionsCategories" is-loading="transaction.isLoading" ng-if="!showCategories && transaction.showDetails && !hideDetailsPreference"></div></div>';return t}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(){"use strict";
//!!! showTransactionIcons
var t='<div class="lp-transactions-list lp-transactions-list-{{categoryLayout}} lp-widget-body" ng-class="{logohidden: hideLogo, \'preview-all\': previewAll, \'lp-transactions-list-no-icons\': !showTransactionIcons }" progress-indicator="transactions.loading"><div class="panel-message" ng-if="transactions.noTransactionsFound()" role="alert"><p>There are no transactions to display <span ng-show="!transactions.isSearching()">for this account</span><span ng-show="transactions.isSearching()">for this search</span>.</p></div><div lp-freshness-message="lp-freshness-message"></div><div class="transactions-list-wrapper" lp-infinite-scroll="loadMoreTransactions()" lp-infinite-scroll-disabled="!showScrollbar || transactions.loading || !accounts.selected" lp-infinite-scroll-end="!transactions.moreAvailable"><div id="transactions-list" role="presentation" class="list-group list-view transactions-list lp-transactions-list-items"><div class="lp-transactions-list-item list-group-item list-view-row expandable clearfix" ng-class="{ open: transaction.showDetails }" ng-repeat="transaction in transactions.transactions track by $index"><div lp-sticky-title="lp-sticky-title"     ng-if="transaction.newDate && groupTransactionsByDate"     transaction="transaction"     group-transactions-by-date="groupTransactionsByDate"     today-or-yesterday="todayOrYesterday"     is-today-or-yesterday="isTodayOrYesterday(bookingDateTime)"></div><div class="lp-transactions-list-item-head list-view-container cursor-pointer clearfix" ng-click="openDetails(transaction)" tabindex="0" ng-keydown="transactionKeydown($event, transaction)" ng-mouseleave="closePreview(transaction)" role="button" id="transaction-{{transaction.id}}" aria-expanded="{{ !!transaction.showDetails }}" aria-controls="transaction-details-{{transaction.id}}"><div class="lp-transactions-list-item-category categories" ng-mouseover="categoryLayout == \'small\' || openPreview(transaction)" ng-if="showCategories"><div class="lp-transactions-list-category" data-role="transactions-list-item-category" lp-category-display="lp-category-display" lp-category-view="previewAll" lp-category-list="transactionsCategories.categories" ng-model="transaction" category-click="categoryClick($event, transaction)" category-start-swipe="categorySwipeStart($event, transaction)" category-swipe="categorySwipe($event, transaction)" category-end-swipe="categorySwipeEnd($event, transaction)"></div></div><div class="lp-transactions-list-item-content" data-role="transactions-item-info"><div class="lp-transactions-list-item-date column" ng-mouseover="categoryLayout == \'small\' || openPreview(transaction)"><div class="centered"><div class="lp-transactions-list-item-date-value" aria-hidden="true" ng-if="!groupTransactionsByDate && (transaction.newDate || showDatesAllTransactions)"><span itemprop="dateTimeMonth">{{transaction.bookingDateTime | date:\'MMM\'}}</span><br /><span itemprop="dateTimeDate">{{transaction.bookingDateTime | date:\'dd\'}}</span></div></div></div><div class="lp-transactions-list-item-icon column" ng-if="showTransactionIcons"><div class="centered"><div class="lp-transaction-icon gray-image-hover"><img ng-if="transaction.counterPartyLogoPath" ng-src="{{transaction.counterPartyLogoPath}}" width="35" height="35" alt=""/></div></div></div><div class="lp-transactions-list-item-summary column"><div class="centered"><div class="lp-transactions-list-item-name counterparty-name" itemProp="counterpartyName"><span class="sr-only">Name</span>{{getTransactionDescription(transaction)}}</div><div class="lp-transactions-list-item-type text-muted" itemProp="transactionType"><span class="sr-only">Transaction type</span>{{getTransactionSubDescription(transaction)}}</div><div class="lp-transactions-list-item-info text-muted"><span class="sr-only" lp-i18n="Date"></span>{{transaction.bookingDateTime | date:\'MMM\'}} {{transaction.bookingDateTime | date:\'dd\'}} <span class="h6 text-muted transactions-list-item-amount" itemProp="transactionAmount" lp-amount="transaction.transactionAmount" lp-amount-currency="transaction.transactionCurrency"></span></div></div></div><div class="lp-transactions-list-item-amount column"><div class="centered"><span class="sr-only">Amount</span><span class="lp-transactions-list-item-amount-value" itemProp="transactionAmount" lp-amount="transaction.transactionAmount" lp-amount-currency="transaction.transactionCurrency"></span></div></div></div><div class="lp-transactions-list-item-toggle"></div></div><div class="clearfix details lp-transactions-list-item-details transaction-details" id="transaction-details-{{transaction.id}}" aria-labelledby="transaction-details-data-{{transaction.id}}"></div></div></div><div ng-if="showScrollbar && transactions.loading" role="alert"><div class="text-center" lp-i18n="Loading transactions..."></div></div><div ng-if="!showScrollbar && transactions.transactions.length"><div ng-show="transactions.allowMoreResults()"><p class="lp-transactions-list-more text-center"><a href="" class="lp-transactions-list-more-button cursor-pointer" tabindex="0" ng-click="loadMoreTransactions()" lp-i18n="Show more"></a></p></div></div></div></div>';return t}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";return['<div class="lp-transaction-details container-fluid">','<div progress-indicator="progress-indicator" is-loading="isLoading">','<div ng-if="transaction.details.bookingDateTime && transaction.details.address" class="row">','<div ng-if="transaction.details.bookingDateTime" class="col-xs-6 col-md-3" lp-transaction-details-datetime="transaction.details.bookingDateTime"></div>','<div ng-if="transaction.details.address" class="col-xs-6 col-md-3" lp-transaction-details-address="transaction.details.address"></div>','<div ng-if="transaction.details.location" class="col-xs-6 col-md-3" lp-transaction-details-map="transaction.details.location"></div>','<div ng-if="transaction.details.merchantType || transaction.details.category" class="col-xs-6 col-md-3">','<div ng-show="transaction.details.merchantType" lp-transaction-details-vertical detail-label="\'Merchant\'" detail-value="transaction.details.merchantType"></div>','<div ng-show="!transaction.details.merchantType" lp-transaction-details-vertical detail-label="\'Category\'" detail-value="transaction.details.category.name"></div>',"</div>","</div>",'<div ng-if="!(transaction.details.bookingDateTime && transaction.details.address)" class="row">','<div class="alert alert-warning col-xs-12">','<p><i class="lp-icon lp-icon-alert-warning"></i> <span lp-i18n="Specific details regarding this transaction are currently unavailable, please contact us for further information."></span></p>',"</div>","</div>",'<div ng-if="transaction.details.transactionId" class="row transaction-detail-reference">','<div class="col-xs-12 col-md-12" lp-transaction-details-horizontal detail-label="\'Transaction Reference\'" detail-value="transaction.details.transactionId"></div>',"</div>","</div>","</div>"].join("")}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;(function(t){"use strict";n=function(require,exports,t){t.name="component.transactions-list-authorizations";var n=e(7),a=[];t.exports=n.createModule(t.name,a).provider(e(29)).directive(e(30))}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))}).call(exports,e(6)(t))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";exports.lpTransactionsAuth=function(){this.$get=function(t,e,n,a,i){function o(){var e=function(){this.from=r.from,this.sort=r.sort,this.transactions=[],this.account=null,this.errorCode=null};return e.prototype.clearTransactionsAuthList=function(){return this.transactions=[],this.moreAvailable=!0,this.from=r.from,this},e.prototype.loadTransactionsAuth=function(t){return this.clearTransactionsAuthList(),this.account=t,this.loadMoreTransactionsAuth()},e.prototype.preprocessTransactions=function(t){return s.isArray(t)&&s.forEach(t,function(e,n){var a;e.id||(t[n].id=s.uniqueId()),e.categoryId||(t[n].categoryId="1"),e.creditDebitIndicator&&"DBIT"!==e.creditDebitIndicator||(t[n].creditDebitIndicator="DBIT",e.amount*=-1),e.dateTime&&(a=e.dateTime.replace(/-/g,"/"),t[n].dateTime=Date.parse(a))}),t},e.prototype.loadMoreTransactionsAuth=function(){var e=this;this.account||n.throwException(new Error("Auth list: No account specified"));var o=i.getConfig("accountHoldsEndpoint");if(!o)return a.when([]);var s={f:this.from,l:r.pageSize};return this.loading=!0,s.sort=this.sort,this.from=this.from+r.pageSize,t.get(o,{data:{accountIds:this.account.ids||this.account.id||""},params:s}).success(function(t){return e.errorCode=null,null!==t&&"null"!==t||(t=[]),e.transactions=e.preprocessTransactions(t),e.transactions}).error(function(t){return e.errorCode=t.errorCode||500,t})["finally"](function(){e.loading=!1})},e.prototype.noTransactionsAuthFound=function(){return!this.loading&&0===this.transactions.length&&!this.errorCode},new e}var r={pageSize:20,from:1,sort:"-bookingDateTime"},s=e;return{api:o}},this.$get.$inject=["$http","lpCoreUtils","lpCoreError","$q","lpTransactions"]}}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports){"use strict";var t=window.jQuery;exports.lpTransactionsAuthorizationsList=function(n,a){function i(e,n,i){e.transactions=a.api(),e.listVisible=!0,e.showToggle=!0,e.$watch("accounts.selected",function(t){t&&e.transactions.loadTransactionsAuth(t)["catch"](function(t){e.serverError=!0})}),e.openPreview=function(e){e.preview=!0,t("#transaction-"+e.id).addClass("preview")},e.closePreview=function(e){e.preview=!1,t("#transaction-"+e.id).removeClass("preview")}}function o(t,e){return i}return n.put("$transactions-auth/list.html",e(31)),{scope:{accounts:"=lpAccounts",transactionsCategories:"=lpTransactionsCategories",categoryLayout:"=",showCategories:"="},restrict:"AE",compile:o,template:n.get("$transactions-auth/list.html")}},exports.lpTransactionsAuthorizationsList.$inject=["$templateCache","lpTransactionsAuth"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";var e='<div ng-if="transactions.transactions.length > 0" class="lp-transactions-list-authorizations">    <h5 ng-click="(listVisible = !listVisible)" class="lp-auth-header text-muted">{{ "Authorizations and Funds on Hold" | translate}}&nbsp;        <i ng-show="listVisible" class="lp-icon lp-icon-caret-up"></i>        <i ng-show="!listVisible" class="lp-icon lp-icon-caret-down"></i>    </h5>    <div ng-show="!listVisible" class="text-warning text-center">{{ "List of on-hold transactions is collapsed. Click the header above to show it..." }}</div><br ng-show="!listVisible" />    <ul ng-show="listVisible" id="transactions-list-auth" class="list-group list-view transactions-list">        <li class="list-group-item list-view-row clearfix"            ng-repeat="transaction in transactions.transactions track by $index">            <div id="transaction-{{transaction.id}}" class="list-view-container clearfix">               <div class="categories" ng-mouseover="openPreview(transaction)" ng-mouseout="closePreview(transaction)" ng-if="showCategories">                   <div lp-category-display="lp-category-display" lp-category-view="previewAll" lp-category-list="transactionsCategories.categories" ng-model="transaction"></div>               </div>               <div class="info">                   <div class="col-md-8 col-sm-8 col-xs-8 column">                       <div class="centered">                           <div class="h4">{{ transaction.beneficiary }}</div>                           <div class="h6 text-muted">{{ transaction.dateTime | date }}</div>                       </div>                   </div>                   <div class="col-md-4 col-sm-4 col-xs-4 column text-center">                       <div class="centered">                           <span class="sr-only">Amount</span>                           <span class="h4" itemProp="transactionAmount"                               lp-amount="transaction.amount"                               lp-amount-currency="transaction.currencyCode"></span>                       </div>                   </div>               </div>            </div>        </li>    </ul>    <h3 class="lp-auth-footer"></h3></div>';return e}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;(function(t){"use strict";n=function(require,exports,t){t.name="component.transactions-search";var n=e(7),a=e(21),i=e(9),o=e(33),r=[a.name,i.name,o.name];t.exports=n.createModule(t.name,r).controller(e(34)).directive(e(35)).factory(e(39))}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))}).call(exports,e(6)(t))},function(t,exports){t.exports=s},function(t,exports,e){var n;n=function(require,exports){"use strict";exports.lpExportTransactions=function(t,e){t.download=function(t){e.close(t)},t.cancel=function(){e.dismiss("cancel")}},exports.lpExportTransactions.$inject=["$scope","$modalInstance"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports){"use strict";var t=window.jQuery;exports.lpTransactionsSearch=function(t,n,a,i){function o(t,o,r){var s,c={date:function(t){var e={fromDate:t.from.getTime(),toDate:t.to.getTime()};return a.publish("launchpad-retail.transactionsDateSearch",e),e},amount:function(t){return{fromAmount:t.from,toAmount:t.to}},contact:function(t){return{contact:t.contact}},category:function(t){return a.publish("launchpad-retail.transactionsCategorySearch",s.category),{category:t.category}},query:function(t){return{query:t.query}}},l="lp-icon",d=l+" lp-icon-new_top",p=l+" lp-icon-old_top",u=l+" lp-icon-big_to_small",g=l+" lp-icon-small_to_big";t.sort={options:[{label:"Newest on Top",icon:d,sort:"-bookingDateTime",aria:"Decreasing"},{label:"Oldest on Top",icon:p,sort:"bookingDateTime",aria:"Increasing"},{label:"Largest Amount on Top",icon:u,sort:"-transactionAmount",aria:"Decreasing"},{label:"Smallest Amount on Top",icon:g,sort:"transactionAmount",aria:"Increasing"}]},t.sort.selected=t.sort.options[0],t.$on("$destroy",function(){}),t.doSearch=function(){var e;if(s){var n=s.search.query?"query":s.type;e=c[n](s.search)}else e={};t.onPerformSearch({filters:e})},t.selectSuggestion=function(e){s=e,t.doSearch()},t.clearSuggestion=function(){t.onClearSearch()},t.updateSuggestion=function(){t.onUpdateSearch()},t.changeSort=function(){var e=t.sort.selected;t.onChangeSort({value:e})};var f=e(37);t.showExportOptions=function(){var e=n.open({template:f,controller:"lpExportTransactions"});e.result.then(function(e){t.onExportTransactions({format:e})},function(t){console.log(t)})},t.toggleCategoryView=function(){a.publish("launchpad-retail.module-transactions.toggleCategoryView")},t.showExportButton=!!t.showExportButton,t.showCategoriesToggle=i.isUndefined(t.showCategoriesToggle)?!0:t.showCategoriesToggle}function r(t,e){return o}return t.put("$transactions/sortDropdownOption.html",e(36)),{scope:{accounts:"=",contacts:"=",transactionsCategories:"=",showCategoriesToggle:"=?",showExportButton:"=?",onPerformSearch:"&",onClearSearch:"&",onUpdateSearch:"&",onChangeSort:"&",onExportTransactions:"&"},restrict:"AE",require:"?^ngModel",compile:r,template:e(38)}},exports.lpTransactionsSearch.$inject=["$templateCache","$modal","lpCoreBus","lpCoreUtils"],exports.lpSmartsuggest=function(e,n,a,i){return{restrict:"A",scope:{smartsuggestSelect:"=",smartsuggestClear:"=",smartsuggestUpdate:"=",currency:"=",contacts:"=",categories:"="},link:function(o,r,s){o.tagsInput=!!t(r).closest("form").find(".lp-tags").length,o.tagsInput===!0&&e.publish("lpTagsInputField",r[0]);var c=new a;c.addSuggester({data:[],suggest:a.builtIn.getContactSuggestions}),c.addSuggester({type:a.types.AMOUNT,suggest:a.builtIn.getAmountSuggestions}),c.addSuggester({type:a.types.DATE,suggest:a.builtIn.getDateSuggestions}),c.addSuggester({type:a.types.GENERAL,suggest:a.builtIn.getGeneralSuggestions});var l=new i({locale:"en-US",currency:o.currency});o.$watch("currency",function(t){l.currency=t}),o.$watch("contacts",function(t){n.isArray(t)&&c.addSuggester({data:t,suggest:a.builtIn.getContactSuggestions})}),o.$watch("categories",function(t){l.categories=t,c.addSuggester({data:o.categories,type:a.types.CATEGORY,suggest:a.builtIn.getCategorySuggestions})}),t(r).autosuggest({lookup:function(t){var e=c.getSuggestions(t);return e=e.map(function(t){var e,n=l.format(t);return e=t.contact?t.contact.name:2===n.length?n[0]+" to "+n[1]:n[0],{data:t,value:e}})},onSelect:function(t){o.smartsuggestSelect&&(e.publish("lpSearchSelectValue",{type:t.data.type,text:t.value,icon:l.getSuggestionIcon(t.data,!0)}),o.$apply(function(){o.smartsuggestSelect.call({},t.data)}))},onClear:function(){o.smartsuggestClear&&!o.tagsInput&&o.$apply(function(){o.smartsuggestClear.call({})})},onChangeModel:function(){o.smartsuggestUpdate&&o.tagsInput&&o.$apply(function(){o.smartsuggestUpdate.call({},!0)})},formatResult:function(t){return l.getSuggestionHtml(t.data)},autoSelectFirst:!0})}}},exports.lpSmartsuggest.$inject=["lpCoreBus","lpCoreUtils","SmartSuggestEngine","SmartSuggestFormatter"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";var e='<span>    <i class="{{option.icon}} option-icon"></i>    <span class="sr-only">Sort by</span>    <span class="option-label">{{option.label}}</span>    <span class="sr-only">{{option.aria}}</span>    <i class="lp-icon lp-icon-checkmark_fat"></i></span>';return e}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";t.exports=['<div class="export-transactions-modal">','<div class="panel-body">','<div class="modal-header" lp-i18n="Export Results"></div>','<div class="modal-body">','<p lp-i18n="Select your chosen format bellow to export all transaction results currently displayed."></p>',"<form>","<ul>","<li>",'<lp-custom-radio ng-model="exportOption" value="csv">','<span lp-i18n="CSV - integrates with Excel, Numbers, etc."></span>',"</lp-custom-radio>","<li>",'<lp-custom-radio ng-model="exportOption" value="ofx">','<span lp-i18n="OFX - integrates with Quicken."></span>',"</lp-custom-radio>","</li>","</ul>","</form>","</div>",'<div class="modal-footer">','<button type="button" ng-click="cancel()" class="btn btn-link" lp-i18n="Cancel"></button>','<button type="button" ng-click="download(exportOption)" ng-disabled="!exportOption" class="btn btn-primary" lp-i18n="Export Format"></button>','<p class="small">','<i class="lp-icon lp-icon-info-sign"></i><span lp-i18n="For best results narrow your search criteria to keep from downloading unnecesary transactions."></span>',"</p>","</div>","</div>","</div>"].join("")}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";t.exports=['<form ng-submit="doSearch" ng-class="{ \'has-category-toggle\': showCategories }">','    <div class="lp-search-wrapper">','        <div class="lp-search-left" ng-if="showCategoriesToggle">','           <button class="btn lp-incorporate-btn" tabindex="0" aria-pressed="{{ previewAll }}" ng-click="toggleCategoryView()" ng-class="{ \'active\': previewAll }">','               <i title="Category view" class="lp-icon lp-icon-tag"></i>','               <span class="sr-only">Show Categories</span>',"           </button>","        </div>",'        <div class="lp-search-left">','            <div lp-tags-filters="lp-tags-filters"></div>',"        </div>",'        <div class="lp-search-tags">','            <div lp-tags="lp-tags" empty="lp-tags-left" class="lp-tags"></div>','            <input lp-smartsuggest="lp-smartsuggest"','                   smartsuggest-select="selectSuggestion"','                   smartsuggest-clear="clearSuggestion"','                   smartsuggest-update="updateSuggestion"','                   currency="accounts.selected.currency"','                   contacts="contacts.contacts"','                   categories="transactionsCategories.categories"','                   ng-model="searchTerm"','                   class="form-control" placeholder="Search for dates, amounts, contacts..." />',"        </div>",'        <div class="lp-search-right">','            <div dropdown-select="dropdown-select" options="option as option for option in sort.options" ng-model="sort.selected" ng-change="changeSort()" class="input-group-btn sort-select pull-right lp-incorporate-btn" option-template-url="$transactions/sortDropdownOption.html"','                 aria-controls="transactions-list">',"            </div>","        </div>",'        <div ng-if="showExportButton" class="lp-transactions-export-btn">','            <button type="button" class="btn btn-default lp-search-col lp-incorporate-btn" ng-click="showExportOptions()">','               <i class="fa fa-download"></i><span lp-i18n=" Export List"></span>',"            </button>","        </div>","    </div>","</form>"].join("")}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports){"use strict";exports.lpDownloadTransactionsFile=function(t){return function(e){t.open(e,"_blank")||console.log("lpDownloadTransactionsFile:error")}},exports.lpDownloadTransactionsFile.$inject=["$window"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;(function(t){"use strict";n=function(require,exports,t){t.name="component.transactions-spendings";var n=e(7),a=[];t.exports=n.createModule(t.name,a).factory(e(41)).directive(e(42))}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))}).call(exports,e(6)(t))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";function e(t,e){var n=function(n,a){var i=a.getEndpoint(t);return n(i,null,e)};return n.$inject=["$resource","lpTransactions"],n}exports.CategorySpendingsResource=e("categorySpendingEndpoint",{get:{method:"GET"}}),exports.CategoriesResource=e("categoriesEndpoint",{get:{method:"GET",isArray:!0}})}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";function n(t,e){t.selectAll("tspan").remove();var n=t.attr("width"),a=1,i=t.append("tspan"),o=e.split(/\s+/),r=20;if(1===o.length&&e.length>15)return i.text(e.slice(0,12)+"..."),t;for(var s=0;s<o.length;s++){var c=i.node();if(c&&c.getComputedTextLength&&c.getComputedTextLength()>n){if(a++,a>=3){i.text(i.text()+"...");break}i=t.append("tspan").attr({x:0,dy:r})}i.text(i.text()+" "+o[s])}return t}function a(t){return(100*t).toFixed(2)+"%"}var i=e(43),o=e(7).utils;exports.lpCategoriesSpendings=function(t,e,n,a,i,r){function s(t){var e=t.spendings.categoriesSpendings,n=t.categories;return e.sort(function(t,e){return t.amount-e.amount}).forEach(function(e){var a=o.find(n,function(t){return t.id===e.categoryId});e.name=a.name,e.color=a.color,e.currency=t.spendings.currency}),e}function c(n,c,l){n.options=o.assign({},n.options,n.lpCategoriesSpendings),n.accountId=null,n.fromDate=null,n.toDate=null,n.viewLoading=!0,n.missingData=!1,n.showChart=!1,n.$watchCollection("[viewLoading,missingData]",function(t,e){var a=t[0],i=t[1];n.showChart=!a&&!i}),n.selectItem=function(t){e(function(){n.selectedItem=t,a.publish("launchpad-retail.donutCategoryChartSelection",t)})},n.resize=function(t,a){e(function(){n.width=t})},n.updateData=function(){var e={accountIds:n.accountId||null,start:n.fromDate,end:n.toDate};t.all({spendings:i.get(e).$promise,categories:r.get().$promise}).then(function(t){return n.viewLoading=!1,0===t.spendings.categoriesSpendings.length?void(n.missingData=!0):(n.missingData=!1,void(n.options=o.assign({},n.options,{data:s(t)})))},function(t){n.viewLoading=!1,n.missingData=!0})};var d,p=function(t){o.forEach(t,function(t){t.ids&&(d=t.ids)}),n.accountId=d};a.subscribe("launchpad-retail.accountsLoaded",p),a.subscribe("lpAccounts.loaded",p);var u=n.$watch("lpAccounts.selected",function(t){return t?(a.subscribe("launchpad-retail.accountSelected",function(t){n.accountId=t.allAccounts?d:t.accountId,n.updateData()}),n.accountId=t.id,n.updateData(),void u()):(n.viewLoading=!1,void(n.missingData=!0))});a.subscribe("launchpad-retail.transactionsDateSearch",function(t){n.fromDate=t.fromDate,n.toDate=t.toDate,n.updateData()}),a.subscribe("launchpad-retail.transactionsCategorySearch",function(t){if(1===t.length){var e=o.find(n.options.data,function(e){return e.categoryId===t[0].id});n.selectItem(e)}}),n.$on("tabSelected",function(t,e){"donut"===e&&(n.options=o.assign({},n.options))})}function l(t,e){return c}function d(){return'<div class="ng-cloak" ng-class="responsiveClass">   <div class="lp-widget-content widget widget-default" role="application">       <div class="lp-widget-body" progress-indicator="viewLoading">           <div ng-if="missingData" class="panel-message" >               <div class="panel-body text-center" lp-i18n="Chart data is not available."></div>           </div>           <div lp-donut-chart options="options" class="category-spendings-chart" on-select="selectItem" item="selectedItem" on-resize="resize" ng-show="showChart">              <div category-details ng-model="selectedItem" width="width"></div>           </div>       </div>   </div></div>'}return{scope:{lpCategoriesSpendings:"=?",lpAccounts:"=",options:"=?"},restrict:"AE",compile:l,template:d,replace:!0}},exports.lpCategoriesSpendings.$inject=["$q","$timeout","$templateCache","lpCoreBus","CategorySpendingsResource","CategoriesResource"],exports.categoryDetails=function(t){function e(e,o){function r(t,e){if(t){var n=t/2,a=.55*n;d.attr("transform","translate("+n+","+n+")");var i=t/20;d.select(".name").attr({y:-.34*a,width:a}).style("font-size",i+"px"),d.select(".amount").attr({y:.15*a}).style("font-size",1.4*i+"px"),d.select(".share").attr({y:.5*a}).style("font-size",i+"px"),d.select(".delta").attr({y:.5*a}).style("font-size",i+"px")}}function s(e){if(e){n(d.select(".name"),e.name);var i=e.historicalChangeFactor||1,o=0>i?"â†“":i>0?"â†‘":"";d.select(".amount").text(t.formatCurrency(e.amount,e.currency)),d.select(".share").text(a(e.totalFraction)+"Â "),d.select(".delta").text("Â "+o+a(Math.abs(i)))}}var c=o.find("svg"),l=c.length?i.select(c[0]):i.select(o[0]).append("svg:svg"),d=l.append("svg:g");d.append("svg:text").attr("class","name"),d.append("svg:text").attr("class","amount"),d.append("svg:text").attr("class","share"),d.append("svg:text").attr("class","delta"),e.$watch("width",r),e.$watch("data",s)}return{restrict:"EA",link:e,scope:{data:"=ngModel",width:"="}}},exports.categoryDetails.$inject=["lpCoreI18n"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports){t.exports=c},function(t,exports,e){var n;(function(t){"use strict";n=function(require,exports,t){t.name="component.transactions-charts";var n=e(7),a=e(21),i=e(10),o=[a.name,i.name];t.exports=n.createModule(t.name,o).factory(e(45)).directive(e(46))}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))}).call(exports,e(6)(t))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";var n=e(7).utils,a=function(t,e){return t&&t.length?t[0].hasOwnProperty(e)?n.chain(t).map(function(t){return t[e]}).reduce(function(t,e){return t.concat(e)},[]).value():t:[]};exports.lpAccountsChartData=function(t,e,n){var i={accountsChartEndpoint:n.getEndpoint("accountsChartEndpoint"),accountId:null},o=function(e){this.config=t.extend({},i,e),this.chartData=null,this.error=!1};return o.prototype.setId=function(t,e){this.config.allAccounts=!!e,this.config.accountId=t},o.prototype.load=function(t){var i,o=this,r={};return t||(t={}),this.config.allAccounts?(i=this.config.allAccountsChartEndpoint||n.getEndpoint("allAccountsChartEndpoint"),t.accountIds=this.config.accountId):(i=this.config.accountsChartEndpoint,r.data={accountId:this.config.accountId}),r.params=t,e.get(i,r).then(function(t){return o.chartData=a(t.data,"balances"),o.chartData},function(t){t.errors&&(o.error=t.errors[0].code)})},{getInstance:function(t){return new o(t)}}},exports.lpAccountsChartData.$inject=["lpCoreUtils","$http","lpTransactions"],exports.lpTransactionsChartData=function(t,e,n){var i={transactionsChartEndpoint:n.getEndpoint("transactionsChartEndpoint"),accountId:null},o=function(e){this.config=t.extend({},i,e),this.chartData=null,this.error=!1};return o.prototype.setId=function(t,e){this.config.allAccounts=!!e,this.config.accountId=t},o.prototype.load=function(t){var i,o=this,r={};return t||(t={}),this.config.allAccounts?(i=this.config.allTransactionsChartEndpoint||n.getEndpoint("allTransactionsChartEndpoint"),t.accountIds=this.config.accountId):(i=this.config.transactionsChartEndpoint,r.data={accountId:this.config.accountId}),r.params=t,e.get(i,r).then(function(t){return o.chartData=a(t.data,"turnovers"),o.chartData},function(t){t.errors&&(o.error=t.errors[0].code)})},{getInstance:function(t){return new o(t)}}},exports.lpTransactionsChartData.$inject=["lpCoreUtils","$http","lpTransactions"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports){"use strict";function t(t){var i=function(i,o,r,s,c,l,d){function p(t,e,a){var i=function(t,e){var n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"],a=new Date(t),i=new Date(e);return a.setDate(a.getDate()+1),a.getDate()+" "+n[a.getMonth()]+" - "+i.getDate()+" "+n[i.getMonth()]},p=function(){var e=new Date(t.endDate);switch(t.scale){case"WEEK":e.setDate(e.getDate()-7);break;case"MONTH":e.setMonth(e.getMonth()-1)}return e},u=function(e){t.endDate=new Date(e),t.timePeriod=i(p().getTime(),t.endDate.getTime())},g=function v(t){t&&t.length&&u(t[0].bookingDateTime),d.unsubscribe("widget-transactions:transactions:ready",v)};d.subscribe("widget-transactions:transactions:ready",g);var f=function(e,a){var o={start:p().getTime(),end:t.endDate.getTime()};t.timePeriod=i(o.start,o.end);var c=function(t){var e=new Date(t);return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e},l=function(e){return"DEPOSIT"===t.series?e.deposit:e.hasOwnProperty("withdrawal")?e.withdrawal:e.hasOwnProperty("withdraw")?e.withdraw:0},d=function(e){return r.formatCurrency(e,t.lpAccounts.selected.currency)};t.loading=!0,t.emptyTurnovers=!1,t.emptyBalances=!1,s.all([t.transactionsChartModel.load(o),t.accountsChartModel.load(o)]).then(function(t){return{turnovers:t[0],balances:t[1]}}).then(function(i){t.loading=!1,i.turnovers&&i.turnovers.length?t.transactionsChartOptions={data:i.turnovers,height:200,padding:[30,30,30,90],parsers:{x:function(t){return c(t.date)},y:function(t){return l(t)}},formatters:{y:function(t){return d(t)},x:function(t){return n.time.format("%e")(t)},tooltip:function(t){return n.time.format("%B %e")(c(t.date))+"<br>"+d(l(t))}}}:t.emptyTurnovers=!0,a||(i.balances&&i.balances.length?t.accountBalanceChartOptions={data:i.balances,height:200,padding:[30,30,30,90],parsers:{x:function(t){return c(t.date)},y:function(t){return t.amount}},formatters:{y:function(t){return d(t)},x:function(t){return n.time.format("%e")(t)},tooltip:function(t){return n.time.format("%B %e")(c(t.date))+"<br>"+d(t.amount)}},animation:{direction:"prev"===e?"left":"right"}}:t.emptyBalances=!0)})},h=function(e,n){t.accountsChartModel.setId(e,n),t.transactionsChartModel.setId(e,n),t.lpAccounts.selected&&!t.lpAccounts.selected.cardId&&f("prev")},m=function(){t.now=new Date,t.scale="WEEK",t.series="WITHDRAWAL",u(t.now),t.accountsChartModel=c.getInstance(),t.transactionsChartModel=l.getInstance();var e;d.subscribe("lpAccounts.loaded",function(t){e=o.result(o.find(t,function(t){return!!t.ids}),"ids")});var n=t.$watch("lpAccounts.selected",function(t){t&&(d.subscribe("launchpad-retail.accountSelected",function(t){var n=t.allAccounts?e:t.accountId;h(n,t.allAccounts)}),h(t.id),n())})};t.nextPeriod=function(){switch(t.scale){
case"WEEK":t.endDate.setDate(t.endDate.getDate()+7);break;case"MONTH":t.endDate.setMonth(t.endDate.getMonth()+1)}f("next")},t.prevPeriod=function(){switch(t.scale){case"WEEK":t.endDate.setDate(t.endDate.getDate()-7);break;case"MONTH":t.endDate.setMonth(t.endDate.getMonth()-1)}f("prev")},t.setScale=function(e){t.scale=e,f("prev")},t.setSeries=function(e){t.series=e,f("prev",!0)},t.showNextPeriod=function(){return t.now.getTime()>t.endDate.getTime()},t.$on("tabSelected",function(t,e){"chart"!==e&&"combined"!==e||f("prev")}),m()}function u(t,e){return p}return t===a.vertical?i.put("$transactions/chartTemplate",e(47)):i.put("$transactions/chartTemplate-horizontal",e(48)),{scope:{lpAccounts:"="},restrict:"AE",compile:u,template:i.get("$transactions/chartTemplate"+t)}};return i.$inject=["$templateCache","lpCoreUtils","lpCoreI18n","$q","lpAccountsChartData","lpTransactionsChartData","lpCoreBus"],i}var n=e(43),a={vertical:"",horizontal:"-horizontal"};exports.lpTransactionsCharts=t(a.vertical),exports.lpTransactionsChartsHorizontal=t(a.horizontal)}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";var e='<div class="lp-widget-body">    <div>        <div class="panel-body lp-chart-balances">            <div class="h4">Balance - <span ng-bind="timePeriod"></span></div>            <div progress-indicator="loading" class="chart-progress-indicator"></div>            <div ng-show="!loading && !emptyBalances" lp-line-chart="lp-line-chart" lp-chart-options="accountBalanceChartOptions" class="accountsChart lp-chart"></div>            <div ng-show="emptyBalances" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>        </div>        <div class="panel-body">            <div class="controls clearfix">                <div class="col-xs-2">                    <button class="btn btn-primary btn-block arrow" ng-click="prevPeriod()">&lt;</button>                </div>                <div class="col-xs-8 text-center">                    <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'WEEK\'}" ng-click="setScale(\'WEEK\')">7D</button>                    <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'MONTH\'}" ng-click="setScale(\'MONTH\')">1M</button>                </div>                <div class="col-xs-2">                    <button class="btn btn-primary btn-block arrow" ng-click="nextPeriod()" ng-show="showNextPeriod()">&gt;</button>                </div>            </div>        </div>        <div class="panel-body lp-chart-turnovers">            <div class="h4">Transactions - <span ng-bind="timePeriod"></span></div>            <div progress-indicator="loading" class="chart-progress-indicator"></div>            <div ng-show="!loading && !emptyTurnovers" lp-bar-chart="lp-bar-chart" lp-chart-options="transactionsChartOptions" class="transactionsChart lp-chart"></div>            <div ng-show="emptyTurnovers" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>        </div>        <div class="panel-body">            <div class="controls clearfix text-center">                <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'WITHDRAWAL\'}" ng-click="setSeries(\'WITHDRAWAL\')">Spending</button>                <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'DEPOSIT\'}" ng-click="setSeries(\'DEPOSIT\')">Income</button>            </div>        </div>    </div></div>';return e}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";var e='<div class="lp-widget-body clearfix">    <div>        <div class="col-xs-12 col-sm-6 chart-horizontal">            <div class="panel-body lp-chart-balances">                <div class="h4">Balance<br /><span ng-bind="timePeriod"></span></div>                <div progress-indicator="loading" class="chart-progress-indicator"></div>                <div ng-show="!loading && !emptyBalances" lp-line-chart="lp-line-chart" lp-chart-options="accountBalanceChartOptions" class="accountsChart lp-chart"></div>                <div ng-show="emptyBalances" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>            </div>            <div class="panel-body">                <div class="controls clearfix">                    <div class="col-xs-2">                        <button class="btn btn-primary btn-block arrow" ng-click="prevPeriod()">&lt;</button>                    </div>                    <div class="col-xs-8 text-center">                        <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'WEEK\'}" ng-click="setScale(\'WEEK\')">7D</button>                        <button class="btn btn-default" ng-class="{\'btn-primary\':scale==\'MONTH\'}" ng-click="setScale(\'MONTH\')">1M</button>                    </div>                    <div class="col-xs-2">                        <button class="btn btn-primary btn-block arrow" ng-click="nextPeriod()" ng-show="showNextPeriod()">&gt;</button>                    </div>                </div>            </div>        </div>        <div class="col-xs-12 col-sm-6 chart-horizontal">            <div class="panel-body lp-chart-turnovers">                <div class="h4">Transactions<br /><span ng-bind="timePeriod"></span></div>                <div progress-indicator="loading" class="chart-progress-indicator"></div>                <div ng-show="!loading && !emptyTurnovers" lp-bar-chart="lp-bar-chart" lp-chart-options="transactionsChartOptions" class="transactionsChart lp-chart"></div>                <div ng-show="emptyTurnovers" class="chart-empty-data" lp-i18n="There is no data available for this period of time"></div>            </div>            <div class="panel-body">                <div class="controls clearfix text-center">                    <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'WITHDRAWAL\'}" ng-click="setSeries(\'WITHDRAWAL\')">Spending</button>                    <button class="btn btn-default" ng-class="{\'btn-primary\':series==\'DEPOSIT\'}" ng-click="setSeries(\'DEPOSIT\')">Income</button>                </div>            </div>        </div>    </div></div>';return e}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";exports.lpTransactions=function(){this.$get=function(t,e,n,a,i){function o(){var o=function(){this.from=s.from,this.sort=s.sort,this.transactions=[],this.moreAvailable=!0,this.account=null,this.errorCode=null};return o.prototype.availableFilters={QUERY:"query",FROM_DATE:"fromDate",TO_DATE:"toDate",FROM_AMOUNT:"fromAmount",TO_AMOUNT:"toAmount",CONTACT:"contact",CATEGORY:"category",DEBITCREDIT:"bk"},o.prototype.clearTransactionsList=function(){return this.transactions=[],this.moreAvailable=!0,this.from=s.from,this.errorCode=null,this},o.prototype.setFilters=function(t){return i?(i.setFilter(t),this.filters=i.getFilters()):this.filters=t,this},o.prototype.clearFilters=function(){return i?this.filters=i.clearFilters():this.filters={},this},o.prototype.updateFilters=function(){return i?this.filters=i.getFilters():this.filters={},this},o.prototype.preprocessTransactions=function(t){var e=this.transactions[this.transactions.length-1]||null,a=n.date;return t&&(t=n.map(t,function(n,i){var o=t[i-1]||e||null,r=o?a(o.bookingDateTime):a().add(1,"days"),s=a(n.bookingDateTime);return n.newDate=r.date()!==s.date()||r.month()!==s.month()||r.year()!==s.year(),n.details||(n.details=null),n.detailTabs={details:!0,categories:!1},"DBIT"===n.creditDebitIndicator&&(n.transactionAmount*=-1),n})),t},o.prototype.getQueryParamaters=function(){var t,e={},a=this.availableFilters;return this.filters&&(t=parseInt(this.filters[a.DEBITCREDIT],10),this.filters.query&&(e.a="search",e.q=this.filters[a.QUERY]),this.filters[a.FROM_DATE]&&this.filters[a.TO_DATE]&&(e.df=this.filters[a.FROM_DATE],e.dt=this.filters[a.TO_DATE]),n.isUndefined(this.filters[a.FROM_AMOUNT])||n.isUndefined(this.filters[a.TO_AMOUNT])||(e.af=this.filters[a.FROM_AMOUNT],e.at=this.filters[a.TO_AMOUNT]),this.filters[a.CONTACT]&&(e.ca=this.filters[a.CONTACT]),this.filters[a.CATEGORY]&&(e.categoryIds=this.filters[a.CATEGORY]),this.filters[a.DEBITCREDIT]&&(e.crdb=1===t?"DBIT":"CRDT")),e.sort=this.sort,e},o.prototype.getExportTransactionsLink=function(t){var e=this.account.id||this.account.ids||"",i=this.getQueryParamaters(),o=s.transactionsEndpoint.replace("$(accountId)",e).split("?"),r=[];return i.format=t,i=n.buildQueryString(i),o.length||a.throwException(new Error("Missing transactions service url")),r.push(o[0]),o.length>1&&(i=i+"&"+o[1]),r.push(i),r.join("?")},o.prototype.loadMoreTransactions=function(){var i=this,o=e.defer();this.account||a.throwException(new Error("No account specified")),this.account.allAccounts&&(this.account.id="");var c=n.assign({f:this.from,l:s.pageSize+1},this.getQueryParamaters());return this.loading=!0,this.from=this.from+s.pageSize,t.get(s.transactionsEndpoint,{data:{accountId:this.account.id||this.account.ids||""},params:c}).success(function(t){i.errorCode=null,null!==t&&"null"!==t||(t=[]);var e=i.preprocessTransactions(n.compact(t));e&&e.length<=s.pageSize?i.moreAvailable=!1:e&&e.pop(),i.transactions=i.transactions.concat(e),i.transactions=r(i.account,i.transactions),o.resolve(i.transactions)}).error(function(t){i.errorCode=t.errorCode||500})["finally"](function(){i.loading=!1}),o.promise},o.prototype.loadTransactions=function(t){return this.clearTransactionsList(),this.account=t,this.loadMoreTransactions()},o.prototype.preprocessTransactionDetails=function(t,e){var a=[],i=[],o=["location"],r=["address","merchantType","bookingDateTime"],s=["transactionId"];if(t){if(n.isObject(t.location)){var c=t.location.latitude+","+t.location.longitude,l=["size=160x90","center="+c,"zoom=12","format=jpg","sensor="+!1,"markers="+encodeURIComponent("size:med|color:red|")+c];t.location.mapUrl="http://maps.googleapis.com/maps/api/staticmap?"+l.join("&")}t.bookingDateTime=e.bookingDateTime;for(var d in t)if(t.hasOwnProperty(d)&&o.indexOf(d)<0){var p={name:d,value:t[d],longValue:s.indexOf(d)>-1};r.indexOf(d)>-1?a.push(p):i.push(p)}t.special=a,t.custom=i}return t},o.prototype.loadTransactionDetails=function(a){var i=this;return!a.details||n.isEmpty(a.details)?(a.loading=!0,t.get(s.transactionDetailsEndpoint,{params:{transactionId:a.id}}).then(function(t){return a.loading=!1,a.details={},n.assign(a.details,i.preprocessTransactionDetails(t.data,a))},function(t){a.loading=!1,a.errorCode=t.data.errorCode||500})):e.when(a.details)},o.prototype.updateTransactionCategory=function(e,n){return t.put(s.transactionsEndpoint+"/"+e.id,{accountId:this.account.id,categoryId:n}).success(function(t){e.categoryId=n}).error(function(t){e.errorCode=t.errorCode||500})},o.prototype.updateSimilarTransactionCategory=function(e,n){return t.put(s.transactionsEndpoint+"/"+e.id,{accountId:this.account.id,categoryId:n,condition:"SIMILAR"}).success(function(t){e.categoryId=n}).error(function(t){e.errorCode=t.errorCode||500})},o.prototype.allowMoreResults=function(){var t=!this.loading&&this.moreAvailable&&!this.errorCode;return t},o.prototype.noTransactionsFound=function(){var t=!this.loading&&0===this.transactions.length&&!this.errorCode;return t},o.prototype.isSearching=function(){if(this.filters)for(var t in this.filters)if(this.filters.hasOwnProperty(t))return!0;return!1},new o}var r=function(t,e){var a=t.accountsNames;return a&&n.isObject(a)&&n.forEach(e,function(t){t.accountName=a[t.accountId]||""}),e},s={pageSize:20,from:0,sort:"-bookingDateTime"};return{setConfig:function(t){return s=n(t).chain().mapValues(n.resolvePortalPlaceholders).defaults(s).value(),this},getConfig:function(t){return t&&n.isString(t)?s[t]:s},getEndpoint:function(t){var e=this.getConfig(t);return e||a.throwException(new Error(t+" is not configured.\nfor more information read here:\nhttps://components.backbase.com/items/module-transactions#provider\n")),e},api:o}},this.$get.$inject=["$http","$q","lpCoreUtils","lpCoreError","lpTagsUtils"]}}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))},function(t,exports,e){var n;n=function(require,exports,t){"use strict";exports.lpBalanceUpdate=function(){return{restrict:"A",require:"ngModel",link:function(t,e,n,a){e.addClass("lp-amount"),t.$watch(function(){return a.$modelValue},function(t,n){if(t.id===n.id){var a={increase:"lp-increase-amount",decrease:"lp-decrease-amount"},i=2e3;1===t.delta?(e.addClass(a.increase),setTimeout(function(){e.removeClass(a.increase)},i)):-1===t.delta&&(e.addClass(a.decrease),setTimeout(function(){e.removeClass(a.decrease)},i)),t.delta=0}})}}},exports.lpResponsiveCallback=function(t,e,n){function a(a,i,o){var r=t(o.lpResponsiveCallback),s=function(t){return function(){i.removeClass("lp-tile-size lp-small-size lp-medium-size lp-large-size"),i.addClass("lp-"+t+"-size"),n(function(){r(a,{size:t})})}};e.enable(i).rule({"max-width":200,then:s("tile")}).rule({"min-width":201,"max-width":375,then:s("small")}).rule({"min-width":376,"max-width":600,then:s("medium")}).rule({"min-width":601,then:s("large")})}return{restrict:"A",link:a}},exports.lpResponsiveCallback.$inject=["$parse","lpUIResponsive","$timeout"]}.call(exports,e,exports,t),!(void 0!==n&&(t.exports=n))}])});
//# sourceMappingURL=main.js.map