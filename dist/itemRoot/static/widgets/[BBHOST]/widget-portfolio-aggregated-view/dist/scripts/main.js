/* widget-portfolio-aggregated-view@v2.4.1 build with â™¥ by bb-lp-cli@v1.9.17 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("base"),require("core"),require("module-charts"),require("module-wealth"),require("d3")):"function"==typeof define&&define.amd?define(["base","core","module-charts","module-wealth","d3"],t):"object"==typeof exports?exports["widget-portfolio-aggregated-view"]=t(require("base"),require("core"),require("module-charts"),require("module-wealth"),require("d3")):e["widget-portfolio-aggregated-view"]=t(e.base,e.core,e["module-charts"],e["module-wealth"],e.d3)}(this,function(e,t,r,a,n){return function(e){function t(a){if(r[a])return r[a].exports;var n=r[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var r={};return t.m=e,t.c=r,t.p="/",t(0)}([function(e,exports,t){e.exports=t(1)},function(e,exports,t){var r;(function(e){"use strict";r=function(require,exports,e){function r(e,t){t.setConfig({portfolioEndPoint:e.getPreference("dataSrc")})}r.$inject=["lpWidget","lpWealth"],e.name="portfolio-aggregated-view";var a=t(3),n=t(4),o=t(5),i=t(6),c=[n.name,o.name,i.name];e.exports=a.createModule(e.name,c).controller(t(7)).directive(t(8)).directive(t(10)).run(r)}.call(exports,t,exports,e),!(void 0!==r&&(e.exports=r))}).call(exports,t(2)(e))},function(e,exports){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(t,exports){t.exports=e},function(e,exports){e.exports=t},function(e,exports){e.exports=r},function(e,exports){e.exports=a},function(e,exports,t){var r;r=function(require,exports,e){"use strict";var t=[{id:"assetAllocations",name:"Assets Allocation",type:"treemap"},{id:"geographicalAllocations",name:"Geographical Allocation",type:"treemap"},{id:"combinedAllocations",name:"Combined Assets and Geographical",type:"treemap"},{id:"equitySectors",name:"Equity Sectors",type:"treemap"},{id:"bonds",name:"Bonds Details",type:"barchart"}];exports.AggregatedCtrl=function(e,r){function a(e){n.loading=!1,n.views=t,n.current=t[0],n.data=e}var n=this;n.set=function(e){n.current=e},r.subscribe("launchpad-retail.portfolioSelected",function(t){n.loading=!0,e.getData(t.id).then(a)})},exports.AggregatedCtrl.$inject=["aggregatedModel","lpCoreBus"]}.call(exports,t,exports,e),!(void 0!==r&&(e.exports=r))},function(e,exports,t){var r;r=function(require,exports,e){"use strict";function r(e){var t=i.time.format("%Y").parse;return e.forEach(function(e){e.date=t(e.year)}),e}var a=t(3),n=a.ng,o=a.utils,i=t(9),c=o.property("date"),s=o.property("amount");exports.lpAggregatedBars=function(e,t,a,l,d,u){function p(p,f){function m(){z.offset({x:v.rangeBand()/2}),q.render(),A.render()}function g(e){var t=f.parent().parent(),a=t.parent().width(),n=t.height();a<=0||n<=0||(y.find(".ytm").html("<h2>"+e.averageYieldToMaturity.toFixed(2)+"%</h2>Avg. YTM"),e=r(e.datapoints),b.data=e,v.domain(e.map(c)),x.domain([0,i.max(e,s)]),m())}function h(){var e=f.parent().parent(),t=e.parent().width(),r=e.height();t<=0||r<=0||(t-=y.find(".ytm").width(),v.rangeBands([0,t],.1),x.range([r,0]),w.attr({width:t,height:r}),q.resize(t,r),z.resize(t,r),m())}var y=f.html('<div class="ytm"/>'),v=i.scale.ordinal(),x=i.scale.linear(),w=i.select(f[0]).append("svg"),b={node:w,xScale:v,yScale:x,parsers:{x:c,y:s},formatters:{x:i.time.format("%Y"),tooltip:o.compose(t.formatCurrency,s)},data:[]},A=l(b).attr("class","bars"),q=a(b).ticks({y:0});q.x.tickPadding(-25);var z=d(b);h(),u.onParentPanelToggle(f,function(){h(),g(p.data)}),n.element(e).on("resize",o.debounce(h,250)),p.$watch("data",g)}return{restrict:"EA",require:"?ngModel",priority:Number.MAX_VALUE,link:p,scope:{data:"=lpAggregatedBars"}}},exports.lpAggregatedBars.$inject=["$window","lpCoreI18n","axesFactory","barsFactory","tooltipFactory","wealthUtils"]}.call(exports,t,exports,e),!(void 0!==r&&(e.exports=r))},function(e,exports){e.exports=n},function(e,exports,t){var r;r=function(require,exports,e){"use strict";function r(e,t){return"cat-"+t%d}function a(e){return{name:e.assetTypeName&&e.zoneName?e.assetTypeName+"<br/>"+e.zoneName:e.assetTypeName||e.zoneName||e.equitySectorName,size:e.percentage}}function n(e){return{children:e.map(a)}}function o(e){return e.name+"<br/>"+e.size+"%"}var i=t(3),c=i.ng,s=i.utils,l=t(9),d=8;exports.lpAggregatedTreemap=function(e,t,a,i){function d(d,u){function p(){v.render()}function f(){var e=u.parent().parent(),t=e.parent().width(),r=e.height();t<=0||r<=0||(v.resize(t,r),p())}function m(e){y.data=n(e),v.render(),p()}var g=l.select(u[0]),h=t({node:g,formatters:{tooltip:o}}),y={node:g,parser:s.property("size"),formatter:s.compose(function(e){return"<span>"+e+"</span>"},o)},v=a(y).attr("class","treemap").itemAttr({class:r}).on({mouseover:h.show,mouseout:h.hide});f(),i.onParentPanelToggle(u,f),c.element(e).on("resize",s.debounce(f,250)),d.$watch("data",m)}return{restrict:"EA",require:"?ngModel",priority:Number.MAX_VALUE,link:d,scope:{data:"=lpAggregatedTreemap"}}},exports.lpAggregatedTreemap.$inject=["$window","tooltipFactory","treemapFactory","wealthUtils"]}.call(exports,t,exports,e),!(void 0!==r&&(e.exports=r))}])});
//# sourceMappingURL=main.js.map