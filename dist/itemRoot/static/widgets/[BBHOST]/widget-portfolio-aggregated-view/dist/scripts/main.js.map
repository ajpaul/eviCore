{"version":3,"sources":[false,"false*","false**","webpack:///widget-portfolio-aggregated-view/./scripts/main.js","false***","false****","false*****","false******","false*******","webpack:///widget-portfolio-aggregated-view/./scripts/controllers.js","webpack:///widget-portfolio-aggregated-view/./scripts/bar-chart.js",null,"webpack:///widget-portfolio-aggregated-view/./scripts/treemap-chart.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_9__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_RESULT__","run","lpWidget","lpWealth","setConfig","portfolioEndPoint","getPreference","$inject","name","base","core","charts","wealth","deps","createModule","controller","directive","undefined","webpackPolyfill","deprecate","paths","children","views","type","AggregatedCtrl","aggregatedModel","lpCoreBus","renderComponent","data","ctrl","loading","current","set","view","subscribe","ptf","getData","then","parse","parser","d3","time","format","forEach","d","date","year","angular","ng","utils","property","amount","lpAggregatedBars","$window","lpCoreI18n","axesFactory","barsFactory","tooltipFactory","wealthUtils","link","scope","element","render","tooltip","offset","x","rangeBand","axes","bars","update","parent","width","height","$","find","html","averageYieldToMaturity","toFixed","datapoints","state","domain","map","y","max","resize","rangeBands","range","svg","attr","scale","ordinal","linear","select","append","node","xScale","yScale","parsers","formatters","compose","formatCurrency","ticks","tickPadding","onParentPanelToggle","on","debounce","$watch","restrict","priority","Number","MAX_VALUE","categoryClass","i","CATEGORIES_COUNT","convert","assetTypeName","zoneName","equitySectorName","size","percentage","text","lpAggregatedTreemap","treemapFactory","main","treemap","w","h","formatter","s","itemAttr","class","mouseover","show","mouseout","hide"],"mappings":"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","file":"scripts/main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"module-charts\", \"module-wealth\", \"d3\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-portfolio-aggregated-view\"] = factory(require(\"base\"), require(\"core\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse\n\t\troot[\"widget-portfolio-aggregated-view\"] = factory(root[\"base\"], root[\"core\"], root[\"module-charts\"], root[\"module-wealth\"], root[\"d3\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"module-charts\", \"module-wealth\", \"d3\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-portfolio-aggregated-view\"] = factory(require(\"base\"), require(\"core\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse\n\t\troot[\"widget-portfolio-aggregated-view\"] = factory(root[\"base\"], root[\"core\"], root[\"module-charts\"], root[\"module-wealth\"], root[\"d3\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    module.name = 'portfolio-aggregated-view';\n\n\t    var base = __webpack_require__(3);\n\t    var core = __webpack_require__(4);\n\t    var charts = __webpack_require__(5);\n\t    var wealth = __webpack_require__(6);\n\n\t    var deps = [\n\t    core.name,\n\t    charts.name,\n\t    wealth.name];\n\n\n\t    // @ngInject\n\t    function run(lpWidget, lpWealth) {\n\t        lpWealth.setConfig({\n\t            portfolioEndPoint: lpWidget.getPreference('dataSrc') });\n\n\t    }\n\n\t    module.exports = base.createModule(module.name, deps).\n\t    controller(__webpack_require__(7)).\n\t    directive(__webpack_require__(8)).\n\t    directive(__webpack_require__(10)).\n\t    run(run);\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    var views = [\n\t    { id: 'assetAllocations', name: 'Assets Allocation', type: 'treemap' },\n\t    { id: 'geographicalAllocations', name: 'Geographical Allocation', type: 'treemap' },\n\t    { id: 'combinedAllocations', name: 'Combined Assets and Geographical', type: 'treemap' },\n\t    { id: 'equitySectors', name: 'Equity Sectors', type: 'treemap' },\n\t    { id: 'bonds', name: 'Bonds Details', type: 'barchart' }];\n\n\n\t    // @ngInject\n\t    exports.AggregatedCtrl = function (aggregatedModel, lpCoreBus) {\n\t        var ctrl = this;\n\n\t        function renderComponent(data) {\n\t            ctrl.loading = false;\n\t            ctrl.views = views;\n\t            ctrl.current = views[0];\n\t            ctrl.data = data;\n\t        }\n\n\t        ctrl.set = function (view) {\n\t            ctrl.current = view;\n\t        };\n\n\t        lpCoreBus.subscribe('launchpad-retail.portfolioSelected', function (ptf) {\n\t            ctrl.loading = true;\n\t            aggregatedModel.getData(ptf.id).then(renderComponent);\n\t        });\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    var base = __webpack_require__(3);\n\t    var angular = base.ng;\n\t    var utils = base.utils;\n\t    var d3 = __webpack_require__(9);\n\n\t    function parse(data) {\n\t        var parser = d3.time.format('%Y').parse;\n\t        data.forEach(function (d) {\n\t            d.date = parser(d.year);\n\t        });\n\t        return data;\n\t    }\n\n\t    var date = utils.property('date');\n\t    var amount = utils.property('amount');\n\n\t    // @ngInject\n\t    exports.lpAggregatedBars = function ($window, lpCoreI18n, axesFactory, barsFactory, tooltipFactory, wealthUtils) {\n\t        function link(scope, element) {\n\t            var $ = element.html('<div class=\"ytm\"/>');\n\t            var x = d3.scale.ordinal();\n\t            var y = d3.scale.linear();\n\t            var svg = d3.select(element[0]).append('svg');\n\t            var state = {\n\t                node: svg,\n\t                xScale: x,\n\t                yScale: y,\n\t                parsers: {\n\t                    x: date,\n\t                    y: amount },\n\n\t                formatters: {\n\t                    x: d3.time.format('%Y'),\n\t                    tooltip: utils.compose(lpCoreI18n.formatCurrency, amount) },\n\n\t                data: [] };\n\n\t            var bars = barsFactory(state).attr('class', 'bars');\n\t            var axes = axesFactory(state).ticks({ y: 0 });\n\t            axes.x.tickPadding(-25);\n\t            var tooltip = tooltipFactory(state);\n\n\t            function render() {\n\t                tooltip.offset({ x: x.rangeBand() / 2 });\n\t                axes.render();\n\t                bars.render();\n\t            }\n\n\t            function update(data) {\n\t                var parent = element.parent().parent(),\n\t                width = parent.parent().width(),\n\t                height = parent.height();\n\t                if (width <= 0 || height <= 0) {\n\t                    return;\n\t                }\n\n\t                $.find('.ytm').html('<h2>' + data.averageYieldToMaturity.toFixed(2) + '%</h2>Avg. YTM');\n\t                data = parse(data.datapoints);\n\t                state.data = data;\n\t                x.domain(data.map(date));\n\t                y.domain([0, d3.max(data, amount)]);\n\n\t                render();\n\t            }\n\n\t            function resize() {\n\t                var parent = element.parent().parent(),\n\t                width = parent.parent().width(),\n\t                height = parent.height();\n\t                if (width <= 0 || height <= 0) {\n\t                    return;\n\t                }\n\n\t                width -= $.find('.ytm').width();\n\t                x.rangeBands([0, width], .1);\n\t                y.range([height, 0]);\n\t                svg.attr({ width: width, height: height });\n\t                axes.resize(width, height);\n\t                tooltip.resize(width, height);\n\t                render();\n\t            }\n\t            resize();\n\n\t            wealthUtils.onParentPanelToggle(element, function () {\n\t                resize();\n\t                update(scope.data);\n\t            });\n\t            angular.element($window).on('resize', utils.debounce(resize, 250));\n\t            scope.$watch('data', update);\n\t        }\n\n\t        return {\n\t            restrict: 'EA',\n\t            require: '?ngModel',\n\t            priority: Number.MAX_VALUE,\n\t            link: link,\n\t            scope: {\n\t                data: '=lpAggregatedBars' } };\n\n\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    var base = __webpack_require__(3);\n\t    var angular = base.ng;\n\t    var utils = base.utils;\n\t    var d3 = __webpack_require__(9);\n\n\t    var CATEGORIES_COUNT = 8;\n\n\t    function categoryClass(d, i) {\n\t        return 'cat-' + i % CATEGORIES_COUNT;\n\t    }\n\n\t    function convert(d) {\n\t        return {\n\t            name: d.assetTypeName && d.zoneName ?\n\t            d.assetTypeName + '<br/>' + d.zoneName :\n\t            d.assetTypeName || d.zoneName || d.equitySectorName,\n\t            size: d.percentage };\n\n\t    }\n\n\t    function parse(data) {\n\t        return { children: data.map(convert) };\n\t    }\n\n\t    function text(d) {\n\t        return d.name + '<br/>' + d.size + '%';\n\t    }\n\n\t    // @ngInject\n\t    exports.lpAggregatedTreemap = function ($window, tooltipFactory, treemapFactory, wealthUtils) {\n\t        function main(scope, element) {\n\t            var node = d3.select(element[0]);\n\n\t            var tooltip = tooltipFactory({\n\t                node: node,\n\t                formatters: {\n\t                    tooltip: text } });\n\n\n\n\t            var state = {\n\t                node: node,\n\t                parser: utils.property('size'),\n\t                formatter: utils.compose(function (s) {return '<span>' + s + '</span>';}, text) };\n\n\t            var treemap = treemapFactory(state).\n\t            attr('class', 'treemap').\n\t            itemAttr({ class: categoryClass }).\n\t            on({\n\t                mouseover: tooltip.show,\n\t                mouseout: tooltip.hide });\n\n\n\t            function render() {\n\t                treemap.render();\n\t            }\n\n\t            function resize() {\n\t                var parent = element.parent().parent(),\n\t                w = parent.parent().width(),\n\t                h = parent.height();\n\t                if (w <= 0 || h <= 0) {\n\t                    return;\n\t                }\n\t                treemap.resize(w, h);\n\t                render();\n\t            }\n\t            resize();\n\n\t            function update(data) {\n\t                state.data = parse(data);\n\t                treemap.render();\n\t                render();\n\t            }\n\n\t            wealthUtils.onParentPanelToggle(element, resize);\n\t            angular.element($window).on('resize', utils.debounce(resize, 250));\n\t            scope.$watch('data', update);\n\t        }\n\n\t        return {\n\t            restrict: 'EA',\n\t            require: '?ngModel',\n\t            priority: Number.MAX_VALUE,\n\t            link: main,\n\t            scope: {\n\t                data: '=lpAggregatedTreemap' } };\n\n\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// scripts/main.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap f482cae2d136fdc13fa3","define(function (require, exports, module) {\n    'use strict';\n\n    module.name = 'portfolio-aggregated-view';\n\n    var base = require('base');\n    var core = require('core');\n    var charts = require('module-charts');\n    var wealth = require('module-wealth');\n\n    var deps = [\n        core.name,\n        charts.name,\n        wealth.name\n    ];\n\n    // @ngInject\n    function run(lpWidget, lpWealth) {\n        lpWealth.setConfig({\n            portfolioEndPoint: lpWidget.getPreference('dataSrc')\n        });\n    }\n\n    module.exports = base.createModule(module.name, deps)\n        .controller(require('./controllers'))\n        .directive(require('./bar-chart'))\n        .directive(require('./treemap-chart'))\n        .run(run);\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/main.js\n// module id = 1\n// module chunks = 0","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 2\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"base\"\n// module id = 3\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"core\"\n// module id = 4\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"module-charts\"\n// module id = 5\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"module-wealth\"\n// module id = 6\n// module chunks = 0","define(function (require, exports, module) {\n    'use strict';\n\n    var views = [\n        {id: 'assetAllocations', name: 'Assets Allocation', type: 'treemap'},\n        {id: 'geographicalAllocations', name: 'Geographical Allocation', type: 'treemap'},\n        {id: 'combinedAllocations', name: 'Combined Assets and Geographical', type: 'treemap'},\n        {id: 'equitySectors', name: 'Equity Sectors', type: 'treemap'},\n        {id: 'bonds', name: 'Bonds Details', type: 'barchart'}\n    ];\n\n    // @ngInject\n    exports.AggregatedCtrl = function (aggregatedModel, lpCoreBus) {\n        var ctrl = this;\n\n        function renderComponent(data) {\n            ctrl.loading = false;\n            ctrl.views = views;\n            ctrl.current = views[0];\n            ctrl.data = data;\n        }\n\n        ctrl.set = function (view) {\n            ctrl.current = view;\n        };\n\n        lpCoreBus.subscribe('launchpad-retail.portfolioSelected', function (ptf) {\n            ctrl.loading = true;\n            aggregatedModel.getData(ptf.id).then(renderComponent);\n        });\n    };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/controllers.js\n// module id = 7\n// module chunks = 0","define(function (require, exports, module) {\n    'use strict';\n\n    var base = require('base');\n    var angular = base.ng;\n    var utils = base.utils;\n    var d3 = require('d3');\n\n    function parse(data) {\n        var parser = d3.time.format('%Y').parse;\n        data.forEach(function (d) {\n            d.date = parser(d.year);\n        });\n        return data;\n    }\n\n    var date = utils.property('date');\n    var amount = utils.property('amount');\n\n    // @ngInject\n    exports.lpAggregatedBars = function ($window, lpCoreI18n, axesFactory, barsFactory, tooltipFactory, wealthUtils) {\n        function link(scope, element) {\n            var $ = element.html('<div class=\"ytm\"/>');\n            var x = d3.scale.ordinal();\n            var y = d3.scale.linear();\n            var svg = d3.select(element[0]).append('svg');\n            var state = {\n                node: svg,\n                xScale: x,\n                yScale: y,\n                parsers: {\n                    x: date,\n                    y: amount\n                },\n                formatters: {\n                    x: d3.time.format('%Y'),\n                    tooltip: utils.compose(lpCoreI18n.formatCurrency, amount)\n                },\n                data: []\n            };\n            var bars = barsFactory(state).attr('class', 'bars');\n            var axes = axesFactory(state).ticks({y: 0});\n            axes.x.tickPadding(-25);\n            var tooltip = tooltipFactory(state);\n\n            function render() {\n                tooltip.offset({x: x.rangeBand() / 2});\n                axes.render();\n                bars.render();\n            }\n\n            function update(data) {\n                var parent = element.parent().parent(),\n                    width = parent.parent().width(),\n                    height = parent.height();\n                if (width <= 0 || height <= 0) {\n                    return;\n                }\n\n                $.find('.ytm').html('<h2>' + data.averageYieldToMaturity.toFixed(2) + '%</h2>Avg. YTM');\n                data = parse(data.datapoints);\n                state.data = data;\n                x.domain(data.map(date));\n                y.domain([0, d3.max(data, amount)]);\n\n                render();\n            }\n\n            function resize() {\n                var parent = element.parent().parent(),\n                    width = parent.parent().width(),\n                    height = parent.height();\n                if (width <= 0 || height <= 0) {\n                    return;\n                }\n\n                width -= $.find('.ytm').width();\n                x.rangeBands([0, width], .1);\n                y.range([height, 0]);\n                svg.attr({width: width, height: height});\n                axes.resize(width, height);\n                tooltip.resize(width, height);\n                render();\n            }\n            resize();\n\n            wealthUtils.onParentPanelToggle(element, function(){\n                resize();\n                update(scope.data);\n            });\n            angular.element($window).on('resize', utils.debounce(resize, 250));\n            scope.$watch('data', update);\n        }\n\n        return {\n            restrict: 'EA',\n            require: '?ngModel',\n            priority: Number.MAX_VALUE,\n            link: link,\n            scope: {\n                data: '=lpAggregatedBars'\n            }\n        };\n    };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/bar-chart.js\n// module id = 8\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 9\n// module chunks = 0","define(function (require, exports, module) {\n    'use strict';\n\n    var base = require('base');\n    var angular = base.ng;\n    var utils = base.utils;\n    var d3 = require('d3');\n\n    var CATEGORIES_COUNT = 8;\n\n    function categoryClass(d, i) {\n        return 'cat-' + i % CATEGORIES_COUNT;\n    }\n\n    function convert(d) {\n        return {\n            name: d.assetTypeName && d.zoneName\n                ? d.assetTypeName + '<br/>' + d.zoneName\n                : d.assetTypeName || d.zoneName || d.equitySectorName,\n            size: d.percentage\n        };\n    }\n\n    function parse(data) {\n        return {children: data.map(convert)};\n    }\n\n    function text(d) {\n        return d.name + '<br/>' + d.size + '%';\n    }\n\n    // @ngInject\n    exports.lpAggregatedTreemap = function ($window, tooltipFactory, treemapFactory, wealthUtils) {\n        function main(scope, element) {\n            var node = d3.select(element[0]);\n\n            var tooltip = tooltipFactory({\n                node: node,\n                formatters: {\n                    tooltip: text\n                }\n            });\n\n            var state = {\n                node: node,\n                parser: utils.property('size'),\n                formatter: utils.compose(function (s) { return '<span>' + s + '</span>'; }, text)\n            };\n            var treemap = treemapFactory(state)\n                .attr('class', 'treemap')\n                .itemAttr({class: categoryClass})\n                .on({\n                    mouseover: tooltip.show,\n                    mouseout: tooltip.hide\n                });\n\n            function render() {\n                treemap.render();\n            }\n\n            function resize() {\n                var parent = element.parent().parent(),\n                    w = parent.parent().width(),\n                    h = parent.height();\n                if (w <= 0 || h <= 0) {\n                    return;\n                }\n                treemap.resize(w, h);\n                render();\n            }\n            resize();\n\n            function update(data) {\n                state.data = parse(data);\n                treemap.render();\n                render();\n            }\n\n            wealthUtils.onParentPanelToggle(element, resize);\n            angular.element($window).on('resize', utils.debounce(resize, 250));\n            scope.$watch('data', update);\n        }\n\n        return {\n            restrict: 'EA',\n            require: '?ngModel',\n            priority: Number.MAX_VALUE,\n            link: main,\n            scope: {\n                data: '=lpAggregatedTreemap'\n            }\n        };\n    };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/treemap-chart.js\n// module id = 10\n// module chunks = 0"],"sourceRoot":""}