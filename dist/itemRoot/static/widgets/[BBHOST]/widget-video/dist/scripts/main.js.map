{"version":3,"sources":["webpack:///widget-video/webpack/universalModuleDefinition","webpack:///widget-video/scripts/main.js","webpack:///widget-video/webpack/bootstrap ab66fedfc31f5ec07772","webpack:///widget-video/./scripts/main.js","webpack:///widget-video/(webpack)/buildin/module.js","webpack:///widget-video/external \"base\"","webpack:///widget-video/external \"core\"","webpack:///widget-video/external \"ui\"","webpack:///widget-video/./scripts/constants.js","webpack:///widget-video/./scripts/controllers.js","webpack:///widget-video/./scripts/config.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_RESULT__","name","base","core","ui","deps","createModule","constant","controller","config","undefined","webpackPolyfill","deprecate","paths","children","lpEnabledVideoUrls","youtube","vimeo","MainCtrl","$scope","lpWidget","lpCoreBus","lpCoreError","lpUIResponsive","widget","error","bus","responsive","enabledVideoUrls","init","$inject","prototype","render","showError","updateUrl","updateHeight","$$phase","$digest","bind","addEventListener","enable","body","rule","any","el","parentNode","elementController","viewController","nodeName","subscribe","model","panelName","throwException","throwExceptionAsync","height","parseInt","getPreference","width","ratio","isNaN","Math","round","getWidth","source","videoSrc","videoId","url","utils","$sceDelegateProvider","urls","values","map","value","concat","resourceUrlWhitelist"],"mappings":"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","file":"scripts/main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"ui\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"ui\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-video\"] = factory(require(\"base\"), require(\"core\"), require(\"ui\"));\n\telse\n\t\troot[\"widget-video\"] = factory(root[\"base\"], root[\"core\"], root[\"ui\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"ui\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"ui\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-video\"] = factory(require(\"base\"), require(\"core\"), require(\"ui\"));\n\telse\n\t\troot[\"widget-video\"] = factory(root[\"base\"], root[\"core\"], root[\"ui\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {/**\n\t *  ----------------------------------------------------------------\n\t *  Copyright Â© Backbase B.V.\n\t *  ----------------------------------------------------------------\n\t *  Filename : main.js\n\t *  Description: ${widget.description}\n\t *  ----------------------------------------------------------------\n\t */\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function(require, exports, module){\n\n\t    'use strict';\n\n\t    module.name = 'widget-video';\n\n\t    var base = __webpack_require__(2);\n\t    var core = __webpack_require__(3);\n\t    var ui = __webpack_require__(4);\n\n\t    var deps = [\n\t        core.name,\n\t        ui.name\n\t    ];\n\n\t    module.exports = base.createModule(module.name, deps)\n\t        .constant(__webpack_require__(5))\n\t        .controller(__webpack_require__(6))\n\t        .config(__webpack_require__(7));\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)(module)))\n\n/***/ },\n/* 1 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_RESULT__ = function(require, exports, module) {\n\t    'use strict';\n\n\t    exports.lpEnabledVideoUrls = {\n\t        'youtube': 'http://www.youtube.com/embed/',\n\t        'vimeo': 'http://player.vimeo.com/video/'\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/**\n\t * Controllers\n\t * @module controllers\n\t */\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\n\t    'use strict';\n\n\t    /**\n\t     * Main controller\n\t     * @ngInject\n\t     * @constructor\n\t     */\n\t    function MainCtrl($scope, lpWidget, lpCoreBus, lpCoreError, lpUIResponsive, lpEnabledVideoUrls) {\n\t        this.$scope = $scope;\n\t        this.widget = lpWidget;\n\t        this.error = lpCoreError;\n\t        this.bus = lpCoreBus;\n\t        this.responsive = lpUIResponsive;\n\t        this.enabledVideoUrls = lpEnabledVideoUrls;\n\n\t        this.init();\n\t    }\n\t    MainCtrl.$inject = [\"$scope\", \"lpWidget\", \"lpCoreBus\", \"lpCoreError\", \"lpUIResponsive\", \"lpEnabledVideoUrls\"];\n\n\t    /**\n\t     * Configure Responsive and start rendering\n\t     */\n\t    MainCtrl.prototype.init = function () {\n\t        var render = function () {\n\t            this.showError = false;\n\n\t            this.updateUrl();\n\t            this.updateHeight();\n\n\t            if (!this.$scope.$$phase) {\n\t                this.$scope.$digest();\n\t            }\n\t        }.bind(this);\n\n\t        this.widget.addEventListener('preferencesSaved', render);\n\t        this.responsive\n\t            .enable(this.widget.body)\n\t            .rule({\n\t                any: render\n\t            });\n\n\t        // test if widget is inside panel, LPMAINT-148\n\t        var el = this.widget.body.parentNode;\n\t        while (el) {\n\t            var elementController = el.viewController;\n\t            if (elementController && elementController.nodeName === 'PanelContainer' && elementController.parentNode) {\n\t                this.bus.subscribe(elementController.parentNode.model.name + '-DeckPanelLoaded', function (panelName) {\n\t                    if (this.model.name === panelName) {\n\t                        render();\n\t                    }\n\t                }.bind(elementController));\n\t            }\n\n\t            el = el.parentNode;\n\t        }\n\n\t        render();\n\t    };\n\n\t    MainCtrl.prototype.throwException = function (error) {\n\t        this.showError = error;\n\t        this.error.throwExceptionAsync(error);\n\t    };\n\n\t    /**\n\t     * Update iFrame height to provide responsiveness\n\t     */\n\t    MainCtrl.prototype.updateHeight = function () {\n\t        var height = parseInt(this.widget.getPreference('height'), 10),\n\t            width = parseInt(this.widget.getPreference('width'), 10),\n\t            ratio = height / width;\n\n\t        if (!height || !width || isNaN(ratio)) {\n\t            this.throwException('Height or Width is zero, undefined on NaN!');\n\t        }\n\n\t        this.height = Math.round(this.widget.getWidth() * ratio);\n\t    };\n\n\t    /**\n\t     * Get iFrame URL\n\t     * @returns {string}\n\t     */\n\t    MainCtrl.prototype.updateUrl = function () {\n\t        var source = this.widget.getPreference('source'),\n\t            videoSrc = this.enabledVideoUrls[source],\n\t            videoId = this.widget.getPreference('videoId');\n\n\t        if (!videoId) {\n\t            this.throwException('videoId is undefined!');\n\t        } else if (!videoSrc) {\n\t            this.throwException('Source is undefined or doesn\\'t have a handler!');\n\t        }\n\n\t        return this.url = videoSrc + videoId;\n\t    };\n\n\t    /**\n\t     * Export Controllers\n\t     */\n\t    exports.MainCtrl = MainCtrl;\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/**\n\t *  ----------------------------------------------------------------\n\t *  Copyright Â© Backbase B.V.\n\t *  ----------------------------------------------------------------\n\t *  Filename : main.js\n\t *  Description: ${widget.description}\n\t *  ----------------------------------------------------------------\n\t */\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function(require, exports, module){\n\n\t    var utils = __webpack_require__(2).utils;\n\t    var enabledVideoUrls = __webpack_require__(5).lpEnabledVideoUrls;\n\n\t    /**\n\t     * [config description]\n\t     * @param $sceDelegateProvider\n\t     * @returns {*}\n\t     */\n\t     // @ngInject\n\t    module.exports = function config($sceDelegateProvider) {\n\t        var urls = utils(enabledVideoUrls)\n\t            .values()\n\t            .map(function(url){\n\t                return url + '**';\n\t            })\n\t            .value()\n\t            .concat('self');\n\n\t        $sceDelegateProvider.resourceUrlWhitelist(urls);\n\t    };\n\t    module.exports.$inject = [\"$sceDelegateProvider\"];\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** scripts/main.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap ab66fedfc31f5ec07772\n **/","/**\n *  ----------------------------------------------------------------\n *  Copyright Â© Backbase B.V.\n *  ----------------------------------------------------------------\n *  Filename : main.js\n *  Description: ${widget.description}\n *  ----------------------------------------------------------------\n */\ndefine(function(require, exports, module){\n\n    'use strict';\n\n    module.name = 'widget-video';\n\n    var base = require('base');\n    var core = require('core');\n    var ui = require('ui');\n\n    var deps = [\n        core.name,\n        ui.name\n    ];\n\n    module.exports = base.createModule(module.name, deps)\n        .constant(require('./constants'))\n        .controller(require('./controllers'))\n        .config(require('./config'));\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./scripts/main.js\n ** module id = 0\n ** module chunks = 0\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"base\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"core\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ui\"\n ** module id = 4\n ** module chunks = 0\n **/","define(function(require, exports, module) {\n    'use strict';\n\n    exports.lpEnabledVideoUrls = {\n        'youtube': 'http://www.youtube.com/embed/',\n        'vimeo': 'http://player.vimeo.com/video/'\n    };\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./scripts/constants.js\n ** module id = 5\n ** module chunks = 0\n **/","/**\n * Controllers\n * @module controllers\n */\ndefine(function (require, exports) {\n\n    'use strict';\n\n    /**\n     * Main controller\n     * @ngInject\n     * @constructor\n     */\n    function MainCtrl($scope, lpWidget, lpCoreBus, lpCoreError, lpUIResponsive, lpEnabledVideoUrls) {\n        this.$scope = $scope;\n        this.widget = lpWidget;\n        this.error = lpCoreError;\n        this.bus = lpCoreBus;\n        this.responsive = lpUIResponsive;\n        this.enabledVideoUrls = lpEnabledVideoUrls;\n\n        this.init();\n    }\n\n    /**\n     * Configure Responsive and start rendering\n     */\n    MainCtrl.prototype.init = function () {\n        var render = function () {\n            this.showError = false;\n\n            this.updateUrl();\n            this.updateHeight();\n\n            if (!this.$scope.$$phase) {\n                this.$scope.$digest();\n            }\n        }.bind(this);\n\n        this.widget.addEventListener('preferencesSaved', render);\n        this.responsive\n            .enable(this.widget.body)\n            .rule({\n                any: render\n            });\n\n        // test if widget is inside panel, LPMAINT-148\n        var el = this.widget.body.parentNode;\n        while (el) {\n            var elementController = el.viewController;\n            if (elementController && elementController.nodeName === 'PanelContainer' && elementController.parentNode) {\n                this.bus.subscribe(elementController.parentNode.model.name + '-DeckPanelLoaded', function (panelName) {\n                    if (this.model.name === panelName) {\n                        render();\n                    }\n                }.bind(elementController));\n            }\n\n            el = el.parentNode;\n        }\n\n        render();\n    };\n\n    MainCtrl.prototype.throwException = function (error) {\n        this.showError = error;\n        this.error.throwExceptionAsync(error);\n    };\n\n    /**\n     * Update iFrame height to provide responsiveness\n     */\n    MainCtrl.prototype.updateHeight = function () {\n        var height = parseInt(this.widget.getPreference('height'), 10),\n            width = parseInt(this.widget.getPreference('width'), 10),\n            ratio = height / width;\n\n        if (!height || !width || isNaN(ratio)) {\n            this.throwException('Height or Width is zero, undefined on NaN!');\n        }\n\n        this.height = Math.round(this.widget.getWidth() * ratio);\n    };\n\n    /**\n     * Get iFrame URL\n     * @returns {string}\n     */\n    MainCtrl.prototype.updateUrl = function () {\n        var source = this.widget.getPreference('source'),\n            videoSrc = this.enabledVideoUrls[source],\n            videoId = this.widget.getPreference('videoId');\n\n        if (!videoId) {\n            this.throwException('videoId is undefined!');\n        } else if (!videoSrc) {\n            this.throwException('Source is undefined or doesn\\'t have a handler!');\n        }\n\n        return this.url = videoSrc + videoId;\n    };\n\n    /**\n     * Export Controllers\n     */\n    exports.MainCtrl = MainCtrl;\n});\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./scripts/controllers.js\n ** module id = 6\n ** module chunks = 0\n **/","/**\n *  ----------------------------------------------------------------\n *  Copyright Â© Backbase B.V.\n *  ----------------------------------------------------------------\n *  Filename : main.js\n *  Description: ${widget.description}\n *  ----------------------------------------------------------------\n */\ndefine(function(require, exports, module){\n\n    var utils = require('base').utils;\n    var enabledVideoUrls = require('./constants').lpEnabledVideoUrls;\n\n    /**\n     * [config description]\n     * @param $sceDelegateProvider\n     * @returns {*}\n     */\n     // @ngInject\n    module.exports = function config($sceDelegateProvider) {\n        var urls = utils(enabledVideoUrls)\n            .values()\n            .map(function(url){\n                return url + '**';\n            })\n            .value()\n            .concat('self');\n\n        $sceDelegateProvider.resourceUrlWhitelist(urls);\n    };\n});\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./scripts/config.js\n ** module id = 7\n ** module chunks = 0\n **/"],"sourceRoot":""}