/* widget-portfolio-assets@v2.4.0 build with â™¥ by bb-lp-cli@v1.9.12 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("base"),require("core"),require("module-charts"),require("module-wealth"),require("d3")):"function"==typeof define&&define.amd?define(["base","core","module-charts","module-wealth","d3"],t):"object"==typeof exports?exports["widget-portfolio-assets"]=t(require("base"),require("core"),require("module-charts"),require("module-wealth"),require("d3")):e["widget-portfolio-assets"]=t(e.base,e.core,e["module-charts"],e["module-wealth"],e.d3)}(this,function(e,t,r,n,o){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="/_karma_webpack_//",t(0)}([function(e,exports,t){e.exports=t(1)},function(e,exports,t){var r;(function(e){"use strict";r=function(require,exports,e){function r(e,t){t.setConfig({portfolioEndPoint:e.getPreference("dataSrc")})}r.$inject=["lpWidget","lpWealth"],e.name="widget-portfolio-assets";var n=t(3),o=t(4),i=t(5),a=t(6),s=[i.name,a.name,o.name];e.exports=n.createModule(e.name,s).controller(t(7)).directive(t(8)).run(r)}.call(exports,t,exports,e),!(void 0!==r&&(e.exports=r))}).call(exports,t(2)(e))},function(e,exports){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(t,exports){t.exports=e},function(e,exports){e.exports=t},function(e,exports){e.exports=r},function(e,exports){e.exports=n},function(e,exports,t){var r;r=function(require,exports,e){"use strict";var t=[{key:"equities",value:"Equities"},{key:"other",value:"Other Investments"},{key:"bonds",value:"Bonds"},{key:"cash",value:"Cash"}];exports.MainCtrl=function(e,r){function n(e){o.loading=!1,o.data=e}var o=this;o.config={types:t},r.subscribe("launchpad-retail.portfolioSelected",function(t){o.loading=!0,e.getData(t.id).then(n)})},exports.MainCtrl.$inject=["assetModel","lpCoreBus"]}.call(exports,t,exports,e),!(void 0!==r&&(e.exports=r))},function(e,exports,t){var r;r=function(require,exports,e){"use strict";var r=t(9),n=t(3).ng,o=t(10),i=r.time.format.multi([["%b %Y",function(e){return 0===e.getMonth()}],["%b",function(e){return 1===e.getDate()}],["",function(){return!0}]]),a={top:0,bottom:15};exports.lpWealthAssets=function(e,t,s,c,l,u){function d(d,m){function v(){d.range&&b.domain(d.range),M.render(),C.render(),S.render()}function h(){var e=m.innerWidth(),t=m.innerHeight()-a.top-a.bottom;0>=e||0>=t||(y.width(e),b.range([0,e]),g.range([0,t]),q.attr({width:e,height:t+a.top+a.bottom}),M.resize(e,t),S.resize(e,t),v())}function x(){var e=d.data;if(e){var n=r.max(e,t.flow(p,r.values,r.sum));g.domain([0,n]),C.set(e),t.flow(t.last,f,W)(e),v()}}var b=r.time.scale(),g=r.scale.linear(),y=s.ticks(),w=function(){var e=r.bisector(function(e,t){return e.date-t}).left;return function(t){return t=r.time.month(t),d.data[e(d.data,t)]}}(),k=m.find("svg")[0],q=r.select(k),A={node:q,xScale:b,yScale:g,parsers:{x:f,y:p},formatters:{x:i}},M=l(A).ticks({x:y,y:0});M.x.tickPadding(3);var j=Object.create(A);j.node=k;var S=o(j),C=u(A).itemAttr({"class":function(e,t){return"asset-"+t}});q.on("click",function(){var e=b.invert(r.mouse(this)[0]);e.getDate()>15&&e.setMonth(e.getMonth()+1,1),c.publish("portfolio-itemSelected",w(e).date)});var W=t.compose(S.set,w),$=t.compose(v,function(e){d.range=e});h(),n.element(e).on("resize",t.debounce(h,250)),c.subscribe("portfolio-rangeSelected",$),c.subscribe("portfolio-rangeSelected-live",$),c.subscribe("portfolio-itemSelected",W),d.$watch("data",x)}var f=t.property("date"),p=t.property("assetAllocation");return{restrict:"EA",require:"?ngModel",priority:Number.MAX_VALUE,link:d,template:"<svg/>",scope:{config:"=lpWealthAssets",data:"=ngModel"}}},exports.lpWealthAssets.$inject=["$window","utils","lpChartUtils","lpCoreBus","axesFactory","stackFactory"]}.call(exports,t,exports,e),!(void 0!==r&&(e.exports=r))},function(e,exports){e.exports=o},function(e,exports,t){var r;r=function(require,exports,e){"use strict";var r=t(9),n=t(3).ng,o=80;e.exports=function(e){function t(e,t){return'<tr><td><label class="legend asset-'+t+'">'+e.value+"%</label></td></tr>"}function i(e){return r.entries(e.assetAllocation).map(t).join("")}function a(e,t){l=e,u.height(t)}function s(){if(c){var t=e.xScale(e.parsers.x(c)),r=0>t?0:o/2>t?t:t>l?o:t>l-o/2?t+o-l:o/2;d.css("left",r+"px"),u.css("left",t-r+"px")}}var c,l,u=n.element('<div class="details"><div class="line"/><table/></div>').width(o),d=u.find(".line");return u.insertAfter(e.node),{set:function(e){c=e,u.find("table").html(i(c)),s()},resize:a,render:s}},e.exports.$inject=["state"]}.call(exports,t,exports,e),!(void 0!==r&&(e.exports=r))}])});
//# sourceMappingURL=main.js.map