{"version":3,"sources":[false,"false*","false**","webpack:///widget-portfolio-minimap/./scripts/main.js","false***","false****",null,"false*****","false******","webpack:///widget-portfolio-minimap/./scripts/controllers.js","webpack:///widget-portfolio-minimap/./scripts/directives.js","false*******"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_9__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_RESULT__","run","lpWidget","lpWealth","setConfig","portfolioEndPoint","getPreference","$inject","name","base","ui","charts","wealth","deps","createModule","controller","directive","undefined","webpackPolyfill","deprecate","paths","children","YEAR","SPANS","value","FREQS","monthly","yearly","MainCtrl","ptfModel","lpCoreBus","updateSpans","data","frame","config","frequency","dl","length","date","ctrl","spans","filter","d","renderComponent","loading","timespan","getConfig","freqs","setFreq","publish","setSpan","subscribe","ptf","getData","then","getTimespan","date2","span","date1","Date","indexOf","setMonth","getMonth","parseInt","setFullYear","getFullYear","d3","angular","ng","AXIS_FORMAT","time","format","multi","getDate","X_LABELS_DY","lpWealthMinimap","$window","utils","wealthUtils","areaFactory","axesFactory","brushFactory","main","scope","element","getZoomFn","eventName","bus","brush","range","hasEnoughData","updateRange","domain","x","render","zoom","state","extent","y","area","axes","resize","width","innerWidth","height","innerHeight","svg","attr","el","find","select","scale","linear","node","xScale","yScale","parsers","formatters","ticks","tickPadding","on","sticky","onParentPanelToggle","$watch","t","$on","debounce","property","datapoint","totalPortfolioValue","restrict","priority","Number","MAX_VALUE","link","template","onRender"],"mappings":"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","file":"scripts/main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"ui\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"ui\", \"module-charts\", \"module-wealth\", \"d3\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-portfolio-minimap\"] = factory(require(\"base\"), require(\"ui\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse\n\t\troot[\"widget-portfolio-minimap\"] = factory(root[\"base\"], root[\"ui\"], root[\"module-charts\"], root[\"module-wealth\"], root[\"d3\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"ui\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"ui\", \"module-charts\", \"module-wealth\", \"d3\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-portfolio-minimap\"] = factory(require(\"base\"), require(\"ui\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse\n\t\troot[\"widget-portfolio-minimap\"] = factory(root[\"base\"], root[\"ui\"], root[\"module-charts\"], root[\"module-wealth\"], root[\"d3\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    module.name = 'widget-portfolio-minimap';\n\n\t    var base = __webpack_require__(3);\n\t    var ui = __webpack_require__(4);\n\t    var charts = __webpack_require__(5);\n\t    var wealth = __webpack_require__(6);\n\n\t    var deps = [\n\t    ui.name,\n\t    charts.name,\n\t    wealth.name];\n\n\n\t    // @ngInject\n\t    function run(lpWidget, lpWealth) {\n\t        lpWealth.setConfig({\n\t            portfolioEndPoint: lpWidget.getPreference('dataSrc') });\n\n\t    }\n\n\t    module.exports = base.createModule(module.name, deps).\n\t    controller(__webpack_require__(7)).\n\t    directive(__webpack_require__(8)).\n\t    run(run);\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    var YEAR = 365.2425 * 864e5; // average year in the Gregorian calendar\n\t    var SPANS = [\n\t    { name: '10 years', value: 10 * YEAR },\n\t    { name: '5 years', value: 5 * YEAR },\n\t    { name: '3 years', value: 3 * YEAR },\n\t    { name: '1 year', value: YEAR },\n\t    { name: '9 months', value: YEAR * .75 },\n\t    { name: '6 months', value: YEAR / 2 },\n\t    { name: '3 months', value: YEAR / 4 },\n\t    { name: '1 month', value: YEAR / 12 }];\n\n\t    var FREQS = {\n\t        'monthly': 'Monthly',\n\t        'yearly': 'Yearly' };\n\n\n\t    /*----------------------------------------------------------------*/\n\t    /* Main Controller\n\t                                                                         /*----------------------------------------------------------------*/\n\n\t    // @ngInject\n\t    exports.MainCtrl = function (ptfModel, lpCoreBus, lpWealth) {\n\t        var ctrl = this;\n\n\t        var config = ctrl.config = {\n\t            timespan: lpWealth.getConfig('timespan'),\n\t            frequency: lpWealth.getConfig('frequency') };\n\n\n\t        function updateSpans(data) {\n\t            var frame = data[config.frequency],\n\t            dl = frame[frame.length - 1].date - frame[0].date;\n\n\t            ctrl.spans = SPANS.filter(function (d) {\n\t                return d.value < dl;\n\t            });\n\n\t            return data;\n\t        }\n\n\t        function renderComponent(data) {\n\t            ctrl.loading = false;\n\t            ctrl.data = data;\n\t        }\n\n\t        ctrl.freqs = FREQS;\n\t        ctrl.spans = SPANS;\n\n\t        ctrl.setFreq = function (id) {\n\t            config.frequency = id;\n\t            lpCoreBus.publish('portfolio-frequency', id);\n\t        };\n\n\t        ctrl.setSpan = function (id) {\n\t            config.timespan = id;\n\t        };\n\n\t        lpCoreBus.subscribe('launchpad-retail.portfolioSelected', function (ptf) {\n\t            ctrl.loading = true;\n\t            ptfModel.getData(ptf.id).\n\t            then(updateSpans).\n\t            then(renderComponent);\n\t        });\n\t    };\n\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\t    var d3 = __webpack_require__(9);\n\t    var angular = __webpack_require__(3).ng;\n\n\t    var AXIS_FORMAT = d3.time.format.multi([\n\t    ['%Y', function (d) {return d.getMonth() === 0;}],\n\t    ['%b', function (d) {return d.getDate() === 1;}],\n\t    ['', function () {return true;}]]);\n\n\t    var X_LABELS_DY = -20;\n\n\t    function getTimespan(date2, span) {\n\t        var date1 = new Date(date2);\n\t        if (span.indexOf('year') === -1) {\n\t            date1.setMonth(date2.getMonth() - parseInt(span, 10));\n\t        } else {\n\t            date1.setFullYear(date2.getFullYear() - parseInt(span, 10));\n\t        }\n\t        return [date1, date2];\n\t    }\n\n\t    // @ngInject\n\t    exports.lpWealthMinimap = function ($window, utils, wealthUtils, lpCoreBus, areaFactory, axesFactory, brushFactory) {\n\t        var bus = lpCoreBus;\n\t        var date = utils.property('date');\n\t        var value = function value(d) {\n\t            return d.datapoint.totalPortfolioValue;\n\t        };\n\n\t        function main(scope, element) {\n\t            var config = scope.config;\n\t            var el = element.find('svg')[0];\n\t            var svg = d3.select(el);\n\t            var x = d3.time.scale();\n\t            var y = d3.scale.linear();\n\t            var zoom;\n\n\t            var state = {\n\t                node: svg,\n\t                xScale: x,\n\t                yScale: y,\n\t                parsers: {\n\t                    x: date,\n\t                    y: value },\n\n\t                formatters: {\n\t                    x: AXIS_FORMAT } };\n\n\n\n\t            var area = areaFactory(state).attr('class', 'area');\n\t            var axes = axesFactory(state).ticks({ y: 0 });\n\t            axes.x.tickPadding(X_LABELS_DY);\n\n\t            var brush = brushFactory(state);\n\n\t            function getZoomFn(eventName) {\n\t                return function () {\n\t                    bus.publish(eventName, brush.range());\n\t                };\n\t            }\n\n\t            function hasEnoughData(data, frequency) {\n\t                if (!data || !data[frequency] || data[frequency].length < 2) {\n\t                    return false;\n\t                }\n\t                return true;\n\t            }\n\n\t            function updateRange(range, span) {\n\t                if (!hasEnoughData(scope.data, config.frequency)) {\n\t                    return;\n\t                }\n\t                var timespan = getTimespan(range[1], span),\n\t                domain = x.domain();\n\n\t                if (timespan[0] < domain[0]) {\n\t                    timespan[0] = domain[0];\n\t                }\n\n\t                brush.\n\t                range(timespan).\n\t                render();\n\t                zoom();\n\t            }\n\n\t            function render() {\n\t                var data = scope.data;\n\t                if (!hasEnoughData(data, config.frequency)) {\n\t                    return;\n\t                }\n\t                data = data[config.frequency];\n\t                state.data = data;\n\n\t                x.domain(d3.extent(data, date));\n\t                y.domain(d3.extent(data, value));\n\n\t                area.render();\n\t                axes.render();\n\t                updateRange(x.domain(), config.timespan);\n\t            }\n\n\t            function resize() {\n\t                var width = element.innerWidth(),\n\t                height = element.innerHeight();\n\t                if (width <= 0 || height <= 0) {\n\t                    return;\n\t                }\n\t                x.range([0, width]);\n\t                y.range([height, 0]);\n\t                svg.attr({ width: width, height: height });\n\t                area.resize(width, height);\n\t                axes.resize(width, height);\n\t                brush.resize(width, height);\n\t                render();\n\t            }\n\n\t            zoom = getZoomFn('portfolio-rangeSelected');\n\t            brush.on('brush', getZoomFn('portfolio-rangeSelected-live')).\n\t            on('brushend', zoom);\n\n\n\t            resize();\n\t            wealthUtils.sticky(element, 50);\n\t            wealthUtils.onParentPanelToggle(element, resize);\n\n\t            scope.$watch('data', render);\n\t            scope.$watch('config.timespan', function (t) {\n\t                updateRange(brush.range(), t);\n\t            });\n\t            scope.$watch('config.frequency', resize);\n\n\t            scope.$on('$destroy', function () {\n\t            });\n\n\t            angular.element($window).on('resize', utils.debounce(resize, 250));\n\t        }\n\n\t        return {\n\t            restrict: 'EA',\n\t            require: '?ngModel',\n\t            priority: Number.MAX_VALUE,\n\t            link: main,\n\t            template: '<svg/>',\n\t            scope: {\n\t                data: '=ngModel',\n\t                config: '=lpWealthMinimap',\n\t                onRender: '&onRender' } };\n\n\n\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// scripts/main.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap e1d393727365a6e4cb12","define(function (require, exports, module) {\n    'use strict';\n\n    module.name = 'widget-portfolio-minimap';\n\n    var base = require('base');\n    var ui = require('ui');\n    var charts = require('module-charts');\n    var wealth = require('module-wealth');\n\n    var deps = [\n        ui.name,\n        charts.name,\n        wealth.name\n    ];\n\n    // @ngInject\n    function run(lpWidget, lpWealth) {\n        lpWealth.setConfig({\n            portfolioEndPoint: lpWidget.getPreference('dataSrc')\n        });\n    }\n\n    module.exports = base.createModule(module.name, deps)\n        .controller(require('./controllers'))\n        .directive(require('./directives'))\n        .run(run);\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/main.js\n// module id = 1\n// module chunks = 0","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 2\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"base\"\n// module id = 3\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ui\"\n// module id = 4\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"module-charts\"\n// module id = 5\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"module-wealth\"\n// module id = 6\n// module chunks = 0","define(function (require, exports, module) {\n    'use strict';\n\n    var YEAR = 365.2425 * 864e5; // average year in the Gregorian calendar\n    var SPANS = [\n        {name: '10 years', value: 10 * YEAR},\n        {name: '5 years', value: 5 * YEAR},\n        {name: '3 years', value: 3 * YEAR},\n        {name: '1 year', value: YEAR},\n        {name: '9 months', value: YEAR * .75},\n        {name: '6 months', value: YEAR / 2},\n        {name: '3 months', value: YEAR / 4},\n        {name: '1 month', value: YEAR / 12}\n    ];\n    var FREQS = {\n        'monthly': 'Monthly',\n        'yearly': 'Yearly'\n    };\n\n    /*----------------------------------------------------------------*/\n    /* Main Controller\n    /*----------------------------------------------------------------*/\n\n    // @ngInject\n    exports.MainCtrl = function(ptfModel, lpCoreBus, lpWealth) {\n        var ctrl = this;\n\n        var config = ctrl.config = {\n            timespan: lpWealth.getConfig('timespan'),\n            frequency: lpWealth.getConfig('frequency')\n        };\n\n        function updateSpans(data) {\n            var frame = data[config.frequency],\n                dl = frame[frame.length - 1].date - frame[0].date;\n\n            ctrl.spans = SPANS.filter(function (d) {\n                return d.value < dl;\n            });\n\n            return data;\n        }\n\n        function renderComponent(data) {\n            ctrl.loading = false;\n            ctrl.data = data;\n        }\n\n        ctrl.freqs = FREQS;\n        ctrl.spans = SPANS;\n\n        ctrl.setFreq = function (id) {\n            config.frequency = id;\n            lpCoreBus.publish('portfolio-frequency', id);\n        };\n\n        ctrl.setSpan = function (id) {\n            config.timespan = id;\n        };\n\n        lpCoreBus.subscribe('launchpad-retail.portfolioSelected', function (ptf) {\n            ctrl.loading = true;\n            ptfModel.getData(ptf.id)\n                .then(updateSpans)\n                .then(renderComponent);\n        });\n    };\n\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/controllers.js\n// module id = 7\n// module chunks = 0","define(function (require, exports, module){\n\t'use strict';\n\tvar d3 = require('d3');\n    var angular = require('base').ng;\n\n\tvar AXIS_FORMAT = d3.time.format.multi([\n\t\t['%Y', function(d) { return d.getMonth() === 0; }],\n\t\t['%b', function(d) { return d.getDate() === 1; }],\n\t\t['', function() { return true; }]\n\t]);\n    var X_LABELS_DY = -20;\n\n    function getTimespan(date2, span) {\n        var date1 = new Date(date2);\n        if (span.indexOf('year') === -1) {\n            date1.setMonth(date2.getMonth() - parseInt(span, 10));\n        } else {\n            date1.setFullYear(date2.getFullYear() - parseInt(span, 10));\n        }\n        return [date1, date2];\n    }\n\n\t// @ngInject\n\texports.lpWealthMinimap = function ($window, utils, wealthUtils, lpCoreBus, areaFactory, axesFactory, brushFactory) {\n        var bus = lpCoreBus;\n        var date = utils.property('date');\n        var value = function (d) {\n            return d.datapoint.totalPortfolioValue;\n        };\n\n        function main(scope, element) {\n            var config = scope.config;\n            var el = element.find('svg')[0];\n            var svg = d3.select(el);\n            var x = d3.time.scale();\n            var y = d3.scale.linear();\n            var zoom;\n\n            var state = {\n                node: svg,\n                xScale: x,\n                yScale: y,\n                parsers: {\n                    x: date,\n                    y: value\n                },\n                formatters: {\n                    x: AXIS_FORMAT\n                }\n            };\n\n            var area = areaFactory(state).attr('class', 'area');\n            var axes = axesFactory(state).ticks({y: 0});\n            axes.x.tickPadding(X_LABELS_DY);\n\n            var brush = brushFactory(state);\n\n            function getZoomFn(eventName) {\n                return function () {\n                    bus.publish(eventName, brush.range());\n                };\n            }\n\n            function hasEnoughData(data, frequency) {\n                if (!data || !data[frequency] || data[frequency].length < 2) {\n                    return false;\n                }\n                return true;\n            }\n\n            function updateRange(range, span) {\n                if (!hasEnoughData(scope.data, config.frequency)) {\n                    return;\n                }\n                var timespan = getTimespan(range[1], span),\n                    domain = x.domain();\n\n                if (timespan[0] < domain[0]) {\n                    timespan[0] = domain[0];\n                }\n\n                brush\n                    .range(timespan)\n                    .render();\n                zoom();\n            }\n\n            function render() {\n                var data = scope.data;\n                if (!hasEnoughData(data, config.frequency)) {\n                    return;\n                }\n                data = data[config.frequency];\n                state.data = data;\n\n                x.domain(d3.extent(data, date));\n                y.domain(d3.extent(data, value));\n\n                area.render();\n                axes.render();\n                updateRange(x.domain(), config.timespan);\n            }\n\n            function resize() {\n                var width = element.innerWidth(),\n                    height = element.innerHeight();\n                if (width <= 0 || height <= 0) {\n                    return;\n                }\n                x.range([0, width]);\n                y.range([height, 0]);\n                svg.attr({width: width, height: height});\n                area.resize(width, height);\n                axes.resize(width, height);\n                brush.resize(width, height);\n                render();\n            }\n\n            zoom = getZoomFn('portfolio-rangeSelected');\n            brush.on('brush', getZoomFn('portfolio-rangeSelected-live'))\n                .on('brushend', zoom);\n\n\n            resize();\n            wealthUtils.sticky(element, 50);\n            wealthUtils.onParentPanelToggle(element, resize);\n\n            scope.$watch('data', render);\n            scope.$watch('config.timespan', function (t) {\n                updateRange(brush.range(), t);\n            });\n            scope.$watch('config.frequency', resize);\n\n            scope.$on('$destroy', function () {\n            });\n\n            angular.element($window).on('resize', utils.debounce(resize, 250));\n        }\n\n        return {\n            restrict: 'EA',\n            require: '?ngModel',\n            priority: Number.MAX_VALUE,\n            link: main,\n            template: '<svg/>',\n            scope: {\n                data: '=ngModel',\n                config: '=lpWealthMinimap',\n                onRender: '&onRender'\n            }\n        };\n\n    };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/directives.js\n// module id = 8\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}