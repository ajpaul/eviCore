{"version":3,"sources":["webpack:///widget-login-multifactor/webpack/universalModuleDefinition","webpack:///widget-login-multifactor/scripts/main.js","webpack:///widget-login-multifactor/webpack/bootstrap 9d361171a0bf0a0d522b","webpack:///widget-login-multifactor/./scripts/main.js","webpack:///widget-login-multifactor/(webpack)/buildin/module.js","webpack:///widget-login-multifactor/external \"base\"","webpack:///widget-login-multifactor/external \"core\"","webpack:///widget-login-multifactor/external \"ui\"","webpack:///widget-login-multifactor/external \"module-users\"","webpack:///widget-login-multifactor/./scripts/constants.js","webpack:///widget-login-multifactor/./scripts/loginStepsProvider.js","webpack:///widget-login-multifactor/./scripts/config.js","webpack:///widget-login-multifactor/./scripts/controllers.js","webpack:///widget-login-multifactor/./scripts/login/loginController.js","webpack:///widget-login-multifactor/./scripts/otp/otpController.js","webpack:///widget-login-multifactor/./scripts/privacy/privacyController.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_RESULT__","run","loginSteps","lpWidget","lpCoreUtils","lpUsersAuthentication","lpCoreError","prefixSessionUrl","resolvePortalPlaceholders","getPreference","setConfig","initiateEndPoint","otpEndPoint","serverRootPath","getPortalProperty","portalName","pageName","initialize","e","captureException","$inject","name","base","core","ui","user","deps","createModule","constant","provider","config","controller","undefined","webpackPolyfill","deprecate","paths","children","STEPS","LOGIN","OTP","PRIVACY","STORE_LOGIN_ID","currentStep","routes","DEFAULT_STEP","shown","onShow","onHide","back","next","setInitialStep","step","setRoutes","routesOpt","extend","$get","$timeout","showStep","isFunction","hideStep","API","steps","addStep","options","Error","hasOwnProperty","to","forEach","getCurrent","setValues","values","noop","lpCoreTemplateProvider","loginStepsProvider","stepsRoutes","MainCtrl","$scope","ctrl","$on","loading","event","err","errorMessage","message","LoginCtrl","OtpCtrl","PrivacyCtrl","$window","lpFocus","lpCoreBus","lpCoreStore","data","locked","subscribe","deviceId","response","publish","hasFocus","resetFields","$emit","validate","submit","initiate","then","initiateResponse","isInitiated","isVerified","securityCheck","handleVerifiedResponse","securityCheckError","initiateError","code","ERROR_CODE","MAX_ATTEMPTS_EXCEEDED","showMaxAttemptsExceeded","username","password","lpCoreI18n","$broadcast","test","otpcode","verifyOTP","otpCode","securityCheckResponse","error","cancel","retry","finish","msg","timeExpired","privacy"],"mappings":"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","file":"scripts/main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-users\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"ui\", \"module-users\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-login-multifactor\"] = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-users\"));\n\telse\n\t\troot[\"widget-login-multifactor\"] = factory(root[\"base\"], root[\"core\"], root[\"ui\"], root[\"module-users\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-users\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"ui\", \"module-users\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-login-multifactor\"] = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-users\"));\n\telse\n\t\troot[\"widget-login-multifactor\"] = factory(root[\"base\"], root[\"core\"], root[\"ui\"], root[\"module-users\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\n\t/**\n\t * @module widget-login-multifactor\n\t * @version 1.0.0\n\t * @file lp-widget-login-multifactor description\n\t * @copyright Backbase Amsterdam\n\t * @requires module:lp/base\n\t * @requires module:lp/resources/core\n\t * @requires module:lp/resources/ui\n\t * @requires module:lp/resources/user\n\t * @requires interact\n\t *\n\t * @example Require Widget\n\t * // add this in the index.html\n\t * window.requireWidget( __WIDGET__ ,'scripts/index');\n\t */\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\n\t\t'use strict';\n\n\t\tmodule.name = 'widget-login-multifactor';\n\n\t\t/**\n\t  * Dependencies\n\t  */\n\t\tvar base = __webpack_require__(3);\n\t\tvar core = __webpack_require__(4);\n\t\tvar ui = __webpack_require__(5);\n\t\tvar user = __webpack_require__(6);\n\n\t\tvar deps = [core.name, user.name, ui.name];\n\n\t\t// @ngInject\n\t\tfunction run(loginSteps, lpWidget, lpCoreUtils, lpUsersAuthentication, lpCoreError) {\n\t\t\ttry {\n\t\t\t\tvar prefixSessionUrl = lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('prefixSessionUrl'));\n\t\t\t\tlpUsersAuthentication.setConfig({\n\t\t\t\t\tinitiateEndPoint: prefixSessionUrl + lpWidget.getPreference('initiateEndPoint'),\n\t\t\t\t\totpEndPoint: prefixSessionUrl + lpWidget.getPreference('otpEndPoint'),\n\t\t\t\t\tserverRootPath: lpCoreUtils.getPortalProperty('serverRoot'),\n\t\t\t\t\tportalName: lpCoreUtils.getPortalProperty('portalName'),\n\t\t\t\t\tpageName: lpCoreUtils.getPortalProperty('pageName')\n\t\t\t\t});\n\n\t\t\t\tloginSteps.initialize();\n\t\t\t} catch (e) {\n\t\t\t\tlpCoreError.captureException(e);\n\t\t\t}\n\t\t}\n\n\t\tmodule.exports = base.createModule(module.name, deps).constant(__webpack_require__(7)).provider('loginSteps', __webpack_require__(8)).config(__webpack_require__(9)).controller(__webpack_require__(10)).run(run);\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t\t'use strict';\n\n\t\texports.STEPS = {\n\t\t\tLOGIN: 'LOGIN',\n\t\t\tOTP: 'OTP',\n\t\t\tPRIVACY: 'PRIVACY'\n\t\t};\n\n\t\texports.STORE_LOGIN_ID = 'login-multifactor-login';\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t\t'use strict';\n\n\t\t// @ngInject\n\n\t\tmodule.exports = function loginStepsProvider(lpCoreUtils) {\n\t\t\tvar currentStep;\n\t\t\tvar routes = {};\n\t\t\tvar DEFAULT_STEP = {\n\t\t\t\tshown: false,\n\t\t\t\tonShow: null,\n\t\t\t\tonHide: null,\n\t\t\t\tback: null,\n\t\t\t\tnext: null\n\t\t\t};\n\n\t\t\t/**\n\t   * Configure what step should be shown first\n\t   * @param {string} currentStep Step identifier\n\t   */\n\t\t\tthis.setInitialStep = function (step) {\n\t\t\t\tcurrentStep = step;\n\t\t\t};\n\n\t\t\tthis.setRoutes = function (routesOpt) {\n\t\t\t\tlpCoreUtils.extend(routes, routesOpt);\n\t\t\t};\n\n\t\t\t// @ngInject\n\t\t\tthis.$get = function ($timeout) {\n\t\t\t\tvar API = {};\n\t\t\t\t/** @type {Object} Store all the steps configuration */\n\t\t\t\tAPI.steps = {};\n\n\t\t\t\t/**\n\t    * Display the `step`\n\t    * @param  {string} step Step identifier\n\t    */\n\t\t\t\tfunction showStep(step) {\n\t\t\t\t\tif (!step.shown && lpCoreUtils.isFunction(step.onShow)) {\n\t\t\t\t\t\tstep.onShow();\n\t\t\t\t\t}\n\n\t\t\t\t\tstep.shown = true;\n\t\t\t\t}\n\n\t\t\t\t/**\n\t    * Hides the `step`\n\t    * @param  {string} step Step identifier\n\t    */\n\t\t\t\tfunction hideStep(step) {\n\t\t\t\t\tif (step.shown && lpCoreUtils.isFunction(step.onHide)) {\n\t\t\t\t\t\tstep.onHide();\n\t\t\t\t\t}\n\n\t\t\t\t\tstep.shown = false;\n\t\t\t\t}\n\n\t\t\t\t/**\n\t    * Creates a new step entry and configure it\n\t    * @param {string} step    Step identifier\n\t    * @param {Object} options Step configuration\n\t    * @param {Boolean} options.shown Flag to indicate if it is displayed\n\t    * @param {function} options.onShow Handler that will be executed when the step is shown\n\t    * @param {function} options.onHide Handler that will be executed when the step is hidden\n\t    * @param {string|function} options.back Action or step to go backward\n\t    * @param {string|function} options.next Action or step to go forward\n\t    */\n\t\t\t\tAPI.addStep = function (step, options) {\n\t\t\t\t\tif (!step) {\n\t\t\t\t\t\tthrow new Error('You must provide an id for the step');\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.steps[step] = lpCoreUtils.extend({}, DEFAULT_STEP);\n\n\t\t\t\t\tif (routes.hasOwnProperty(step)) {\n\t\t\t\t\t\tlpCoreUtils.extend(this.steps[step], routes[step], options);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlpCoreUtils.extend(this.steps[step], options);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t/**\n\t    * Moves to the next step or executes the next action\n\t    */\n\t\t\t\tAPI.next = function () {\n\t\t\t\t\tvar next = this.steps[currentStep].next;\n\t\t\t\t\tif (lpCoreUtils.isFunction(next)) {\n\t\t\t\t\t\tnext();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.to(next);\n\t\t\t\t};\n\n\t\t\t\t/**\n\t    * Go back one step before or execute the back action\n\t    */\n\t\t\t\tAPI.back = function () {\n\t\t\t\t\tvar back = this.steps[currentStep].back;\n\t\t\t\t\tif (lpCoreUtils.isFunction(back)) {\n\t\t\t\t\t\tback();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis.to(back);\n\t\t\t\t};\n\n\t\t\t\t/**\n\t    * Move directly to one step\n\t    * @param  {string} step Step identifier\n\t    */\n\t\t\t\tAPI.to = function (step) {\n\t\t\t\t\tcurrentStep = step;\n\t\t\t\t\tlpCoreUtils.forEach(this.steps, hideStep);\n\t\t\t\t\tshowStep(this.steps[currentStep]);\n\t\t\t\t};\n\n\t\t\t\t/**\n\t    * Returns the current visible step\n\t    */\n\t\t\t\tAPI.getCurrent = function () {\n\t\t\t\t\treturn currentStep;\n\t\t\t\t};\n\n\t\t\t\t/**\n\t    * Change the step configuration  on the fly\n\t    * @param {string} step   Step identifier\n\t    * @param {object} values Attributes to upate\n\t    */\n\t\t\t\tAPI.setValues = function (step, values) {\n\t\t\t\t\tlpCoreUtils.extend(this.steps[step], values);\n\t\t\t\t};\n\n\t\t\t\t/**\n\t    * Start the step navigation\n\t    */\n\t\t\t\tAPI.initialize = function () {\n\t\t\t\t\t$timeout(function () {\n\t\t\t\t\t\tshowStep(API.steps[currentStep]);\n\t\t\t\t\t});\n\t\t\t\t\tAPI.initialize = lpCoreUtils.noop;\n\t\t\t\t};\n\n\t\t\t\treturn API;\n\t\t\t};\n\t\t};\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t/**\n\t * Config\n\t * @module config\n\t */\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t\t'use strict';\n\n\t\t// @ngInject\n\n\t\tmodule.exports = function (lpCoreUtils, lpCoreTemplateProvider, loginStepsProvider, STEPS) {\n\n\t\t\tvar stepsRoutes = {};\n\n\t\t\t// Configure Login Steps\n\t\t\tstepsRoutes[STEPS.LOGIN] = {\n\t\t\t\tback: null,\n\t\t\t\tnext: STEPS.OTP\n\t\t\t};\n\t\t\tstepsRoutes[STEPS.OTP] = {\n\t\t\t\tback: STEPS.LOGIN,\n\t\t\t\tnext: STEPS.PRIVACY\n\t\t\t};\n\t\t\tstepsRoutes[STEPS.PRIVACY] = {\n\t\t\t\tback: null,\n\t\t\t\tnext: null\n\t\t\t};\n\t\t\tloginStepsProvider.setInitialStep(STEPS.LOGIN);\n\t\t\tloginStepsProvider.setRoutes(stepsRoutes);\n\t\t};\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t/**\n\t * Controllers\n\t * @module controllers\n\t */\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    'use strict';\n\n\t    // @ngInject\n\n\t    exports.MainCtrl = function MainCtrl($scope, $timeout, lpCoreUtils, loginSteps) {\n\t        var ctrl = this;\n\n\t        ctrl.steps = loginSteps.steps;\n\n\t        $scope.$on('start-loading', function () {\n\t            ctrl.loading = true;\n\t        });\n\n\t        $scope.$on('stop-loading', function () {\n\t            ctrl.loading = false;\n\t        });\n\n\t        // Handle errors raised by the inner controllers\n\t        $scope.$on('error', function (event, err) {\n\t            $timeout(function () {\n\t                ctrl.errorMessage = err.message;\n\t            });\n\t        });\n\n\t        $scope.$on('error-clean', function (event) {\n\t            $timeout(function () {\n\t                ctrl.errorMessage = null;\n\t            });\n\t        });\n\t    };\n\n\t    exports.LoginCtrl = __webpack_require__(11);\n\t    exports.OtpCtrl = __webpack_require__(12);\n\t    exports.PrivacyCtrl = __webpack_require__(13);\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t\t'use strict';\n\n\t\t// @ngInject\n\n\t\tmodule.exports = function LoginCtrl($scope, $timeout, $window, lpFocus, lpCoreBus, lpUsersAuthentication, loginSteps, lpCoreStore, STEPS, STORE_LOGIN_ID) {\n\t\t\tvar ctrl = this;\n\t\t\t// var userId = lpCoreStore.getItem(STORE_LOGIN_ID);\n\n\t\t\tctrl.data = {};\n\t\t\tctrl.locked = false;\n\t\t\t// if (userId) {\n\t\t\t// \tctrl.data.username = userId;\n\t\t\t// \tctrl.remember = !!userId;\n\t\t\t// }\n\n\t\t\t// Get device signature\n\t\t\t// TODO: implement method subscribeOnce in lpCoreBus\n\t\t\tlpCoreBus.subscribe('widget-device-dna:data:ready', function (data) {\n\t\t\t\tctrl.data.deviceId = data.deviceId || '';\n\t\t\t\t//ctrl.data.deviceSignature = data.deviceSignature;\n\t\t\t\t// Listen when deviceId is ready from the initiate response\n\t\t\t\t$scope.$on('initiate-success', function (response) {\n\t\t\t\t\tvar deviceId = response.deviceId || '';\n\t\t\t\t\t// Notify device dna widget that it can set deviceId in the cookie\n\t\t\t\t\tif (deviceId) {\n\t\t\t\t\t\tlpCoreBus.subscribe('widget-login-multifactor:status:security-check-success', function () {\n\t\t\t\t\t\t\tlpCoreBus.publish('widget-device-dna:device:ready', deviceId);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t// Register the controller as a step and the behavior\n\t\t\tloginSteps.addStep(STEPS.LOGIN, {\n\t\t\t\tonShow: function onShow() {\n\t\t\t\t\tlpFocus('username');\n\t\t\t\t},\n\t\t\t\tonHide: function onHide() {\n\t\t\t\t\tctrl.hasFocus = false;\n\t\t\t\t\tctrl.resetFields();\n\t\t\t\t\t$scope.$emit('error-clean');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tctrl.validate = function (event) {\n\t\t\t\t// console.log('Validate credentials against backend service');\n\t\t\t};\n\n\t\t\tctrl.submit = function () {\n\t\t\t\t$scope.$emit('start-loading');\n\t\t\t\t$scope.$emit('error-clean');\n\n\t\t\t\t// if (ctrl.remember)\n\t\t\t\t// \tlpCoreStore.setItem(STORE_LOGIN_ID, ctrl.data.username);\n\t\t\t\t// else\n\t\t\t\t// \tlpCoreStore.removeItem(STORE_LOGIN_ID);\n\n\t\t\t\tlpUsersAuthentication.initiate(ctrl.data).then(function (initiateResponse) {\n\t\t\t\t\t// Success\n\t\t\t\t\t$scope.$emit('initiate-success', initiateResponse);\n\t\t\t\t\tif (lpUsersAuthentication.isInitiated()) {\n\t\t\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t\t\t\tloginSteps.next();\n\t\t\t\t\t} else if (lpUsersAuthentication.isVerified()) {\n\t\t\t\t\t\tlpUsersAuthentication.securityCheck().then(function (response) {\n\t\t\t\t\t\t\tlpCoreBus.publish('widget-login-multifactor:status:security-check-success');\n\t\t\t\t\t\t\tlpUsersAuthentication.handleVerifiedResponse(response);\n\t\t\t\t\t\t}, function (securityCheckError) {\n\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t\t\t\t\t$scope.$emit('error', securityCheckError);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, function (initiateError) {\n\t\t\t\t\t// Error\n\t\t\t\t\tif (initiateError.code === lpUsersAuthentication.ERROR_CODE.MAX_ATTEMPTS_EXCEEDED) {\n\t\t\t\t\t\tctrl.showMaxAttemptsExceeded();\n\t\t\t\t\t}\n\t\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t\t\t$scope.$emit('error', initiateError);\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tctrl.showMaxAttemptsExceeded = function () {\n\t\t\t\tctrl.locked = true;\n\t\t\t};\n\n\t\t\tctrl.resetFields = function () {\n\t\t\t\t// var id = lpCoreStore.getItem(STORE_LOGIN_ID);\n\n\t\t\t\tctrl.data.username = '';\n\t\t\t\tctrl.data.password = null;\n\t\t\t};\n\t\t};\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t\t'use strict';\n\n\t\t// @ngInject\n\n\t\tmodule.exports = function OtpCtrl($scope, $timeout, lpCoreBus, lpUsersAuthentication, lpFocus, loginSteps, STEPS, lpCoreI18n) {\n\t\t\tvar ctrl = this;\n\t\t\tctrl.data = {};\n\n\t\t\tloginSteps.addStep(STEPS.OTP, {\n\t\t\t\tonShow: function onShow() {\n\t\t\t\t\tlpFocus('otp');\n\t\t\t\t\t$scope.$broadcast('timer-run');\n\t\t\t\t},\n\t\t\t\tonHide: function onHide() {\n\t\t\t\t\tctrl.resetFields();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tctrl.submit = function () {\n\t\t\t\t$scope.$emit('error-clean');\n\n\t\t\t\tif (/^\\d+$/.test(ctrl.data.otpcode) === false) {\n\t\t\t\t\t$scope.$emit('error', {\n\t\t\t\t\t\tmessage: 'Code must contain only digits'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$scope.$broadcast('timer-pause');\n\t\t\t\t$scope.$emit('start-loading');\n\n\t\t\t\tlpUsersAuthentication.verifyOTP({\n\t\t\t\t\totpCode: ctrl.data.otpcode\n\t\t\t\t}).then(function (response) {\n\t\t\t\t\t// Success\n\t\t\t\t\tif (lpUsersAuthentication.isVerified()) {\n\t\t\t\t\t\tlpUsersAuthentication.securityCheck().then(function (securityCheckResponse) {\n\t\t\t\t\t\t\t// Success\n\t\t\t\t\t\t\tlpCoreBus.publish('widget-login-multifactor:status:security-check-success');\n\t\t\t\t\t\t\tloginSteps.next();\n\t\t\t\t\t\t}, function (securityCheckError) {\n\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\t$scope.$emit('error', securityCheckError);\n\t\t\t\t\t\t})['finally'](function () {\n\t\t\t\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, function (error) {\n\t\t\t\t\t// Error\n\t\t\t\t\t$scope.$broadcast('timer-resume');\n\t\t\t\t\t$scope.$emit('error', error);\n\t\t\t\t})['finally'](function () {\n\t\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tctrl.cancel = function () {\n\t\t\t\tloginSteps.back();\n\t\t\t};\n\n\t\t\tctrl.retry = function () {\n\t\t\t\t// Call service\n\t\t\t\tctrl.resetFields();\n\t\t\t\tlpFocus('otp');\n\t\t\t\t$scope.$broadcast('timer-run');\n\t\t\t};\n\n\t\t\tctrl.finish = function (msg) {\n\t\t\t\t$timeout(function () {\n\t\t\t\t\tctrl.timeExpired = true;\n\t\t\t\t\t$scope.$emit('error', {\n\t\t\t\t\t\tmessage: 'Time has expired'\n\t\t\t\t\t});\n\t\t\t\t}, 200);\n\t\t\t};\n\n\t\t\tctrl.resetFields = function () {\n\t\t\t\tctrl.data.otpcode = null;\n\t\t\t\tctrl.timeExpired = false;\n\t\t\t\t$scope.$broadcast('timer-reset');\n\t\t\t\t$scope.$emit('error-clean');\n\t\t\t};\n\t\t};\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t\t'use strict';\n\n\t\t// @ngInject\n\n\t\tmodule.exports = function PrivacyCtrl($scope, $window, lpCoreBus, lpUsersAuthentication, loginSteps, STEPS) {\n\t\t\tvar ctrl = this;\n\n\t\t\tloginSteps.addStep(STEPS.PRIVACY, {\n\t\t\t\tnext: function next() {\n\t\t\t\t\tif (lpUsersAuthentication.isVerified()) {\n\t\t\t\t\t\tlpUsersAuthentication.securityCheck().then(function (response) {\n\t\t\t\t\t\t\tlpCoreBus.publish('widget-login-multifactor:status:security-check-success');\n\t\t\t\t\t\t\tlpUsersAuthentication.handleVerifiedResponse(response);\n\t\t\t\t\t\t}, function (securityCheckError) {\n\t\t\t\t\t\t\t// Error\n\t\t\t\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t\t\t\t\t$scope.$emit('error', securityCheckError);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tctrl.data = {\n\t\t\t\tprivacy: 'public'\n\t\t\t};\n\n\t\t\tctrl.submit = function () {\n\t\t\t\t$scope.$emit('error-clean');\n\t\t\t\t// Call service\n\t\t\t\tloginSteps.next();\n\t\t\t};\n\t\t};\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** scripts/main.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9d361171a0bf0a0d522b\n **/","/**\n * @module widget-login-multifactor\n * @version 1.0.0\n * @file lp-widget-login-multifactor description\n * @copyright Backbase Amsterdam\n * @requires module:lp/base\n * @requires module:lp/resources/core\n * @requires module:lp/resources/ui\n * @requires module:lp/resources/user\n * @requires interact\n *\n * @example Require Widget\n * // add this in the index.html\n * window.requireWidget( __WIDGET__ ,'scripts/index');\n */\n\ndefine( function (require, exports, module) {\n\n\t'use strict';\n\n\tmodule.name = 'widget-login-multifactor';\n\n\t/**\n\t * Dependencies\n\t */\n\tvar base = require('base');\n\tvar core = require('core');\n\tvar ui = require('ui');\n\tvar user = require('module-users');\n\n\tvar deps = [\n\t\tcore.name,\n\t\tuser.name,\n\t\tui.name\n\t];\n\n\t// @ngInject\n\tfunction run(loginSteps, lpWidget, lpCoreUtils, lpUsersAuthentication, lpCoreError) {\n\t\ttry {\n\t\t\tvar prefixSessionUrl = lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('prefixSessionUrl'));\n\t\t\tlpUsersAuthentication.setConfig({\n\t\t\t\tinitiateEndPoint: prefixSessionUrl + lpWidget.getPreference('initiateEndPoint'),\n\t\t\t\totpEndPoint: prefixSessionUrl + lpWidget.getPreference('otpEndPoint'),\n\t\t\t\tserverRootPath: lpCoreUtils.getPortalProperty('serverRoot'),\n\t\t\t\tportalName: lpCoreUtils.getPortalProperty('portalName'),\n\t\t\t\tpageName: lpCoreUtils.getPortalProperty('pageName')\n\t\t\t});\n\n\t\t\tloginSteps.initialize();\n\t\t} catch(e) {\n\t\t\tlpCoreError.captureException(e);\n\t\t}\n\n\t}\n\n\tmodule.exports = base.createModule(module.name, deps)\n\t\t.constant(require('./constants'))\n\t\t.provider('loginSteps', require('./loginStepsProvider'))\n\t\t.config(require('./config'))\n\t\t.controller(require('./controllers'))\n\t\t.run(run);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/main.js\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"base\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"core\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ui\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"module-users\"\n ** module id = 6\n ** module chunks = 0\n **/","define( function (require, exports, module) {\n\t'use strict';\n\n\texports.STEPS = {\n\t\tLOGIN: 'LOGIN',\n\t\tOTP: 'OTP',\n\t\tPRIVACY: 'PRIVACY'\n\t};\n\n\texports.STORE_LOGIN_ID = 'login-multifactor-login';\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/constants.js\n **/","define( function (require, exports, module) {\n\t'use strict';\n\n\t// @ngInject\n\tmodule.exports = function loginStepsProvider(lpCoreUtils) {\n\t\tvar currentStep;\n\t\tvar routes = {};\n\t\tvar DEFAULT_STEP = {\n\t\t\tshown: false,\n\t\t\tonShow: null,\n\t\t\tonHide: null,\n\t\t\tback: null,\n\t\t\tnext: null\n\t\t};\n\n\t\t/**\n\t\t * Configure what step should be shown first\n\t\t * @param {string} currentStep Step identifier\n\t\t */\n\t\tthis.setInitialStep = function(step) {\n\t\t\tcurrentStep = step;\n\t\t};\n\n\t\tthis.setRoutes = function(routesOpt) {\n\t\t\tlpCoreUtils.extend(routes, routesOpt);\n\t\t};\n\n\t\t// @ngInject\n\t\tthis.$get = function($timeout) {\n\t\t\tvar API = {};\n\t\t\t/** @type {Object} Store all the steps configuration */\n\t\t\tAPI.steps = {};\n\n\t\t\t/**\n\t\t\t * Display the `step`\n\t\t\t * @param  {string} step Step identifier\n\t\t\t */\n\t\t\tfunction showStep(step) {\n\t\t\t\tif (!step.shown && lpCoreUtils.isFunction(step.onShow)){\n\t\t\t\t\tstep.onShow();\n\t\t\t\t}\n\n\t\t\t\tstep.shown = true;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Hides the `step`\n\t\t\t * @param  {string} step Step identifier\n\t\t\t */\n\t\t\tfunction hideStep(step) {\n\t\t\t\tif (step.shown && lpCoreUtils.isFunction(step.onHide)){\n\t\t\t\t\tstep.onHide();\n\t\t\t\t}\n\n\t\t\t\tstep.shown = false;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Creates a new step entry and configure it\n\t\t\t * @param {string} step    Step identifier\n\t\t\t * @param {Object} options Step configuration\n\t\t\t * @param {Boolean} options.shown Flag to indicate if it is displayed\n\t\t\t * @param {function} options.onShow Handler that will be executed when the step is shown\n\t\t\t * @param {function} options.onHide Handler that will be executed when the step is hidden\n\t\t\t * @param {string|function} options.back Action or step to go backward\n\t\t\t * @param {string|function} options.next Action or step to go forward\n\t\t\t */\n\t\t\tAPI.addStep = function(step, options) {\n\t\t\t\tif (!step){\n\t\t\t\t\tthrow new Error('You must provide an id for the step');\n\t\t\t\t}\n\n\t\t\t\tthis.steps[step] = lpCoreUtils.extend({}, DEFAULT_STEP);\n\n\t\t\t\tif (routes.hasOwnProperty(step)) {\n\t\t\t\t\tlpCoreUtils.extend(this.steps[step], routes[step], options);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tlpCoreUtils.extend(this.steps[step], options);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Moves to the next step or executes the next action\n\t\t\t */\n\t\t\tAPI.next = function() {\n\t\t\t\tvar next = this.steps[currentStep].next;\n\t\t\t\tif (lpCoreUtils.isFunction(next)) {\n\t\t\t\t\tnext();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.to(next);\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Go back one step before or execute the back action\n\t\t\t */\n\t\t\tAPI.back = function() {\n\t\t\t\tvar back = this.steps[currentStep].back;\n\t\t\t\tif (lpCoreUtils.isFunction(back)) {\n\t\t\t\t\tback();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.to(back);\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Move directly to one step\n\t\t\t * @param  {string} step Step identifier\n\t\t\t */\n\t\t\tAPI.to = function(step) {\n\t\t\t\tcurrentStep = step;\n\t\t\t\tlpCoreUtils.forEach(this.steps, hideStep);\n\t\t\t\tshowStep(this.steps[currentStep]);\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Returns the current visible step\n\t\t\t */\n\t\t\tAPI.getCurrent = function() {\n\t\t\t\treturn currentStep;\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Change the step configuration  on the fly\n\t\t\t * @param {string} step   Step identifier\n\t\t\t * @param {object} values Attributes to upate\n\t\t\t */\n\t\t\tAPI.setValues = function(step, values) {\n\t\t\t\tlpCoreUtils.extend(this.steps[step], values);\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * Start the step navigation\n\t\t\t */\n\t\t\tAPI.initialize = function() {\n\t\t\t\t$timeout(function() {\n\t\t\t\t\tshowStep(API.steps[currentStep]);\n\t\t\t\t});\n\t\t\t\tAPI.initialize = lpCoreUtils.noop;\n\t\t\t};\n\n\t\t\treturn API;\n\t\t};\n\t};\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/loginStepsProvider.js\n **/","/**\n * Config\n * @module config\n */\ndefine(function (require, exports, module) {\n\t'use strict';\n\n\t// @ngInject\n\tmodule.exports = function (lpCoreUtils, lpCoreTemplateProvider, loginStepsProvider, STEPS) {\n\n\t\tvar stepsRoutes = {};\n\n\t\t// Configure Login Steps\n\t\tstepsRoutes[STEPS.LOGIN] = {\n\t\t\tback: null,\n\t\t\tnext: STEPS.OTP\n\t\t};\n\t\tstepsRoutes[STEPS.OTP] = {\n\t\t\tback: STEPS.LOGIN,\n\t\t\tnext: STEPS.PRIVACY\n\t\t};\n\t\tstepsRoutes[STEPS.PRIVACY] = {\n\t\t\tback: null,\n\t\t\tnext: null\n\t\t};\n\t\tloginStepsProvider.setInitialStep(STEPS.LOGIN);\n\t\tloginStepsProvider.setRoutes(stepsRoutes);\n\n\t};\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/config.js\n **/","/**\n * Controllers\n * @module controllers\n */\ndefine(function(require, exports) {\n    'use strict';\n\n    // @ngInject\n    exports.MainCtrl = function MainCtrl($scope, $timeout, lpCoreUtils, loginSteps) {\n        var ctrl = this;\n\n        ctrl.steps = loginSteps.steps;\n\n        $scope.$on('start-loading', function() {\n            ctrl.loading = true;\n        });\n\n        $scope.$on('stop-loading', function() {\n            ctrl.loading = false;\n        });\n\n        // Handle errors raised by the inner controllers\n        $scope.$on('error', function(event, err) {\n            $timeout(function() {\n                ctrl.errorMessage = err.message;\n            });\n        });\n\n        $scope.$on('error-clean', function(event) {\n            $timeout(function() {\n                ctrl.errorMessage = null;\n            });\n        });\n    };\n\n    exports.LoginCtrl = require('./login/loginController');\n    exports.OtpCtrl = require('./otp/otpController');\n    exports.PrivacyCtrl = require('./privacy/privacyController');\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/controllers.js\n **/","define(function(require, exports, module) {\n\t'use strict';\n\n\t// @ngInject\n\tmodule.exports = function LoginCtrl($scope, $timeout, $window, lpFocus, lpCoreBus, lpUsersAuthentication, loginSteps, lpCoreStore, STEPS, STORE_LOGIN_ID) {\n\t\tvar ctrl = this;\n\t\t// var userId = lpCoreStore.getItem(STORE_LOGIN_ID);\n\n\t\tctrl.data = {};\n\t\tctrl.locked = false;\n\t\t// if (userId) {\n\t\t// \tctrl.data.username = userId;\n\t\t// \tctrl.remember = !!userId;\n\t\t// }\n\n\t\t// Get device signature\n\t\t// TODO: implement method subscribeOnce in lpCoreBus\n\t\tlpCoreBus.subscribe('widget-device-dna:data:ready', function(data) {\n\t\t\tctrl.data.deviceId = data.deviceId || '';\n\t\t\t//ctrl.data.deviceSignature = data.deviceSignature;\n\t\t\t// Listen when deviceId is ready from the initiate response\n\t\t\t$scope.$on('initiate-success', function(response) {\n\t\t\t\tvar deviceId = response.deviceId || '';\n\t\t\t\t// Notify device dna widget that it can set deviceId in the cookie\n\t\t\t\tif (deviceId) {\n\t\t\t\t\tlpCoreBus.subscribe('widget-login-multifactor:status:security-check-success', function() {\n\t\t\t\t\t\tlpCoreBus.publish('widget-device-dna:device:ready', deviceId);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\n\t\t// Register the controller as a step and the behavior\n\t\tloginSteps.addStep(STEPS.LOGIN, {\n\t\t\tonShow: function() {\n\t\t\t\tlpFocus('username');\n\t\t\t},\n\t\t\tonHide: function() {\n\t\t\t\tctrl.hasFocus = false;\n\t\t\t\tctrl.resetFields();\n\t\t\t\t$scope.$emit('error-clean');\n\t\t\t}\n\t\t});\n\n\t\tctrl.validate = function(event) {\n\t\t\t// console.log('Validate credentials against backend service');\n\t\t};\n\n\t\tctrl.submit = function() {\n\t\t\t$scope.$emit('start-loading');\n\t\t\t$scope.$emit('error-clean');\n\n\t\t\t// if (ctrl.remember)\n\t\t\t// \tlpCoreStore.setItem(STORE_LOGIN_ID, ctrl.data.username);\n\t\t\t// else\n\t\t\t// \tlpCoreStore.removeItem(STORE_LOGIN_ID);\n\n\t\t\tlpUsersAuthentication.initiate(ctrl.data)\n\t\t\t.then(function(initiateResponse) { // Success\n\t\t\t\t$scope.$emit('initiate-success', initiateResponse);\n\t\t\t\tif (lpUsersAuthentication.isInitiated()) {\n\t\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t\t\tloginSteps.next();\n\t\t\t\t}\n\t\t\t\telse if (lpUsersAuthentication.isVerified()) {\n\t\t\t\t\tlpUsersAuthentication.securityCheck()\n\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\tlpCoreBus.publish('widget-login-multifactor:status:security-check-success');\n\t\t\t\t\t\tlpUsersAuthentication.handleVerifiedResponse(response);\n\t\t\t\t\t},\n\t\t\t\t\tfunction(securityCheckError) { // Error\n\t\t\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t\t\t\t$scope.$emit('error', securityCheckError);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, function(initiateError) { // Error\n\t\t\t\tif (initiateError.code === lpUsersAuthentication.ERROR_CODE.MAX_ATTEMPTS_EXCEEDED) {\n\t\t\t\t\tctrl.showMaxAttemptsExceeded();\n\t\t\t\t}\n\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t\t$scope.$emit('error', initiateError);\n\t\t\t});\n\t\t};\n\n\t\tctrl.showMaxAttemptsExceeded = function() {\n\t\t\tctrl.locked = true;\n\t\t};\n\n\t\tctrl.resetFields = function() {\n\t\t\t// var id = lpCoreStore.getItem(STORE_LOGIN_ID);\n\n\t\t\tctrl.data.username = '';\n\t\t\tctrl.data.password = null;\n\t\t};\n\t};\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/login/loginController.js\n **/","define(function(require, exports, module) {\n\t'use strict';\n\n\t// @ngInject\n\tmodule.exports = function OtpCtrl($scope, $timeout, lpCoreBus, lpUsersAuthentication, lpFocus, loginSteps, STEPS, lpCoreI18n) {\n\t\tvar ctrl = this;\n\t\tctrl.data = {};\n\n\t\tloginSteps.addStep(STEPS.OTP, {\n\t\t\tonShow: function() {\n\t\t\t\tlpFocus('otp');\n\t\t\t\t$scope.$broadcast('timer-run');\n\t\t\t},\n\t\t\tonHide: function() {\n\t\t\t\tctrl.resetFields();\n\t\t\t}\n\t\t});\n\n\t\tctrl.submit = function() {\n\t\t\t$scope.$emit('error-clean');\n\n\t\t\tif (/^\\d+$/.test(ctrl.data.otpcode) === false) {\n\t\t\t\t$scope.$emit('error', {\n\t\t\t\t\tmessage: 'Code must contain only digits'\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$scope.$broadcast('timer-pause');\n\t\t\t$scope.$emit('start-loading');\n\n\t\t\tlpUsersAuthentication.verifyOTP({\n\t\t\t\totpCode: ctrl.data.otpcode\n\t\t\t})\n\t\t\t.then(function(response) { // Success\n\t\t\t\tif (lpUsersAuthentication.isVerified()) {\n\t\t\t\t\tlpUsersAuthentication.securityCheck()\n\t\t\t\t\t.then(function(securityCheckResponse) { // Success\n\t\t\t\t\t\tlpCoreBus.publish('widget-login-multifactor:status:security-check-success');\n\t\t\t\t\t\tloginSteps.next();\n\t\t\t\t\t}, function(securityCheckError) { // Error\n\t\t\t\t\t\t$scope.$emit('error', securityCheckError);\n\t\t\t\t\t})\n\t\t\t\t\t['finally'](function() {\n\t\t\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}, function(error) { // Error\n\t\t\t\t$scope.$broadcast('timer-resume');\n\t\t\t\t$scope.$emit('error', error);\n\t\t\t})\n\t\t\t['finally'](function() {\n\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t});\n\t\t};\n\n\t\tctrl.cancel = function() {\n\t\t\tloginSteps.back();\n\t\t};\n\n\t\tctrl.retry = function() {\n\t\t\t// Call service\n\t\t\tctrl.resetFields();\n\t\t\tlpFocus('otp');\n\t\t\t$scope.$broadcast('timer-run');\n\t\t};\n\n\t\tctrl.finish = function(msg) {\n\t\t\t$timeout(function() {\n\t\t\t\tctrl.timeExpired = true;\n\t\t\t\t$scope.$emit('error', {\n\t\t\t\t\tmessage: 'Time has expired'\n\t\t\t\t});\n\t\t\t}, 200);\n\t\t};\n\n\t\tctrl.resetFields = function() {\n\t\t\tctrl.data.otpcode = null;\n\t\t\tctrl.timeExpired = false;\n\t\t\t$scope.$broadcast('timer-reset');\n\t\t\t$scope.$emit('error-clean');\n\t\t};\n\t};\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/otp/otpController.js\n **/","define(function(require, exports, module) {\n\t'use strict';\n\n\t// @ngInject\n\tmodule.exports = function PrivacyCtrl($scope, $window, lpCoreBus, lpUsersAuthentication, loginSteps, STEPS) {\n\t\tvar ctrl = this;\n\n\t\tloginSteps.addStep(STEPS.PRIVACY, {\n\t\t\tnext: function() {\n\t\t\t\tif (lpUsersAuthentication.isVerified()) {\n\t\t\t\t\tlpUsersAuthentication.securityCheck()\n\t\t\t\t\t.then(function(response) {\n\t\t\t\t\t\tlpCoreBus.publish('widget-login-multifactor:status:security-check-success');\n\t\t\t\t\t\tlpUsersAuthentication.handleVerifiedResponse(response);\n\t\t\t\t\t},\n\t\t\t\t\tfunction(securityCheckError) { // Error\n\t\t\t\t\t\t$scope.$emit('stop-loading');\n\t\t\t\t\t\t$scope.$emit('error', securityCheckError);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tctrl.data = {\n\t\t\tprivacy: 'public'\n\t\t};\n\n\t\tctrl.submit = function() {\n\t\t\t$scope.$emit('error-clean');\n\t\t\t// Call service\n\t\t\tloginSteps.next();\n\t\t};\n\t};\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/privacy/privacyController.js\n **/"],"sourceRoot":""}