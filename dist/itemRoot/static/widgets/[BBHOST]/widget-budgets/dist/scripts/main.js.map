{"version":3,"sources":["webpack:///widget-budgets/webpack/universalModuleDefinition","webpack:///widget-budgets/scripts/main.js","webpack:///widget-budgets/webpack/bootstrap 9c41c81d5aaa09c2ebbd","webpack:///widget-budgets/./scripts/main.js","webpack:///widget-budgets/(webpack)/buildin/module.js","webpack:///widget-budgets/external \"base\"","webpack:///widget-budgets/external \"core\"","webpack:///widget-budgets/external \"ui\"","webpack:///widget-budgets/./scripts/components/gridly/scripts/main.js","webpack:///widget-budgets/./scripts/components/gridly/scripts/libs/jquery.gridly.js","webpack:///widget-budgets/external \"jquery\"","webpack:///widget-budgets/./scripts/factories.js","webpack:///widget-budgets/./scripts/services.js","webpack:///widget-budgets/./scripts/controllers.js","webpack:///widget-budgets/./scripts/directives.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_8__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_RESULT__","run","lpCoreBus","lpWidget","publish","model","name","$inject","base","core","ui","gridly","deps","createModule","service","controller","directive","undefined","webpackPolyfill","deprecate","paths","children","_typeof","Symbol","iterator","obj","constructor","$","Draggable","Gridly","__bind","fn","me","apply","arguments","__slice","slice","$container","selector","callbacks","touchend","click","moved","ended","began","coordinate","off","on","toggle","bind","prototype","method","document","event","type","originalEvent","touches","_ref","$target","preventDefault","stopPropagation","target","closest","find","addClass","origin","x","pageX","position","left","y","pageY","top","removeClass","css","dragged","win","$el","settings","optimize","layout","structure","size","draggingMoved","draggingEnded","draggingBegan","$sorted","draggable","compare","reordinalize","ordinalize","extend","config","responsive","columns","isNumeric","Math","floor","width","gutter","resize","data","setTimeout","zIndex","options","$elements","$element","i","_i","_results","length","push","d","s","h","w","_draggable","sort","a","b","$a","$b","aPosition","aPositionInt","bPosition","bPositionInt","parseInt","index","_ref1","reordering","reordered","$dragging","element","original","positions","_j","_len","_ref2","filter","is","height","map","column","max","Infinity","originals","results","splice","window","option","parameters","each","$this","action","defaults","angular","ng","jQuery","SharedData","accountIds","categories","selectedAccountId","budgetEditMode","BudgetsManager","BudgetsResource","Budget","AlertsManager","$timeout","lpCoreUtils","loadingInd","budgets","budgetTemplate","categoryIds","loading","getBudgets","loadBudgets","get","$promise","resolveCurrency","budget","account","currency","budgetCopy","copy","sortedBudgets","b1","b2","amount","sortedBudgetsSize","numOfLarge","ceil","numOfMedium","ids","currentBudget","indexOf","budgetIndex","postprocess","rawBudgets","processedBudgets","forEach","value","key","spentPercentage","changeOrder","array","oldIndex","newIndex","order","list","savedOrder","getPreference","split","budgetId","load","then","calculateBudgetSizes","create","formData","success","newItem","spent","error","update","remove","processing","budgetIds","curentBudget","loadAll","createBudget","updateBudget","removeBudget","self","partyId","image","dateFrom","Date","getTime","dateTo","exceeds","$resource","header","endpoint","resolvePortalPlaceholders","headers","isArray","params","CategoriesResource","AccountsResource","TransactionsResource","$http","$q","queryParams","deferred","defer","status","resolve","promise","ALERT_TIMEOUT","alerts","message","timeout","close","msg","elements","saveOrder","items","setPreference","toString","save","refresh","init","$gridly","parseBoolean","BudgetsController","$scope","i18nUtils","shared","partialsDir","getWidgetBaseUrl","budgetsManager","accounts","toggleEditMode","loadCategories","subscribe","accountId","springboardWidth","BudgetEditController","budgetImages","goToWizardStep","form","next","getActiveWizardStep","wizardNextStep","focus","back","wizardPreviousStep","mode","$root","all","$broadcast","selectCategory","category","selected","isCategorySelected","chooseImage","widget","restrict","replace","scope","templateUrl","loadTransactions","transactions","df","dt","categoryColor","result","categoryId","color","title","transactionType","transactionAmount","transactionCurrency","link","elem","attrs","currentMode","$apply","openBudget","$on","el","valueX","valueY","hasClass","editBudget","brick","reloadBudgets","$last","amountPicker","$interval","increase","cancel","decrease"],"mappings":"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","file":"scripts/main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"jquery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"ui\", \"jquery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-budgets\"] = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"jquery\"));\n\telse\n\t\troot[\"widget-budgets\"] = factory(root[\"base\"], root[\"core\"], root[\"ui\"], root[\"jquery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"jquery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"ui\", \"jquery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-budgets\"] = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"jquery\"));\n\telse\n\t\troot[\"widget-budgets\"] = factory(root[\"base\"], root[\"core\"], root[\"ui\"], root[\"jquery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    module.name = 'widgets-budgets';\n\n\t    var base = __webpack_require__(3);\n\t    var core = __webpack_require__(4);\n\t    var ui = __webpack_require__(5);\n\t    var gridly = __webpack_require__(6);\n\n\t    var deps = [core.name, ui.name, gridly.name];\n\n\t    // @ngInject\n\t    function run(lpCoreBus, lpWidget) {\n\t        lpCoreBus.publish('cxp.item.loaded', { id: lpWidget.model.name });\n\t    }\n\n\t    module.exports = base.createModule(module.name, deps).factory(__webpack_require__(9)).service(__webpack_require__(10)).controller(__webpack_require__(11)).directive(__webpack_require__(12)).run(run);\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    module.name = 'component.widget-budgets-gridly';\n\t    var base = __webpack_require__(3);\n\t    var deps = [];\n\n\t    __webpack_require__(7);\n\n\t    module.exports = base.createModule(module.name, deps);\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol ? \"symbol\" : typeof obj; };\n\n\t/*eslint-disable */\n\t// Generated by CoffeeScript 1.6.3\n\t/*\n\tjQuery Gridly\n\tCopyright 2013 Kevin Sylvestre\n\t1.2.3\n\t*/\n\n\t(function () {\n\t  \"use strict\";\n\n\t  var $,\n\t      Draggable,\n\t      Gridly,\n\t      __bind = function __bind(fn, me) {\n\t    return function () {\n\t      return fn.apply(me, arguments);\n\t    };\n\t  },\n\t      __slice = [].slice;\n\n\t  $ = __webpack_require__(8);\n\t  Draggable = function () {\n\t    function Draggable($container, selector, callbacks) {\n\t      this.touchend = __bind(this.touchend, this);\n\t      this.click = __bind(this.click, this);\n\t      this.moved = __bind(this.moved, this);\n\t      this.ended = __bind(this.ended, this);\n\t      this.began = __bind(this.began, this);\n\t      this.coordinate = __bind(this.coordinate, this);\n\t      this.off = __bind(this.off, this);\n\t      this.on = __bind(this.on, this);\n\t      this.toggle = __bind(this.toggle, this);\n\t      this.bind = __bind(this.bind, this);\n\t      this.$container = $container;\n\t      this.selector = selector;\n\t      this.callbacks = callbacks;\n\t      this.toggle();\n\t    }\n\n\t    Draggable.prototype.bind = function (method) {\n\t      if (method == null) {\n\t        method = 'on';\n\t      }\n\t      $(document)[method]('mousemove touchmove', this.moved);\n\t      return $(document)[method]('mouseup touchcancel', this.ended);\n\t    };\n\n\t    Draggable.prototype.toggle = function (method) {\n\t      if (method == null) {\n\t        method = 'on';\n\t      }\n\t      this.$container[method]('mousedown touchstart', this.selector, this.began);\n\t      this.$container[method]('touchend', this.selector, this.touchend);\n\t      return this.$container[method]('click', this.selector, this.click);\n\t    };\n\n\t    Draggable.prototype.on = function () {\n\t      return this.toggle('on');\n\t    };\n\n\t    Draggable.prototype.off = function () {\n\t      return this.toggle('off');\n\t    };\n\n\t    Draggable.prototype.coordinate = function (event) {\n\t      switch (event.type) {\n\t        case 'touchstart':\n\t        case 'touchmove':\n\t        case 'touchend':\n\t        case 'touchcancel':\n\t          return event.originalEvent.touches[0];\n\t        default:\n\t          return event;\n\t      }\n\t    };\n\n\t    Draggable.prototype.began = function (event) {\n\t      var _ref;\n\t      if (this.$target) {\n\t        return;\n\t      }\n\t      event.preventDefault();\n\t      event.stopPropagation();\n\t      this.bind('on');\n\t      this.$target = $(event.target).closest(this.$container.find(this.selector));\n\t      this.$target.addClass('dragging');\n\t      this.origin = {\n\t        x: this.coordinate(event).pageX - this.$target.position().left,\n\t        y: this.coordinate(event).pageY - this.$target.position().top\n\t      };\n\t      return (_ref = this.callbacks) != null ? typeof _ref.began === \"function\" ? _ref.began(event) : void 0 : void 0;\n\t    };\n\n\t    Draggable.prototype.ended = function (event) {\n\t      var _ref;\n\t      if (this.$target == null) {\n\t        return;\n\t      }\n\t      if (event.type !== 'touchend') {\n\t        event.preventDefault();\n\t        event.stopPropagation();\n\t      }\n\t      this.bind('off');\n\t      this.$target.removeClass('dragging');\n\t      delete this.$target;\n\t      delete this.origin;\n\t      return (_ref = this.callbacks) != null ? typeof _ref.ended === \"function\" ? _ref.ended(event) : void 0 : void 0;\n\t    };\n\n\t    Draggable.prototype.moved = function (event) {\n\t      var _ref;\n\t      if (this.$target == null) {\n\t        return;\n\t      }\n\t      event.preventDefault();\n\t      event.stopPropagation();\n\t      this.$target.css({\n\t        left: this.coordinate(event).pageX - this.origin.x,\n\t        top: this.coordinate(event).pageY - this.origin.y\n\t      });\n\t      this.dragged = this.$target;\n\t      return (_ref = this.callbacks) != null ? typeof _ref.moved === \"function\" ? _ref.moved(event) : void 0 : void 0;\n\t    };\n\n\t    Draggable.prototype.click = function (event) {\n\t      if (!this.dragged) {\n\t        return;\n\t      }\n\t      event.preventDefault();\n\t      event.stopPropagation();\n\t      return delete this.dragged;\n\t    };\n\n\t    Draggable.prototype.touchend = function (event) {\n\t      this.ended(event);\n\t      return this.click(event);\n\t    };\n\n\t    return Draggable;\n\t  }();\n\n\t  Gridly = function (win) {\n\t    Gridly.settings = {\n\t      base: 60,\n\t      gutter: 20,\n\t      columns: 12,\n\t      draggable: {\n\t        zIndex: 800,\n\t        selector: '> *'\n\t      },\n\t      responsive: false\n\t    };\n\n\t    Gridly.gridly = function ($el, options) {\n\t      var data;\n\t      if (options == null) {\n\t        options = {};\n\t      }\n\t      data = $el.data('_gridly');\n\t      if (!data) {\n\t        data = new Gridly($el, options);\n\t        $el.data('_gridly', data);\n\t      }\n\t      return data;\n\t    };\n\n\t    function Gridly($el, settings) {\n\t      if (settings == null) {\n\t        settings = {};\n\t      }\n\t      this.optimize = __bind(this.optimize, this);\n\t      this.layout = __bind(this.layout, this);\n\t      this.structure = __bind(this.structure, this);\n\t      this.position = __bind(this.position, this);\n\t      this.size = __bind(this.size, this);\n\t      this.draggingMoved = __bind(this.draggingMoved, this);\n\t      this.draggingEnded = __bind(this.draggingEnded, this);\n\t      this.draggingBegan = __bind(this.draggingBegan, this);\n\t      this.$sorted = __bind(this.$sorted, this);\n\t      this.draggable = __bind(this.draggable, this);\n\t      this.compare = __bind(this.compare, this);\n\t      this.$ = __bind(this.$, this);\n\t      this.reordinalize = __bind(this.reordinalize, this);\n\t      this.ordinalize = __bind(this.ordinalize, this);\n\t      this.$el = $el;\n\t      this.settings = $.extend({}, Gridly.settings, settings);\n\t      this.config = {};\n\t      if (this.settings.responsive == true || this.settings.columns == undefined || !$.isNumeric(this.settings.columns)) {\n\t        this.config.columns = Math.floor($el.width() / (this.settings.gutter + this.settings.base));\n\t        this.config.columns = this.config.columns < 2 ? 2 : this.config.columns;\n\n\t        $(win).resize(function () {\n\t          var data = $el.data('_gridly');\n\t          if (!!data) {\n\t            data.config.columns = Math.floor($el.width() / (data.settings.gutter + data.settings.base));\n\t            data.config.columns = data.config.columns < 2 ? 2 : data.config.columns;\n\t            setTimeout(data.layout, 0);\n\t          }\n\t        });\n\t      } else {\n\t        this.config.columns = this.settings.columns;\n\t      }\n\n\t      this.ordinalize(this.$('> *'));\n\t      if (this.settings.draggable !== false) {\n\t        this.draggable();\n\t      }\n\t      return this;\n\t    }\n\n\t    Gridly.prototype.ordinalize = function ($elements) {\n\t      var $element, i, _i, _ref, _results;\n\t      _results = [];\n\t      for (i = _i = 0, _ref = $elements.length; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n\t        $element = $($elements[i]);\n\t        _results.push($element.data('position', i));\n\t      }\n\t      return _results;\n\t    };\n\n\t    Gridly.prototype.reordinalize = function ($element, position) {\n\t      return $element.data('position', position);\n\t    };\n\n\t    Gridly.prototype.$ = function (selector) {\n\t      return this.$el.find(selector);\n\t    };\n\n\t    Gridly.prototype.compare = function (d, s) {\n\t      if (d.y > s.y + s.h) {\n\t        return +1;\n\t      }\n\t      if (s.y > d.y + d.h) {\n\t        return -1;\n\t      }\n\t      if (d.x + d.w / 2 > s.x + s.w / 2) {\n\t        return +1;\n\t      }\n\t      if (s.x + s.w / 2 > d.x + d.w / 2) {\n\t        return -1;\n\t      }\n\t      return 0;\n\t    };\n\n\t    Gridly.prototype.draggable = function (method) {\n\t      if (this._draggable == null) {\n\t        this._draggable = new Draggable(this.$el, this.settings.draggable.selector, {\n\t          began: this.draggingBegan,\n\t          ended: this.draggingEnded,\n\t          moved: this.draggingMoved\n\t        });\n\t      }\n\t      if (method != null) {\n\t        return this._draggable[method]();\n\t      }\n\t    };\n\n\t    Gridly.prototype.$sorted = function ($elements) {\n\t      return ($elements || this.$('> *')).sort(function (a, b) {\n\t        var $a, $b, aPosition, aPositionInt, bPosition, bPositionInt;\n\t        $a = $(a);\n\t        $b = $(b);\n\t        aPosition = $a.data('position');\n\t        bPosition = $b.data('position');\n\t        aPositionInt = parseInt(aPosition);\n\t        bPositionInt = parseInt(bPosition);\n\t        if (aPosition != null && bPosition == null) {\n\t          return -1;\n\t        }\n\t        if (bPosition != null && aPosition == null) {\n\t          return +1;\n\t        }\n\t        if (!aPosition && !bPosition && $a.index() < $b.index()) {\n\t          return -1;\n\t        }\n\t        if (!bPosition && !aPosition && $b.index() < $a.index()) {\n\t          return +1;\n\t        }\n\t        if (aPositionInt < bPositionInt) {\n\t          return -1;\n\t        }\n\t        if (bPositionInt < aPositionInt) {\n\t          return +1;\n\t        }\n\t        return 0;\n\t      });\n\t    };\n\n\t    Gridly.prototype.draggingBegan = function (event) {\n\t      var $elements, _ref, _ref1;\n\t      $elements = this.$sorted();\n\t      this.ordinalize($elements);\n\t      setTimeout(this.layout, 0);\n\t      return (_ref = this.settings) != null ? (_ref1 = _ref.callbacks) != null ? typeof _ref1.reordering === \"function\" ? _ref1.reordering($elements) : void 0 : void 0 : void 0;\n\t    };\n\n\t    Gridly.prototype.draggingEnded = function (event) {\n\t      var $elements, _ref, _ref1;\n\t      $elements = this.$sorted();\n\t      this.ordinalize($elements);\n\t      setTimeout(this.layout, 0);\n\t      return (_ref = this.settings) != null ? (_ref1 = _ref.callbacks) != null ? typeof _ref1.reordered === \"function\" ? _ref1.reordered($elements) : void 0 : void 0 : void 0;\n\t    };\n\n\t    Gridly.prototype.draggingMoved = function (event) {\n\t      var $dragging, $elements, element, i, index, original, positions, _i, _j, _len, _ref, _ref1, _ref2;\n\t      $dragging = $(event.target).closest(this.$(this.settings.draggable.selector));\n\t      $elements = this.$sorted(this.$(this.settings.draggable.selector));\n\t      positions = this.structure($elements).positions;\n\t      original = index = $dragging.data('position');\n\t      _ref = positions.filter(function (position) {\n\t        return position.$element.is($dragging);\n\t      });\n\t      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n\t        element = _ref[_i];\n\t        element.x = $dragging.position().left;\n\t        element.y = $dragging.position().top;\n\t        element.w = $dragging.data('width') || $dragging.width();\n\t        element.h = $dragging.data('height') || $dragging.height();\n\t      }\n\t      positions.sort(this.compare);\n\t      $elements = positions.map(function (position) {\n\t        return position.$element;\n\t      });\n\t      $elements = (((_ref1 = this.settings.callbacks) != null ? _ref1.optimize : void 0) || this.optimize)($elements);\n\t      for (i = _j = 0, _ref2 = $elements.length; 0 <= _ref2 ? _j < _ref2 : _j > _ref2; i = 0 <= _ref2 ? ++_j : --_j) {\n\t        this.reordinalize($($elements[i]), i);\n\t      }\n\t      return this.layout();\n\t    };\n\n\t    Gridly.prototype.size = function ($element) {\n\t      return (($element.data('width') || $element.width()) + this.settings.gutter) / (this.settings.base + this.settings.gutter);\n\t    };\n\n\t    Gridly.prototype.position = function ($element, columns) {\n\t      var column, height, i, max, size, _i, _j, _ref, _ref1;\n\t      size = this.size($element);\n\t      height = Infinity;\n\t      column = 0;\n\t      for (i = _i = 0, _ref = columns.length - size; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n\t        max = Math.max.apply(Math, columns.slice(i, i + size));\n\t        if (max < height) {\n\t          height = max;\n\t          column = i;\n\t        }\n\t      }\n\t      for (i = _j = column, _ref1 = column + size; column <= _ref1 ? _j < _ref1 : _j > _ref1; i = column <= _ref1 ? ++_j : --_j) {\n\t        columns[i] = height + ($element.data('height') || $element.height()) + this.settings.gutter;\n\t      }\n\t      return {\n\t        x: column * (this.settings.base + this.settings.gutter),\n\t        y: height\n\t      };\n\t    };\n\n\t    Gridly.prototype.structure = function ($elements) {\n\t      var $element, columns, i, index, position, positions, _i, _ref;\n\t      if ($elements == null) {\n\t        $elements = this.$sorted();\n\t      }\n\t      positions = [];\n\t      columns = function () {\n\t        var _i, _ref, _results;\n\t        _results = [];\n\t        for (i = _i = 0, _ref = this.config.columns; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n\t          _results.push(0);\n\t        }\n\t        return _results;\n\t      }.call(this);\n\t      for (index = _i = 0, _ref = $elements.length; 0 <= _ref ? _i < _ref : _i > _ref; index = 0 <= _ref ? ++_i : --_i) {\n\t        $element = $($elements[index]);\n\t        position = this.position($element, columns);\n\t        positions.push({\n\t          x: position.x,\n\t          y: position.y,\n\t          w: $element.data('width') || $element.width(),\n\t          h: $element.data('height') || $element.height(),\n\t          $element: $element\n\t        });\n\t      }\n\t      return {\n\t        height: Math.max.apply(Math, columns),\n\t        positions: positions\n\t      };\n\t    };\n\n\t    Gridly.prototype.layout = function () {\n\t      var $element, $elements, index, position, structure, _i, _ref, _ref1;\n\t      $elements = (((_ref = this.settings.callbacks) != null ? _ref.optimize : void 0) || this.optimize)(this.$sorted());\n\t      structure = this.structure($elements);\n\t      for (index = _i = 0, _ref1 = $elements.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; index = 0 <= _ref1 ? ++_i : --_i) {\n\t        $element = $($elements[index]);\n\t        position = structure.positions[index];\n\t        if ($element.is('.dragging')) {\n\t          continue;\n\t        }\n\t        $element.css({\n\t          position: 'absolute',\n\t          left: position.x,\n\t          top: position.y\n\t        });\n\t      }\n\t      return this.$el.css({\n\t        height: structure.height\n\t      });\n\t    };\n\n\t    Gridly.prototype.optimize = function (originals) {\n\t      var columns, index, results, _i, _ref;\n\t      results = [];\n\t      columns = 0;\n\t      while (originals.length > 0) {\n\t        if (columns === this.config.columns) {\n\t          columns = 0;\n\t        }\n\t        index = 0;\n\t        for (index = _i = 0, _ref = originals.length; 0 <= _ref ? _i < _ref : _i > _ref; index = 0 <= _ref ? ++_i : --_i) {\n\t          if (columns + this.size($(originals[index])) <= this.config.columns) {\n\t            break;\n\t          }\n\t        }\n\t        if (index === originals.length) {\n\t          index = 0;\n\t          columns = 0;\n\t        }\n\t        columns += this.size($(originals[index]));\n\t        results.push(originals.splice(index, 1)[0]);\n\t      }\n\t      return results;\n\t    };\n\n\t    return Gridly;\n\t  }(window);\n\n\t  $.fn.extend({\n\t    gridly: function gridly() {\n\t      var option, parameters;\n\t      option = arguments[0], parameters = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n\t      if (option == null) {\n\t        option = {};\n\t      }\n\t      return this.each(function () {\n\t        var $this, action, options;\n\t        $this = $(this);\n\t        options = $.extend({}, $.fn.gridly.defaults, (typeof option === 'undefined' ? 'undefined' : _typeof(option)) === \"object\" && option);\n\t        action = typeof option === \"string\" ? option : option.action;\n\t        if (action == null) {\n\t          action = \"layout\";\n\t        }\n\t        return Gridly.gridly($this, options)[action](parameters);\n\t      });\n\t    }\n\t  });\n\t}).call(undefined);\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    var angular = __webpack_require__(3).ng;\n\t    var $ = window.jQuery;\n\n\t    // Data shared between controllers\n\t    // @ngInject\n\t    exports.SharedData = function () {\n\t        return {\n\t            accountIds: [],\n\t            categories: [],\n\t            selectedAccountId: null,\n\t            budgetEditMode: false\n\t        };\n\t    };\n\n\t    // @ngInject\n\t    exports.BudgetsManager = function (BudgetsResource, Budget, SharedData, AlertsManager, lpWidget, $timeout, lpCoreUtils, lpCoreBus) {\n\t        var loadingInd;\n\t        var budgets;\n\t        var budgetTemplate = new Budget({ id: 'new', categoryIds: [], accountIds: [] });\n\n\t        var loading = function loading() {\n\t            return loadingInd;\n\t        };\n\t        var getBudgets = function getBudgets() {\n\t            return budgets;\n\t        };\n\n\t        var loadBudgets = function loadBudgets(accountIds) {\n\t            return new BudgetsResource({ accountIds: accountIds }).get().$promise;\n\t        };\n\n\t        var resolveCurrency = function resolveCurrency(budget) {\n\t            //TODO: Change to call actual base system currency\n\t            var account = SharedData.accountIds[budget.accountIds[0]];\n\t            if (account !== undefined) {\n\t                return SharedData.accountIds[budget.accountIds[0]].currency;\n\t            } else {\n\t                return null;\n\t            }\n\t        };\n\n\t        var size = function size(budget) {\n\t            if (budget.id === 'new') {\n\t                return 'small';\n\t            }\n\t            var budgetCopy = angular.copy(budgets);\n\t            var sortedBudgets = budgetCopy.sort(function (b1, b2) {\n\t                return b2.amount > b1.amount ? 1 : -1;\n\t            });\n\t            var sortedBudgetsSize = sortedBudgets.length - 1; // remove fake ('new') budget\n\t            var numOfLarge = Math.ceil(sortedBudgetsSize * 0.33);\n\t            var numOfMedium = Math.ceil((sortedBudgetsSize - numOfLarge) * 0.5);\n\t            var ids = sortedBudgets.map(function (currentBudget) {\n\t                return currentBudget.id;\n\t            });\n\t            ids.splice(ids.indexOf('new'), 1);\n\n\t            var budgetIndex = ids.indexOf(budget.id);\n\t            if (budgetIndex < numOfLarge) {\n\t                return 'large';\n\t            } else if (budgetIndex < numOfMedium + numOfLarge) {\n\t                return 'medium';\n\t            } else {\n\t                return 'small';\n\t            }\n\t        };\n\n\t        /*\n\t         * Add budget modifications here if need be\n\t         */\n\t        var postprocess = function postprocess(rawBudgets) {\n\t            var processedBudgets = [];\n\t            lpCoreUtils.forEach(rawBudgets, function (value, key) {\n\t                var budget = new Budget(value);\n\t                budget.currency = resolveCurrency(budget);\n\t                budget.size = size(budget);\n\t                processedBudgets.push(budget);\n\t            });\n\t            return processedBudgets.sort(function (b1, b2) {\n\t                return b2.spentPercentage() > b1.spentPercentage() ? 1 : -1;\n\t            });\n\t        };\n\n\t        var changeOrder = function changeOrder(array, oldIndex, newIndex) {\n\t            return array.splice(newIndex, 0, array.splice(oldIndex, 1)[0]);\n\t        };\n\n\t        var order = function order(list) {\n\t            var savedOrder = lpWidget.getPreference('budgetOrder').split(',');\n\n\t            lpCoreUtils.forEach(savedOrder, function (budgetId, index) {\n\t                var oldIndex = list.map(function (budget) {\n\t                    return budget.id;\n\t                }).indexOf(budgetId);\n\t                changeOrder(list, oldIndex, index);\n\t            });\n\n\t            return list;\n\t        };\n\n\t        var load = function load(accountIds) {\n\t            loadingInd = true;\n\t            loadBudgets(accountIds).then(function (data) {\n\t                budgets = data;\n\t                budgets.push(budgetTemplate);\n\t                budgets = postprocess(data);\n\t                budgets = order(budgets);\n\t                loadingInd = false;\n\t            });\n\t        };\n\n\t        var calculateBudgetSizes = function calculateBudgetSizes() {\n\t            lpCoreUtils.forEach(budgets, function (budget, key) {\n\t                budget.size = size(budget);\n\t            });\n\t        };\n\n\t        var create = function create(formData) {\n\t            var budget = new Budget(formData);\n\t            new BudgetsResource().create(budget, function (success) {\n\t                budget.id = success.id;\n\t                budget.newItem = true;\n\t                budget.currency = resolveCurrency(budget);\n\t                budget.spent = 0;\n\n\t                // Add to budget list if created budget belongs to selected account\n\t                if (SharedData.selectedAccountId === null || budget.accountIds.indexOf(SharedData.selectedAccountId) !== -1) {\n\t                    budgets.push(budget);\n\t                    calculateBudgetSizes();\n\t                    $('.gridly').gridly('layout');\n\t                }\n\t            }, function (error) {\n\t                AlertsManager.push('danger', 'budgetCreationFailed');\n\t            });\n\t        };\n\n\t        var update = function update(budget) {\n\t            return new BudgetsResource().update(budget, function (success) {\n\t                calculateBudgetSizes();\n\t                lpCoreBus.publish('launchpad-retail.budgets.reloadBudgets');\n\t            }, function (error) {\n\t                AlertsManager.push('danger', 'budgetUpdateFailed');\n\t            });\n\t        };\n\n\t        var remove = function remove(budget) {\n\t            budget.processing = true;\n\t            new BudgetsResource().remove({ budgetId: budget.id }, function (success) {\n\t                budget.processing = false;\n\n\t                var budgetIds = budgets.map(function (curentBudget) {\n\t                    return curentBudget.id;\n\t                });\n\t                var index = budgetIds.indexOf(budget.id);\n\t                if (index > -1) {\n\t                    budgets.splice(index, 1);\n\t                }\n\n\t                calculateBudgetSizes();\n\n\t                lpCoreBus.publish('launchpad-retail.budgets.reloadBudgets');\n\t            }, function (error) {\n\t                budget.processing = false;\n\t                AlertsManager.push('danger', 'budgetRemoveFailed');\n\t            });\n\t        };\n\n\t        //Public API\n\t        return {\n\t            loading: loading,\n\t            budgets: getBudgets,\n\t            budgetTemplate: budgetTemplate,\n\t            loadAll: load,\n\t            createBudget: create,\n\t            updateBudget: update,\n\t            removeBudget: remove,\n\t            resolveCurrency: resolveCurrency,\n\t            size: size\n\t        };\n\t    };\n\n\t    // @ngInject\n\t    exports.Budget = function (BudgetsResource, SharedData) {\n\n\t        function Budget(data) {\n\t            var self = this instanceof Budget ? this : new Budget(data);\n\n\t            self.id = data.id;\n\t            self.partyId = data.partyId;\n\t            self.name = data.name;\n\t            self.spent = data.spent;\n\t            self.amount = data.amount;\n\t            self.accountIds = data.accountIds;\n\t            self.categoryIds = data.categoryIds;\n\t            self.currency = data.currency;\n\t            self.image = data.image;\n\t            self.dateFrom = new Date(data.dateFrom).getTime();\n\t            self.dateTo = new Date(data.dateTo).getTime();\n\n\t            return self;\n\t        }\n\n\t        Budget.prototype.exceeds = function () {\n\t            if (this.spent !== null && this.spent !== undefined) {\n\t                return this.spent > this.amount;\n\t            }\n\t            return false;\n\t        };\n\n\t        Budget.prototype.spentPercentage = function () {\n\t            var spentPercentage = 0;\n\t            if (this.spent !== null && this.spent !== undefined) {\n\t                spentPercentage = Math.floor(this.spent * 100 / this.amount);\n\t                if (spentPercentage > 100) {\n\t                    return 100;\n\t                }\n\t            }\n\t            return spentPercentage;\n\t        };\n\n\t        return Budget;\n\t    };\n\n\t    // @ngInject\n\t    exports.BudgetsResource = function ($resource, lpWidget, lpCoreUtils) {\n\t        return function (header) {\n\t            var endpoint = lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('budgetsDataSrc'));\n\t            return $resource(endpoint, null, {\n\t                'get': { method: 'GET', headers: header, isArray: true },\n\t                'create': { method: 'POST' },\n\t                'update': { method: 'PUT', params: { budgetId: '@id' } },\n\t                'remove': { method: 'DELETE', params: { budgetId: '@budgetId' } }\n\t            });\n\t        };\n\t    };\n\n\t    // @ngInject\n\t    exports.CategoriesResource = function ($resource, lpWidget, lpCoreUtils) {\n\t        return function (header) {\n\t            var endpoint = lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('categoriesDataSrc'));\n\t            return $resource(endpoint, null, {\n\t                'get': { method: 'GET', headers: header, isArray: true }\n\t            });\n\t        };\n\t    };\n\n\t    // @ngInject\n\t    exports.AccountsResource = function ($resource, lpWidget, lpCoreUtils) {\n\t        var endpoint = lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('accountsDataSrc'));\n\t        return $resource(endpoint, null, {\n\t            'get': { method: 'GET', isArray: true }\n\t        });\n\t    };\n\n\t    // @ngInject\n\t    exports.TransactionsResource = function ($http, $q, lpWidget, lpCoreUtils) {\n\t        var endpoint = lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('transactionsDataSrc'));\n\n\t        return {\n\t            get: function get(queryParams) {\n\t                var deferred = $q.defer();\n\n\t                $http.get(endpoint, { params: queryParams }).success(function (data, status, headers, config) {\n\t                    deferred.resolve(data === 'null' ? [] : data);\n\t                }).error(function (data, status, headers, config) {\n\t                    return [];\n\t                });\n\n\t                return deferred.promise;\n\t            }\n\t        };\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    var $ = window.jQuery;\n\n\t    /* Responsible for managing alert messages */\n\t    // @ngInject\n\t    exports.AlertsManager = function ($timeout, $resource, lpWidget) {\n\t        var ALERT_TIMEOUT = 3000; // Time in which message will auto-close if timeout = true\n\t        var alerts = [];\n\t        this.list = function () {\n\t            return alerts;\n\t        };\n\t        this.push = function (type, message, timeout) {\n\t            var self = this;\n\t            self.close(); // support only 1 alert for now\n\t            alerts.push({\n\t                type: type || 'danger',\n\t                msg: message\n\t            });\n\t            if (timeout !== false) {\n\t                $timeout(function () {\n\t                    self.close();\n\t                }, ALERT_TIMEOUT);\n\t            }\n\t        };\n\t        this.close = function () {\n\t            alerts = [];\n\t        };\n\t    };\n\n\t    // @ngInject\n\t    exports.Gridly = function ($timeout, lpWidget, lpCoreUtils) {\n\t        // Called before the drag and drop starts with the elements in their starting position.\n\t        var reordering = function reordering(elements) {};\n\n\t        var saveOrder = function saveOrder(elements) {\n\t            var items = [];\n\t            lpCoreUtils.forEach(elements, function (value, index) {\n\t                items.push(value.id);\n\t            });\n\t            lpWidget.setPreference('budgetOrder', items.toString());\n\t            lpWidget.model.save();\n\t            return items;\n\t        };\n\n\t        // Called after the drag and drop ends with the elements in their ending position.\n\t        var reordered = function reordered(elements) {\n\t            saveOrder(elements);\n\t        };\n\n\t        var refresh = function refresh() {\n\t            $timeout(function () {\n\t                // $('.gridly').resize();\n\t                $('.gridly').gridly('layout'); //Change to this if/when springboard has lazy initialization\n\t                refresh();\n\t            }, 300);\n\t        };\n\n\t        this.init = function () {\n\t            var $gridly = $('.gridly');\n\n\t            $gridly.gridly({\n\t                base: 140, // px The number of pixels for a single column span.\n\t                gutter: 20, // px The number of pixels between columns.\n\t                responsive: true,\n\t                callbacks: { reordering: reordering, reordered: reordered },\n\t                draggable: { zIndex: 800, selector: '.closed' }\n\t            });\n\n\t            if (lpCoreUtils.parseBoolean(lpWidget.getPreference('disableDragging'))) {\n\t                $gridly.gridly('draggable', 'off');\n\t            }\n\n\t            refresh();\n\t        };\n\n\t        // TODO: remove?\n\t        // gadgets.pubsub.subscribe(\"launchpad-retail.budgets.reloadBudgets\", function() {\n\t        //  $timeout(function() {\n\t        //      $('.gridly').gridly('layout');\n\t        //  }, 0);\n\t        // });\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    var $ = window.jQuery;\n\t    var angular = __webpack_require__(3).ng;\n\n\t    // @ngInject\n\t    exports.BudgetsController = function ($scope, lpWidget, i18nUtils, BudgetsManager, SharedData, Budget, AccountsResource, CategoriesResource, $timeout, Gridly, AlertsManager, lpCoreUtils, lpCoreBus) {\n\t        $scope.shared = SharedData;\n\t        $scope.partialsDir = lpCoreUtils.getWidgetBaseUrl(lpWidget) + '/partials'; // Used for template includes\n\t        $scope.alerts = AlertsManager;\n\t        $scope.budgetsManager = BudgetsManager;\n\n\t        AccountsResource.get(function (data) {\n\t            var accounts = {};\n\t            lpCoreUtils.forEach(data, function (value, key) {\n\t                accounts[value.id] = value;\n\t            });\n\t            $scope.load();\n\t            SharedData.accountIds = accounts;\n\t        }, function (error) {\n\t            AlertsManager.push('danger', 'noBankAccounts');\n\t        });\n\n\t        $scope.load = function (accountIds) {\n\t            BudgetsManager.loadAll(accountIds);\n\t        };\n\n\t        $scope.toggleEditMode = function () {\n\t            this.shared.budgetEditMode = !this.shared.budgetEditMode;\n\t            lpCoreBus.publish('launchpad-retail.budgets.closeBudgetEditing');\n\t        };\n\n\t        this.loadCategories = function () {\n\t            new CategoriesResource({ accountIds: [SharedData.selectedAccountId] }).get(function (data) {\n\t                SharedData.categories = data;\n\t            }, function (error) {\n\t                AlertsManager.push('danger', 'noCategories');\n\t                SharedData.categories = [];\n\t            });\n\t        };\n\n\t        // Listen to account selection change events\n\t        lpCoreBus.subscribe('launchpad-retail.accountSelected', function (params) {\n\t            $scope.shared.selectedAccountId = params.accountId;\n\t            $scope.budgetsManager.budgetTemplate.accountIds = params.accountId;\n\t            $scope.load(params.accountId);\n\t        });\n\n\t        this.loadCategories();\n\n\t        Gridly.init();\n\n\t        // Since SpringBoard does not support lazyloading this is needed to adjust\n\t        // Gridly width size\n\t        var springboardWidth = $('.lp-springboard-container').width();\n\t        if (springboardWidth !== null) {\n\t            $('.gridly').width(springboardWidth);\n\t            $('.gridly').resize();\n\t        }\n\t    };\n\n\t    // @ngInject\n\t    exports.BudgetEditController = function ($scope, $timeout, $q, BudgetsManager, SharedData, lpCoreUtils) {\n\n\t        $scope.budgetImages = ['shopping', 'food', 'coffee', 'house', 'car', 'drinks', 'phone', 'bag', 'trip'];\n\n\t        $scope.init = function () {\n\t            $scope.goToWizardStep(1);\n\t            $scope.form = angular.copy($scope.budget);\n\t            $scope.categories = angular.copy(SharedData.categories);\n\t            $scope.error = false;\n\t            if (SharedData.selectedAccountId !== null) {\n\t                $scope.form.accountIds = [SharedData.selectedAccountId];\n\t            }\n\t        };\n\n\t        /* Wizard navigation */\n\t        $scope.next = function (event) {\n\t            if ($scope.getActiveWizardStep() === 1) {\n\t                if ($scope.form.categoryIds.length === 0) {\n\t                    $scope.error = true;\n\t                } else {\n\t                    $scope.error = false;\n\t                    $scope.wizardNextStep();\n\t                    $timeout(function () {\n\t                        $('#amount').focus();\n\t                    }, 0);\n\t                }\n\t            } else if ($scope.getActiveWizardStep() === 2) {\n\t                if ($scope.form.amount === undefined || $scope.form.amount === null || $scope.form.amount === 0) {\n\t                    $scope.error = true;\n\t                } else {\n\t                    $scope.error = false;\n\t                    $scope.wizardNextStep();\n\t                    $timeout(function () {\n\t                        $('#name').focus();\n\t                    }, 0);\n\t                }\n\t            } else if ($scope.getActiveWizardStep() === 3) {\n\t                if ($scope.form.name === undefined || $scope.form.name === null || $scope.form.name === '') {\n\t                    $scope.error = true;\n\t                } else {\n\t                    $scope.error = false;\n\t                    $scope.save(event);\n\t                }\n\t            }\n\t        };\n\n\t        $scope.back = function (event) {\n\t            $scope.error = null;\n\t            if ($scope.getActiveWizardStep() === 1) {\n\t                $scope.close(event);\n\t            }\n\t            $scope.wizardPreviousStep();\n\t        };\n\n\t        $scope.save = function (event) {\n\t            if ($scope.mode === 'new') {\n\t                if (SharedData.selectedAccountId === null) {\n\t                    var ids = [];\n\t                    for (var id in SharedData.accountIds) {\n\t                        ids.push(id);\n\t                    }$scope.form.accountIds = ids;\n\t                } else {\n\t                    $scope.form.accountIds = [SharedData.selectedAccountId];\n\t                }\n\t                BudgetsManager.createBudget($scope.form);\n\t            } else {\n\t                $scope.budget.processing = true;\n\t                angular.copy($scope.form, $scope.budget);\n\t                var $root = $scope.$root;\n\t                $q.all(BudgetsManager.updateBudget($scope.form)).then(function () {\n\t                    $scope.budget.processing = false;\n\t                    $root.$broadcast('launchpad-retail.budgets.size');\n\t                });\n\t            }\n\t            $scope.close(event);\n\t        };\n\n\t        $scope.selectCategory = function (category) {\n\t            category.selected = !category.selected;\n\t            if (category.selected) {\n\t                if ($scope.form.categoryIds.length === 0) {\n\t                    $scope.form.name = category.name;\n\t                }\n\t                $scope.form.categoryIds.push(category.id);\n\t            } else {\n\t                $scope.form.categoryIds.splice(lpCoreUtils.indexOf($scope.form.categoryIds, category.id), 1);\n\t            }\n\t        };\n\n\t        $scope.isCategorySelected = function (category) {\n\t            if (category.selected === undefined) {\n\t                category.selected = lpCoreUtils.indexOf($scope.form.categoryIds, category.id) > -1;\n\t            }\n\t            return category.selected;\n\t        };\n\n\t        $scope.chooseImage = function (image) {\n\t            $scope.form.image = image;\n\t        };\n\n\t        $timeout(function () {\n\t            $scope.init();\n\t        }, 0);\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    var $ = window.jQuery;\n\n\t    // @ngInject\n\t    exports.budget = function (BudgetsManager, $timeout, SharedData, TransactionsResource, AlertsManager, widget, lpCoreUtils, lpCoreBus) {\n\t        return {\n\t            restrict: 'E',\n\t            replace: true,\n\t            scope: {\n\t                budget: '='\n\t            },\n\t            templateUrl: lpCoreUtils.getWidgetBaseUrl(widget) + '/partials/budget.html',\n\t            // @ngInject\n\t            controller: function controller($scope, CategoriesResource, $q) {\n\t                $scope.shared = SharedData;\n\t                $scope.partialsDir = lpCoreUtils.getWidgetBaseUrl(widget) + '/partials'; // Used for template includes\n\t                $scope.error = false;\n\n\t                this.loadTransactions = function () {\n\t                    $scope.transactions = [];\n\t                    $scope.budget.processing = true;\n\n\t                    var queryParams = {\n\t                        accountIds: $scope.budget.accountIds.toString(),\n\t                        categoryIds: $scope.budget.categoryIds.toString()\n\t                    };\n\n\t                    if ($scope.budget.dateFrom) {\n\t                        queryParams.df = $scope.budget.dateFrom;\n\t                    }\n\t                    if ($scope.budget.dateTo) {\n\t                        queryParams.dt = $scope.budget.dateFrom;\n\t                    }\n\n\t                    TransactionsResource.get(queryParams).then(function (data) {\n\t                        lpCoreUtils.forEach(data, function (value, index) {\n\t                            var categoryColor = lpCoreUtils.result(lpCoreUtils.find(SharedData.categories, function (category) {\n\t                                return category.id === value.categoryId;\n\t                            }), 'color');\n\n\t                            $scope.transactions.push({\n\t                                color: categoryColor,\n\t                                categoryId: value.categoryId,\n\t                                title: value.transactionType,\n\t                                amount: value.transactionAmount,\n\t                                currency: value.transactionCurrency\n\t                            });\n\t                        });\n\t                        $scope.budget.processing = false;\n\t                    }, function (error) {\n\t                        AlertsManager.push('danger', 'budgetGetTransactionsFailed');\n\t                        $scope.budget.processing = false;\n\t                    });\n\t                };\n\n\t                $scope.remove = function (event) {\n\t                    event.preventDefault();\n\t                    event.stopPropagation();\n\t                    BudgetsManager.removeBudget($scope.budget);\n\t                };\n\n\t                $scope.size = function () {\n\t                    return BudgetsManager.size($scope.budget);\n\t                };\n\t            },\n\t            link: function link(scope, elem, attrs, controller) {\n\t                scope.mode = scope.budget.id === 'new' ? 'new' : 'view';\n\t                scope.currentMode = scope.mode;\n\n\t                // Click on gridly tile\n\t                $(document).on('click', '.gridly .brick#' + scope.budget.id + '.closed', function (event) {\n\t                    scope.$apply(function () {\n\t                        scope.openBudget();\n\t                    });\n\t                });\n\n\t                scope.$on('launchpad-retail.budgets.size', function () {\n\t                    setTimeout(function () {\n\t                        resize(elem);\n\t                    }, 100);\n\t                });\n\n\t                var resize = function resize(el) {\n\t                    var valueX, valueY;\n\t                    if (el.hasClass('small')) {\n\t                        valueX = 140;valueY = 140;\n\t                    }\n\t                    if (el.hasClass('medium')) {\n\t                        valueX = 300;valueY = 140;\n\t                    }\n\t                    if (el.hasClass('large') || el.hasClass('edit') || scope.currentMode === 'inspect') {\n\t                        valueX = 300;valueY = 300;\n\t                    }\n\t                    el.data('width', valueX);\n\t                    el.data('height', valueY);\n\t                    lpCoreBus.publish('launchpad-retail.budgets.reloadBudgets');\n\t                };\n\n\t                var editBudget = function editBudget() {\n\t                    elem.addClass('edit');\n\t                    resize(elem);\n\t                    $timeout(function () {\n\t                        scope.currentMode = 'edit';\n\t                    }, 300);\n\t                };\n\n\t                scope.openBudget = function () {\n\t                    if (scope.currentMode === 'view' && SharedData.budgetEditMode || scope.currentMode === 'new') {\n\t                        // Switch to -> Create/Update view\n\t                        lpCoreBus.publish('launchpad-retail.budgets.closeBudgetEditing');\n\t                        editBudget();\n\t                    } else if (!SharedData.budgetEditMode && scope.currentMode === 'view') {\n\t                        // Switch to -> Inspect view\n\t                        controller.loadTransactions();\n\t                        lpCoreBus.publish('launchpad-retail.budgets.closeBudgetEditing');\n\t                        elem.addClass('edit');\n\t                        scope.currentMode = 'inspect';\n\t                        resize(elem);\n\t                    }\n\t                };\n\n\t                scope.close = function (event) {\n\t                    if (event !== undefined) {\n\t                        event.preventDefault();\n\t                        event.stopPropagation();\n\t                    }\n\t                    var brick = $('.gridly .brick#' + scope.budget.id + '.edit');\n\t                    if (brick !== null) {\n\t                        scope.currentMode = scope.mode; // Reset mode to original\n\t                        brick.removeClass('edit');\n\t                        resize(brick);\n\t                    }\n\t                };\n\n\t                lpCoreBus.subscribe('launchpad-retail.budgets.closeBudgetEditing', function () {\n\t                    scope.close();\n\t                });\n\t            }\n\t        };\n\t    };\n\n\t    // @ngInject\n\t    exports.reloadBudgets = function (lpCoreBus) {\n\t        return function (scope, element, attrs) {\n\t            if (scope.$last) {\n\t                lpCoreBus.publish('launchpad-retail.budgets.reloadBudgets');\n\t            }\n\t        };\n\t    };\n\n\t    // @ngInject\n\t    exports.amountPicker = function ($interval, widget, lpCoreUtils) {\n\t        return {\n\t            restrict: 'E',\n\t            scope: { model: '=value' },\n\t            templateUrl: lpCoreUtils.getWidgetBaseUrl(widget) + '/partials/amount-picker.html',\n\t            link: function link(scope, elem, attrs) {\n\n\t                var promise;\n\t                //TODO: change to use class and elem. find\n\t                $(document).on('touchstart', '#increase-control', function (event) {\n\t                    scope.increase();\n\t                });\n\t                $(document).on('touchend touchcancel', '#increase-control', function (event) {\n\t                    scope.cancel();\n\t                });\n\n\t                $(document).on('touchstart', '#decrease-control', function (event) {\n\t                    scope.decrease();\n\t                });\n\n\t                $(document).on('touchend touchcancel', '#decrease-control', function (event) {\n\t                    scope.cancel();\n\t                });\n\n\t                scope.increase = function () {\n\t                    if (scope.model === undefined) {\n\t                        scope.model = 0;\n\t                    }\n\t                    promise = $interval(function () {\n\t                        scope.model = scope.model + 1;\n\t                    }, 50);\n\t                };\n\n\t                scope.decrease = function () {\n\t                    promise = $interval(function () {\n\t                        scope.model = scope.model - 1;\n\t                    }, 50);\n\t                };\n\n\t                scope.cancel = function () {\n\t                    $interval.cancel(promise);\n\t                };\n\t            }\n\t        };\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** scripts/main.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9c41c81d5aaa09c2ebbd\n **/","define(function(require, exports, module) {\n    'use strict';\n\n    module.name = 'widgets-budgets';\n\n    var base = require('base');\n    var core = require('core');\n    var ui = require('ui');\n    var gridly = require('./components/gridly/scripts/main');\n\n    var deps = [\n        core.name,\n        ui.name,\n        gridly.name\n    ];\n\n    // @ngInject\n    function run(lpCoreBus, lpWidget) {\n        lpCoreBus.publish('cxp.item.loaded', {id: lpWidget.model.name});\n    }\n\n    module.exports = base.createModule(module.name, deps)\n        .factory( require('./factories') )\n        .service( require('./services') )\n        .controller( require('./controllers') )\n        .directive( require('./directives') )\n      .run(run);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/main.js\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"base\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"core\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ui\"\n ** module id = 5\n ** module chunks = 0\n **/","define(function(require, exports, module) {\n    'use strict';\n\n    module.name = 'component.widget-budgets-gridly';\n    var base = require('base');\n    var deps = [];\n\n    require('./libs/jquery.gridly');\n\n    module.exports = base.createModule(module.name, deps);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/components/gridly/scripts/main.js\n **/","/*eslint-disable */\n// Generated by CoffeeScript 1.6.3\n/*\njQuery Gridly\nCopyright 2013 Kevin Sylvestre\n1.2.3\n*/\n\n\n(function() {\n  \"use strict\";\n  var $, Draggable, Gridly,\n    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },\n    __slice = [].slice;\n\n  $ = require('jquery');\n  Draggable = (function() {\n    function Draggable($container, selector, callbacks) {\n      this.touchend = __bind(this.touchend, this);\n      this.click = __bind(this.click, this);\n      this.moved = __bind(this.moved, this);\n      this.ended = __bind(this.ended, this);\n      this.began = __bind(this.began, this);\n      this.coordinate = __bind(this.coordinate, this);\n      this.off = __bind(this.off, this);\n      this.on = __bind(this.on, this);\n      this.toggle = __bind(this.toggle, this);\n      this.bind = __bind(this.bind, this);\n      this.$container = $container;\n      this.selector = selector;\n      this.callbacks = callbacks;\n      this.toggle();\n    }\n\n    Draggable.prototype.bind = function(method) {\n      if (method == null) {\n        method = 'on';\n      }\n      $(document)[method]('mousemove touchmove', this.moved);\n      return $(document)[method]('mouseup touchcancel', this.ended);\n    };\n\n    Draggable.prototype.toggle = function(method) {\n      if (method == null) {\n        method = 'on';\n      }\n      this.$container[method]('mousedown touchstart', this.selector, this.began);\n      this.$container[method]('touchend', this.selector, this.touchend);\n      return this.$container[method]('click', this.selector, this.click);\n    };\n\n    Draggable.prototype.on = function() {\n      return this.toggle('on');\n    };\n\n    Draggable.prototype.off = function() {\n      return this.toggle('off');\n    };\n\n    Draggable.prototype.coordinate = function(event) {\n      switch (event.type) {\n        case 'touchstart':\n        case 'touchmove':\n        case 'touchend':\n        case 'touchcancel':\n          return event.originalEvent.touches[0];\n        default:\n          return event;\n      }\n    };\n\n    Draggable.prototype.began = function(event) {\n      var _ref;\n      if (this.$target) {\n        return;\n      }\n      event.preventDefault();\n      event.stopPropagation();\n      this.bind('on');\n      this.$target = $(event.target).closest(this.$container.find(this.selector));\n      this.$target.addClass('dragging');\n      this.origin = {\n        x: this.coordinate(event).pageX - this.$target.position().left,\n        y: this.coordinate(event).pageY - this.$target.position().top\n      };\n      return (_ref = this.callbacks) != null ? typeof _ref.began === \"function\" ? _ref.began(event) : void 0 : void 0;\n    };\n\n    Draggable.prototype.ended = function(event) {\n      var _ref;\n      if (this.$target == null) {\n        return;\n      }\n      if (event.type !== 'touchend') {\n        event.preventDefault();\n        event.stopPropagation();\n      }\n      this.bind('off');\n      this.$target.removeClass('dragging');\n      delete this.$target;\n      delete this.origin;\n      return (_ref = this.callbacks) != null ? typeof _ref.ended === \"function\" ? _ref.ended(event) : void 0 : void 0;\n    };\n\n    Draggable.prototype.moved = function(event) {\n      var _ref;\n      if (this.$target == null) {\n        return;\n      }\n      event.preventDefault();\n      event.stopPropagation();\n      this.$target.css({\n        left: this.coordinate(event).pageX - this.origin.x,\n        top: this.coordinate(event).pageY - this.origin.y\n      });\n      this.dragged = this.$target;\n      return (_ref = this.callbacks) != null ? typeof _ref.moved === \"function\" ? _ref.moved(event) : void 0 : void 0;\n    };\n\n    Draggable.prototype.click = function(event) {\n      if (!this.dragged) {\n        return;\n      }\n      event.preventDefault();\n      event.stopPropagation();\n      return delete this.dragged;\n    };\n\n    Draggable.prototype.touchend = function(event) {\n      this.ended(event);\n      return this.click(event);\n    };\n\n    return Draggable;\n\n  })();\n\n  Gridly = (function(win) {\n    Gridly.settings = {\n      base: 60,\n      gutter: 20,\n    columns:12,\n      draggable: {\n        zIndex: 800,\n        selector: '> *'\n      },\n    responsive: false\n    };\n\n    Gridly.gridly = function($el, options) {\n      var data;\n      if (options == null) {\n        options = {};\n      }\n      data = $el.data('_gridly');\n      if (!data) {\n        data = new Gridly($el, options);\n        $el.data('_gridly', data);\n      }\n      return data;\n    };\n\n    function Gridly($el, settings) {\n      if (settings == null) {\n        settings = {};\n      }\n      this.optimize = __bind(this.optimize, this);\n      this.layout = __bind(this.layout, this);\n      this.structure = __bind(this.structure, this);\n      this.position = __bind(this.position, this);\n      this.size = __bind(this.size, this);\n      this.draggingMoved = __bind(this.draggingMoved, this);\n      this.draggingEnded = __bind(this.draggingEnded, this);\n      this.draggingBegan = __bind(this.draggingBegan, this);\n      this.$sorted = __bind(this.$sorted, this);\n      this.draggable = __bind(this.draggable, this);\n      this.compare = __bind(this.compare, this);\n      this.$ = __bind(this.$, this);\n      this.reordinalize = __bind(this.reordinalize, this);\n      this.ordinalize = __bind(this.ordinalize, this);\n      this.$el = $el;\n      this.settings = $.extend({}, Gridly.settings, settings);\n      this.config = {};\n      if (this.settings.responsive == true || this.settings.columns == undefined || !$.isNumeric(this.settings.columns)){\n          this.config.columns = Math.floor($el.width() / (this.settings.gutter + this.settings.base));\n          this.config.columns = this.config.columns < 2 ? 2 : this.config.columns;\n\n          $(win).resize(function() {\n              var data = $el.data('_gridly');\n              if (!!data) {\n                data.config.columns = Math.floor($el.width() / (data.settings.gutter + data.settings.base));\n                data.config.columns = data.config.columns < 2 ? 2 : data.config.columns;\n                setTimeout(data.layout, 0);\n              }\n          });\n      } else {\n          this.config.columns = this.settings.columns;\n      }\n\n      this.ordinalize(this.$('> *'));\n      if (this.settings.draggable !== false) {\n          this.draggable();\n      }\n      return this;\n    }\n\n    Gridly.prototype.ordinalize = function($elements) {\n      var $element, i, _i, _ref, _results;\n      _results = [];\n      for (i = _i = 0, _ref = $elements.length; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n        $element = $($elements[i]);\n        _results.push($element.data('position', i));\n      }\n      return _results;\n    };\n\n    Gridly.prototype.reordinalize = function($element, position) {\n      return $element.data('position', position);\n    };\n\n    Gridly.prototype.$ = function(selector) {\n      return this.$el.find(selector);\n    };\n\n    Gridly.prototype.compare = function(d, s) {\n      if (d.y > s.y + s.h) {\n        return +1;\n      }\n      if (s.y > d.y + d.h) {\n        return -1;\n      }\n      if ((d.x + (d.w / 2)) > (s.x + (s.w / 2))) {\n        return +1;\n      }\n      if ((s.x + (s.w / 2)) > (d.x + (d.w / 2))) {\n        return -1;\n      }\n      return 0;\n    };\n\n    Gridly.prototype.draggable = function(method) {\n      if (this._draggable == null) {\n        this._draggable = new Draggable(this.$el, this.settings.draggable.selector, {\n          began: this.draggingBegan,\n          ended: this.draggingEnded,\n          moved: this.draggingMoved\n        });\n      }\n      if (method != null) {\n        return this._draggable[method]();\n      }\n    };\n\n    Gridly.prototype.$sorted = function($elements) {\n      return ($elements || this.$('> *')).sort(function(a, b) {\n        var $a, $b, aPosition, aPositionInt, bPosition, bPositionInt;\n        $a = $(a);\n        $b = $(b);\n        aPosition = $a.data('position');\n        bPosition = $b.data('position');\n        aPositionInt = parseInt(aPosition);\n        bPositionInt = parseInt(bPosition);\n        if ((aPosition != null) && (bPosition == null)) {\n          return -1;\n        }\n        if ((bPosition != null) && (aPosition == null)) {\n          return +1;\n        }\n        if (!aPosition && !bPosition && $a.index() < $b.index()) {\n          return -1;\n        }\n        if (!bPosition && !aPosition && $b.index() < $a.index()) {\n          return +1;\n        }\n        if (aPositionInt < bPositionInt) {\n          return -1;\n        }\n        if (bPositionInt < aPositionInt) {\n          return +1;\n        }\n        return 0;\n      });\n    };\n\n    Gridly.prototype.draggingBegan = function(event) {\n      var $elements, _ref, _ref1;\n      $elements = this.$sorted();\n      this.ordinalize($elements);\n      setTimeout(this.layout, 0);\n      return (_ref = this.settings) != null ? (_ref1 = _ref.callbacks) != null ? typeof _ref1.reordering === \"function\" ? _ref1.reordering($elements) : void 0 : void 0 : void 0;\n    };\n\n    Gridly.prototype.draggingEnded = function(event) {\n      var $elements, _ref, _ref1;\n      $elements = this.$sorted();\n      this.ordinalize($elements);\n      setTimeout(this.layout, 0);\n      return (_ref = this.settings) != null ? (_ref1 = _ref.callbacks) != null ? typeof _ref1.reordered === \"function\" ? _ref1.reordered($elements) : void 0 : void 0 : void 0;\n    };\n\n    Gridly.prototype.draggingMoved = function(event) {\n      var $dragging, $elements, element, i, index, original, positions, _i, _j, _len, _ref, _ref1, _ref2;\n      $dragging = $(event.target).closest(this.$(this.settings.draggable.selector));\n      $elements = this.$sorted(this.$(this.settings.draggable.selector));\n      positions = this.structure($elements).positions;\n      original = index = $dragging.data('position');\n      _ref = positions.filter(function(position) {\n        return position.$element.is($dragging);\n      });\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        element = _ref[_i];\n        element.x = $dragging.position().left;\n        element.y = $dragging.position().top;\n        element.w = $dragging.data('width') || $dragging.width();\n        element.h = $dragging.data('height') || $dragging.height();\n      }\n      positions.sort(this.compare);\n      $elements = positions.map(function(position) {\n        return position.$element;\n      });\n      $elements = (((_ref1 = this.settings.callbacks) != null ? _ref1.optimize : void 0) || this.optimize)($elements);\n      for (i = _j = 0, _ref2 = $elements.length; 0 <= _ref2 ? _j < _ref2 : _j > _ref2; i = 0 <= _ref2 ? ++_j : --_j) {\n        this.reordinalize($($elements[i]), i);\n      }\n      return this.layout();\n    };\n\n    Gridly.prototype.size = function($element) {\n      return (($element.data('width') || $element.width()) + this.settings.gutter) / (this.settings.base + this.settings.gutter);\n    };\n\n    Gridly.prototype.position = function($element, columns) {\n      var column, height, i, max, size, _i, _j, _ref, _ref1;\n      size = this.size($element);\n      height = Infinity;\n      column = 0;\n      for (i = _i = 0, _ref = columns.length - size; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {\n        max = Math.max.apply(Math, columns.slice(i, i + size));\n        if (max < height) {\n          height = max;\n          column = i;\n        }\n      }\n      for (i = _j = column, _ref1 = column + size; column <= _ref1 ? _j < _ref1 : _j > _ref1; i = column <= _ref1 ? ++_j : --_j) {\n        columns[i] = height + ($element.data('height') || $element.height()) + this.settings.gutter;\n      }\n      return {\n        x: column * (this.settings.base + this.settings.gutter),\n        y: height\n      };\n    };\n\n    Gridly.prototype.structure = function($elements) {\n      var $element, columns, i, index, position, positions, _i, _ref;\n      if ($elements == null) {\n        $elements = this.$sorted();\n      }\n      positions = [];\n      columns = (function() {\n        var _i, _ref, _results;\n        _results = [];\n        for (i = _i = 0, _ref = this.config.columns; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {\n          _results.push(0);\n        }\n        return _results;\n      }).call(this);\n      for (index = _i = 0, _ref = $elements.length; 0 <= _ref ? _i < _ref : _i > _ref; index = 0 <= _ref ? ++_i : --_i) {\n        $element = $($elements[index]);\n        position = this.position($element, columns);\n        positions.push({\n          x: position.x,\n          y: position.y,\n          w: $element.data('width') || $element.width(),\n          h: $element.data('height') || $element.height(),\n          $element: $element\n        });\n      }\n      return {\n        height: Math.max.apply(Math, columns),\n        positions: positions\n      };\n    };\n\n    Gridly.prototype.layout = function() {\n      var $element, $elements, index, position, structure, _i, _ref, _ref1;\n      $elements = (((_ref = this.settings.callbacks) != null ? _ref.optimize : void 0) || this.optimize)(this.$sorted());\n      structure = this.structure($elements);\n      for (index = _i = 0, _ref1 = $elements.length; 0 <= _ref1 ? _i < _ref1 : _i > _ref1; index = 0 <= _ref1 ? ++_i : --_i) {\n        $element = $($elements[index]);\n        position = structure.positions[index];\n        if ($element.is('.dragging')) {\n          continue;\n        }\n        $element.css({\n          position: 'absolute',\n          left: position.x,\n          top: position.y\n        });\n      }\n      return this.$el.css({\n        height: structure.height\n      });\n    };\n\n    Gridly.prototype.optimize = function(originals) {\n      var columns, index, results, _i, _ref;\n      results = [];\n      columns = 0;\n      while (originals.length > 0) {\n        if (columns === this.config.columns) {\n          columns = 0;\n        }\n        index = 0;\n        for (index = _i = 0, _ref = originals.length; 0 <= _ref ? _i < _ref : _i > _ref; index = 0 <= _ref ? ++_i : --_i) {\n          if (columns + this.size($(originals[index])) <= this.config.columns) {\n            break;\n          }\n        }\n        if (index === originals.length) {\n          index = 0;\n          columns = 0;\n        }\n        columns += this.size($(originals[index]));\n        results.push(originals.splice(index, 1)[0]);\n      }\n      return results;\n    };\n\n    return Gridly;\n\n  })(window);\n\n  $.fn.extend({\n    gridly: function() {\n      var option, parameters;\n      option = arguments[0], parameters = 2 <= arguments.length ? __slice.call(arguments, 1) : [];\n      if (option == null) {\n        option = {};\n      }\n      return this.each(function() {\n        var $this, action, options;\n        $this = $(this);\n        options = $.extend({}, $.fn.gridly.defaults, typeof option === \"object\" && option);\n        action = typeof option === \"string\" ? option : option.action;\n        if (action == null) {\n          action = \"layout\";\n        }\n        return Gridly.gridly($this, options)[action](parameters);\n      });\n    }\n  });\n\n}).call(this);\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/components/gridly/scripts/libs/jquery.gridly.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 8\n ** module chunks = 0\n **/","define(function(require, exports, module) {\n    'use strict';\n\n    var angular = require('base').ng;\n    var $ = window.jQuery;\n\n    // Data shared between controllers\n    // @ngInject\n    exports.SharedData = function() {\n        return {\n            accountIds: [],\n            categories: [],\n            selectedAccountId: null,\n            budgetEditMode: false\n        };\n    };\n\n    // @ngInject\n    exports.BudgetsManager = function(BudgetsResource, Budget, SharedData, AlertsManager, lpWidget, $timeout, lpCoreUtils, lpCoreBus) {\n        var loadingInd;\n        var budgets;\n        var budgetTemplate = new Budget({ id: 'new', categoryIds: [], accountIds: [] });\n\n        var loading = function() {\n            return loadingInd;\n        };\n        var getBudgets = function() {\n            return budgets;\n        };\n\n        var loadBudgets = function(accountIds) {\n            return new BudgetsResource({ accountIds: accountIds }).get().$promise;\n        };\n\n        var resolveCurrency = function(budget) {\n            //TODO: Change to call actual base system currency\n            var account = SharedData.accountIds[budget.accountIds[0]];\n            if (account !== undefined) {\n                return SharedData.accountIds[budget.accountIds[0]].currency;\n            } else {\n                return null;\n            }\n        };\n\n        var size = function(budget) {\n            if (budget.id === 'new') {\n                return 'small';\n            }\n            var budgetCopy = angular.copy(budgets);\n            var sortedBudgets = budgetCopy.sort(function(b1, b2) {\n                return b2.amount > b1.amount ? 1 : -1;\n            });\n            var sortedBudgetsSize = sortedBudgets.length - 1; // remove fake ('new') budget\n            var numOfLarge = Math.ceil(sortedBudgetsSize * 0.33);\n            var numOfMedium = Math.ceil((sortedBudgetsSize - numOfLarge) * 0.5);\n            var ids = sortedBudgets.map(function(currentBudget) {\n                return currentBudget.id;\n            });\n            ids.splice(ids.indexOf('new'), 1);\n\n            var budgetIndex = ids.indexOf(budget.id);\n            if (budgetIndex < numOfLarge) {\n                return 'large';\n            } else if (budgetIndex < numOfMedium + numOfLarge) {\n                return 'medium';\n            } else {\n                return 'small';\n            }\n        };\n\n        /*\n         * Add budget modifications here if need be\n         */\n        var postprocess = function(rawBudgets) {\n            var processedBudgets = [];\n            lpCoreUtils.forEach(rawBudgets, function(value, key) {\n                var budget = new Budget(value);\n                budget.currency = resolveCurrency(budget);\n                budget.size = size(budget);\n                processedBudgets.push(budget);\n            });\n            return processedBudgets.sort(function(b1, b2) {\n                return b2.spentPercentage() > b1.spentPercentage() ? 1 : -1;\n            });\n        };\n\n        var changeOrder = function(array, oldIndex, newIndex) {\n            return array.splice(newIndex, 0, array.splice(oldIndex, 1)[0]);\n        };\n\n        var order = function(list) {\n            var savedOrder = lpWidget.getPreference('budgetOrder').split(',');\n\n            lpCoreUtils.forEach(savedOrder, function(budgetId, index) {\n                var oldIndex = list.map(function(budget) { return budget.id; } ).indexOf(budgetId);\n                changeOrder(list, oldIndex, index);\n            });\n\n            return list;\n        };\n\n        var load = function(accountIds) {\n            loadingInd = true;\n            loadBudgets(accountIds).then(function(data) {\n                budgets = data;\n                budgets.push(budgetTemplate);\n                budgets = postprocess(data);\n                budgets = order(budgets);\n                loadingInd = false;\n            });\n        };\n\n        var calculateBudgetSizes = function() {\n            lpCoreUtils.forEach(budgets, function(budget, key) {\n                budget.size = size(budget);\n            });\n        };\n\n        var create = function(formData) {\n            var budget = new Budget(formData);\n            new BudgetsResource().create(budget,\n                function(success) {\n                    budget.id = success.id;\n                    budget.newItem = true;\n                    budget.currency = resolveCurrency(budget);\n                    budget.spent = 0;\n\n                    // Add to budget list if created budget belongs to selected account\n                    if (SharedData.selectedAccountId === null ||\n                        budget.accountIds.indexOf(SharedData.selectedAccountId) !== -1) {\n                            budgets.push(budget);\n                            calculateBudgetSizes();\n                            $('.gridly').gridly('layout');\n                    }\n                }, function(error) {\n                    AlertsManager.push('danger', 'budgetCreationFailed');\n                }\n            );\n        };\n\n        var update = function(budget) {\n            return new BudgetsResource().update(budget, function(success) {\n                calculateBudgetSizes();\n                lpCoreBus.publish('launchpad-retail.budgets.reloadBudgets');\n            }, function(error) {\n                AlertsManager.push('danger', 'budgetUpdateFailed');\n            });\n        };\n\n        var remove = function(budget) {\n            budget.processing = true;\n            new BudgetsResource().remove({ budgetId: budget.id }, function(success) {\n                budget.processing = false;\n\n                var budgetIds = budgets.map(function(curentBudget) {\n                    return curentBudget.id;\n                });\n                var index = budgetIds.indexOf(budget.id);\n                if(index > -1) {\n                    budgets.splice(index, 1);\n                }\n\n                calculateBudgetSizes();\n\n                lpCoreBus.publish('launchpad-retail.budgets.reloadBudgets');\n            }, function(error) {\n                budget.processing = false;\n                AlertsManager.push('danger', 'budgetRemoveFailed');\n            });\n        };\n\n        //Public API\n        return {\n            loading: loading,\n            budgets: getBudgets,\n            budgetTemplate: budgetTemplate,\n            loadAll: load,\n            createBudget: create,\n            updateBudget: update,\n            removeBudget: remove,\n            resolveCurrency: resolveCurrency,\n            size: size\n        };\n    };\n\n    // @ngInject\n    exports.Budget = function(BudgetsResource, SharedData) {\n\n            function Budget(data) {\n                var self = this instanceof Budget ? this : new Budget(data);\n\n                self.id = data.id;\n                self.partyId = data.partyId;\n                self.name = data.name;\n                self.spent = data.spent;\n                self.amount = data.amount;\n                self.accountIds = data.accountIds;\n                self.categoryIds = data.categoryIds;\n                self.currency = data.currency;\n                self.image = data.image;\n                self.dateFrom = new Date(data.dateFrom).getTime();\n                self.dateTo = new Date(data.dateTo).getTime();\n\n                return self;\n            }\n\n            Budget.prototype.exceeds = function() {\n                if (this.spent !== null && this.spent !== undefined) {\n                    return this.spent > this.amount;\n                }\n                return false;\n            };\n\n            Budget.prototype.spentPercentage = function() {\n                var spentPercentage = 0;\n                if (this.spent !== null && this.spent !== undefined) {\n                    spentPercentage = Math.floor(this.spent * 100 / this.amount);\n                    if (spentPercentage > 100) {\n                        return 100;\n                    }\n                }\n                return spentPercentage;\n            };\n\n            return Budget;\n    };\n\n    // @ngInject\n    exports.BudgetsResource = function($resource, lpWidget, lpCoreUtils) {\n        return function(header){\n            var endpoint = lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('budgetsDataSrc'));\n            return $resource(endpoint, null, {\n                'get': { method: 'GET', headers: header, isArray: true },\n                'create': { method: 'POST'},\n                'update': { method: 'PUT', params: { budgetId: '@id' }},\n                'remove': { method: 'DELETE', params: { budgetId: '@budgetId' }}\n            });\n        };\n    };\n\n    // @ngInject\n    exports.CategoriesResource = function($resource, lpWidget, lpCoreUtils) {\n        return function(header) {\n            var endpoint = lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('categoriesDataSrc'));\n            return $resource(endpoint, null, {\n                'get': { method: 'GET', headers: header, isArray: true }\n            });\n        };\n    };\n\n    // @ngInject\n    exports.AccountsResource = function($resource, lpWidget, lpCoreUtils) {\n        var endpoint = lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('accountsDataSrc'));\n        return $resource(endpoint, null, {\n            'get': { method: 'GET', isArray: true }\n        });\n    };\n\n    // @ngInject\n    exports.TransactionsResource = function($http, $q, lpWidget, lpCoreUtils) {\n        var endpoint = lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('transactionsDataSrc'));\n\n        return {\n            get: function(queryParams) {\n                var deferred = $q.defer();\n\n                $http.get(endpoint, {params: queryParams}).success(function(data, status, headers, config) {\n                    deferred.resolve(data === 'null' ? [] : data);\n                }).error(function(data, status, headers, config) {\n                    return [];\n                });\n\n                return deferred.promise;\n            }\n        };\n    };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/factories.js\n **/","define(function(require, exports, module) {\n    'use strict';\n\n    var $ = window.jQuery;\n\n    /* Responsible for managing alert messages */\n    // @ngInject\n    exports.AlertsManager = function($timeout, $resource, lpWidget) {\n        var ALERT_TIMEOUT = 3000; // Time in which message will auto-close if timeout = true\n        var alerts = [];\n        this.list = function() {\n            return alerts;\n        };\n        this.push = function(type, message, timeout) {\n            var self = this;\n            self.close(); // support only 1 alert for now\n            alerts.push({\n                type: type || 'danger',\n                msg: message\n            });\n            if (timeout !== false) {\n                $timeout(function() { self.close(); }, ALERT_TIMEOUT);\n            }\n        };\n        this.close = function() {\n            alerts = [];\n        };\n    };\n\n    // @ngInject\n    exports.Gridly = function($timeout, lpWidget, lpCoreUtils) {\n        // Called before the drag and drop starts with the elements in their starting position.\n        var reordering = function(elements) {\n        };\n\n        var saveOrder = function(elements) {\n            var items = [];\n            lpCoreUtils.forEach(elements, function(value, index) {\n                items.push(value.id);\n            });\n            lpWidget.setPreference('budgetOrder', items.toString());\n            lpWidget.model.save();\n            return items;\n        };\n\n        // Called after the drag and drop ends with the elements in their ending position.\n        var reordered = function(elements) {\n            saveOrder(elements);\n        };\n\n        var refresh = function() {\n            $timeout(function() {\n                // $('.gridly').resize();\n                $('.gridly').gridly('layout'); //Change to this if/when springboard has lazy initialization\n                refresh();\n            }, 300);\n        };\n\n        this.init = function() {\n            var $gridly = $('.gridly');\n\n            $gridly.gridly({\n                base: 140, // px The number of pixels for a single column span.\n                gutter: 20, // px The number of pixels between columns.\n                responsive: true,\n                callbacks: { reordering: reordering, reordered: reordered },\n                draggable: { zIndex: 800, selector: '.closed' }\n            });\n\n            if (lpCoreUtils.parseBoolean(lpWidget.getPreference('disableDragging'))) {\n                $gridly.gridly('draggable', 'off');\n            }\n\n            refresh();\n        };\n\n        // TODO: remove?\n        // gadgets.pubsub.subscribe(\"launchpad-retail.budgets.reloadBudgets\", function() {\n        //  $timeout(function() {\n        //      $('.gridly').gridly('layout');\n        //  }, 0);\n        // });\n    };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/services.js\n **/","define(function(require, exports, module) {\n    'use strict';\n\n    var $ = window.jQuery;\n    var angular = require('base').ng;\n\n    // @ngInject\n    exports.BudgetsController = function($scope, lpWidget, i18nUtils, BudgetsManager, SharedData, Budget, AccountsResource, CategoriesResource, $timeout, Gridly, AlertsManager, lpCoreUtils, lpCoreBus) {\n        $scope.shared = SharedData;\n        $scope.partialsDir = lpCoreUtils.getWidgetBaseUrl(lpWidget) + '/partials'; // Used for template includes\n        $scope.alerts = AlertsManager;\n        $scope.budgetsManager = BudgetsManager;\n\n        AccountsResource.get(function(data) {\n            var accounts = {};\n            lpCoreUtils.forEach(data, function(value, key) {\n                accounts[value.id] = value;\n            });\n            $scope.load();\n            SharedData.accountIds = accounts;\n        }, function(error) {\n            AlertsManager.push('danger', 'noBankAccounts');\n        });\n\n        $scope.load = function(accountIds) {\n            BudgetsManager.loadAll(accountIds);\n        };\n\n        $scope.toggleEditMode = function() {\n            this.shared.budgetEditMode = !this.shared.budgetEditMode;\n            lpCoreBus.publish('launchpad-retail.budgets.closeBudgetEditing');\n        };\n\n        this.loadCategories = function() {\n            new CategoriesResource({ accountIds: [SharedData.selectedAccountId] }).get(\n                function(data) {\n                    SharedData.categories = data;\n                }, function(error) {\n                    AlertsManager.push('danger', 'noCategories');\n                    SharedData.categories = [];\n                });\n        };\n\n        // Listen to account selection change events\n        lpCoreBus.subscribe('launchpad-retail.accountSelected', function(params) {\n            $scope.shared.selectedAccountId = params.accountId;\n            $scope.budgetsManager.budgetTemplate.accountIds = params.accountId;\n            $scope.load(params.accountId);\n        });\n\n        this.loadCategories();\n\n        Gridly.init();\n\n        // Since SpringBoard does not support lazyloading this is needed to adjust\n        // Gridly width size\n        var springboardWidth = $('.lp-springboard-container').width();\n        if (springboardWidth !== null) {\n            $('.gridly').width(springboardWidth);\n            $('.gridly').resize();\n        }\n\n    };\n\n    // @ngInject\n    exports.BudgetEditController = function($scope, $timeout, $q, BudgetsManager, SharedData, lpCoreUtils) {\n\n        $scope.budgetImages = ['shopping', 'food', 'coffee', 'house', 'car', 'drinks', 'phone', 'bag', 'trip'];\n\n        $scope.init = function() {\n            $scope.goToWizardStep(1);\n            $scope.form = angular.copy($scope.budget);\n            $scope.categories = angular.copy(SharedData.categories);\n            $scope.error = false;\n            if (SharedData.selectedAccountId !== null) {\n                $scope.form.accountIds = [SharedData.selectedAccountId];\n            }\n        };\n\n        /* Wizard navigation */\n        $scope.next = function(event) {\n            if ($scope.getActiveWizardStep() === 1) {\n                if ($scope.form.categoryIds.length === 0) {\n                    $scope.error = true;\n                } else {\n                    $scope.error = false;\n                    $scope.wizardNextStep();\n                    $timeout(function() {\n                        $('#amount').focus();\n                    }, 0);\n\n                }\n            } else if($scope.getActiveWizardStep() === 2) {\n                if ($scope.form.amount === undefined ||\n                    $scope.form.amount === null ||\n                    $scope.form.amount === 0) {\n                    $scope.error = true;\n                } else {\n                    $scope.error = false;\n                    $scope.wizardNextStep();\n                    $timeout(function() {\n                        $('#name').focus();\n                    }, 0);\n\n                }\n            } else if($scope.getActiveWizardStep() === 3) {\n                if ($scope.form.name === undefined ||\n                    $scope.form.name === null ||\n                    $scope.form.name === '') {\n                    $scope.error = true;\n                } else {\n                    $scope.error = false;\n                    $scope.save(event);\n                }\n            }\n        };\n\n        $scope.back = function(event) {\n            $scope.error = null;\n            if ($scope.getActiveWizardStep() === 1) {\n                $scope.close(event);\n            }\n            $scope.wizardPreviousStep();\n        };\n\n        $scope.save = function(event) {\n            if ($scope.mode === 'new') {\n                if (SharedData.selectedAccountId === null) {\n                    var ids = [];\n                    for (var id in SharedData.accountIds) ids.push(id);\n                    $scope.form.accountIds = ids;\n                } else {\n                    $scope.form.accountIds = [SharedData.selectedAccountId];\n                }\n                BudgetsManager.createBudget($scope.form);\n            } else {\n                $scope.budget.processing = true;\n                angular.copy($scope.form, $scope.budget);\n                var $root = $scope.$root;\n                $q.all(BudgetsManager.updateBudget($scope.form)).then(function(){\n                    $scope.budget.processing = false;\n                    $root.$broadcast('launchpad-retail.budgets.size');\n                });\n            }\n            $scope.close(event);\n        };\n\n        $scope.selectCategory = function(category) {\n            category.selected = !category.selected;\n            if (category.selected) {\n                if ($scope.form.categoryIds.length === 0) {\n                    $scope.form.name = category.name;\n                }\n                $scope.form.categoryIds.push(category.id);\n            } else {\n                $scope.form.categoryIds.splice(lpCoreUtils.indexOf($scope.form.categoryIds, category.id), 1);\n            }\n        };\n\n        $scope.isCategorySelected = function(category) {\n            if (category.selected === undefined) {\n                category.selected = lpCoreUtils.indexOf($scope.form.categoryIds, category.id) > -1;\n            }\n            return category.selected;\n        };\n\n        $scope.chooseImage = function(image) {\n            $scope.form.image = image;\n        };\n\n        $timeout(function() { $scope.init(); }, 0);\n    };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/controllers.js\n **/","define(function(require, exports, module) {\n    'use strict';\n\n    var $ = window.jQuery;\n\n    // @ngInject\n    exports.budget = function(BudgetsManager, $timeout, SharedData, TransactionsResource, AlertsManager, widget, lpCoreUtils, lpCoreBus) {\n        return {\n            restrict: 'E',\n            replace: true,\n            scope: {\n                budget: '='\n            },\n            templateUrl: lpCoreUtils.getWidgetBaseUrl(widget) + '/partials/budget.html',\n            // @ngInject\n            controller: function($scope, CategoriesResource, $q) {\n                $scope.shared = SharedData;\n                $scope.partialsDir = lpCoreUtils.getWidgetBaseUrl(widget) + '/partials'; // Used for template includes\n                $scope.error = false;\n\n                this.loadTransactions = function() {\n                    $scope.transactions = [];\n                    $scope.budget.processing = true;\n\n                    var queryParams = {\n                        accountIds: $scope.budget.accountIds.toString(),\n                        categoryIds: $scope.budget.categoryIds.toString()\n                    };\n\n                    if($scope.budget.dateFrom) { queryParams.df = $scope.budget.dateFrom; }\n                    if($scope.budget.dateTo) { queryParams.dt = $scope.budget.dateFrom; }\n\n                    TransactionsResource.get(queryParams).then(\n                        function(data) {\n                            lpCoreUtils.forEach(data, function(value, index) {\n                                var categoryColor = lpCoreUtils.result(\n                                    lpCoreUtils.find(SharedData.categories, function(category) {\n                                        return category.id === value.categoryId;\n                                    }), 'color'\n                                );\n\n                                $scope.transactions.push({\n                                    color: categoryColor,\n                                    categoryId: value.categoryId,\n                                    title: value.transactionType,\n                                    amount: value.transactionAmount,\n                                    currency: value.transactionCurrency\n                                });\n                            });\n                            $scope.budget.processing = false;\n                        }, function(error) {\n                            AlertsManager.push('danger', 'budgetGetTransactionsFailed');\n                            $scope.budget.processing = false;\n                        }\n                    );\n                };\n\n                $scope.remove = function(event) {\n                    event.preventDefault();\n                    event.stopPropagation();\n                    BudgetsManager.removeBudget($scope.budget);\n                };\n\n                $scope.size = function() {\n                    return BudgetsManager.size($scope.budget);\n                };\n            },\n            link: function(scope, elem, attrs, controller) {\n                scope.mode = scope.budget.id === 'new' ? 'new' : 'view';\n                scope.currentMode = scope.mode;\n\n                // Click on gridly tile\n                $(document).on('click', '.gridly .brick#' + scope.budget.id + '.closed', function(event) {\n                    scope.$apply(function() {\n                        scope.openBudget();\n                    });\n                });\n\n                scope.$on('launchpad-retail.budgets.size', function() {\n                    setTimeout(function() {\n                        resize(elem);\n                    }, 100);\n                });\n\n                var resize = function(el) {\n                    var valueX, valueY;\n                    if (el.hasClass('small')) { valueX = 140; valueY = 140; }\n                    if (el.hasClass('medium')) { valueX = 300; valueY = 140; }\n                    if (el.hasClass('large') || el.hasClass('edit') || scope.currentMode === 'inspect') { valueX = 300; valueY = 300; }\n                    el.data('width', valueX);\n                    el.data('height', valueY);\n                    lpCoreBus.publish('launchpad-retail.budgets.reloadBudgets');\n                };\n\n                var editBudget = function() {\n                    elem.addClass('edit');\n                    resize(elem);\n                    $timeout(function() {\n                        scope.currentMode = 'edit';\n                    }, 300);\n                };\n\n                scope.openBudget = function() {\n                    if ((scope.currentMode === 'view' && SharedData.budgetEditMode) ||\n                        scope.currentMode === 'new') {\n                        // Switch to -> Create/Update view\n                        lpCoreBus.publish('launchpad-retail.budgets.closeBudgetEditing');\n                        editBudget();\n                    } else if (!SharedData.budgetEditMode && scope.currentMode === 'view'){\n                        // Switch to -> Inspect view\n                        controller.loadTransactions();\n                        lpCoreBus.publish('launchpad-retail.budgets.closeBudgetEditing');\n                        elem.addClass('edit');\n                        scope.currentMode = 'inspect';\n                        resize(elem);\n                    }\n                };\n\n                scope.close = function(event) {\n                    if (event !== undefined) {\n                        event.preventDefault();\n                        event.stopPropagation();\n                    }\n                    var brick = $('.gridly .brick#' + scope.budget.id + '.edit');\n                    if (brick !== null) {\n                        scope.currentMode = scope.mode; // Reset mode to original\n                        brick.removeClass('edit');\n                        resize(brick);\n                    }\n                };\n\n                lpCoreBus.subscribe('launchpad-retail.budgets.closeBudgetEditing', function() {\n                    scope.close();\n                });\n\n            }\n        };\n    };\n\n    // @ngInject\n    exports.reloadBudgets = function(lpCoreBus) {\n        return function(scope, element, attrs) {\n            if (scope.$last) {\n                lpCoreBus.publish('launchpad-retail.budgets.reloadBudgets');\n            }\n        };\n    };\n\n    // @ngInject\n    exports.amountPicker = function($interval, widget, lpCoreUtils) {\n        return {\n            restrict: 'E',\n            scope: { model: '=value' },\n            templateUrl: lpCoreUtils.getWidgetBaseUrl(widget) + '/partials/amount-picker.html',\n            link: function(scope, elem, attrs) {\n\n                var promise;\n                //TODO: change to use class and elem. find\n                $(document).on('touchstart', '#increase-control', function(event) {\n                    scope.increase();\n                });\n                $(document).on('touchend touchcancel', '#increase-control', function(event) {\n                    scope.cancel();\n                });\n\n                $(document).on('touchstart', '#decrease-control', function(event) {\n                    scope.decrease();\n                });\n\n                $(document).on('touchend touchcancel', '#decrease-control', function(event) {\n                    scope.cancel();\n                });\n\n                scope.increase = function() {\n                    if (scope.model === undefined) {\n                        scope.model = 0;\n                    }\n                    promise = $interval(function () { scope.model = scope.model + 1; }, 50);\n                };\n\n                scope.decrease = function() {\n                    promise = $interval(function () { scope.model = scope.model - 1; }, 50);\n                };\n\n                scope.cancel = function() {\n                    $interval.cancel(promise);\n                };\n            }\n        };\n    };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/directives.js\n **/"],"sourceRoot":""}