{"version":3,"sources":[false,"false*","false**","webpack:///widget-portfolio-performance/./scripts/main.js","false***","false****","false*****","false******","false*******","webpack:///widget-portfolio-performance/./scripts/controllers.js","webpack:///widget-portfolio-performance/./scripts/directives.js",null],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_9__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_RESULT__","run","lpWidget","lpWealth","setConfig","portfolioEndPoint","getPreference","$inject","name","base","core","charts","wealth","deps","createModule","controller","directive","undefined","webpackPolyfill","deprecate","paths","children","MainCtrl","ptfModel","$timeout","lpCoreBus","renderComponent","data","ctrl","loading","updateTitle","title","modeAvail","config","mode","frequency","getConfig","toggleMode","onSwitch","modeIsAvailable","subscribe","ptf","getData","then","freq","d3","angular","ng","DEFAULT_Y_DOMAIN","DEFAULT_BAR_WIDTH","MARGIN","top","bottom","Y_LABELS_SHIFT","left","AXIS_FORMATS","monthly","time","format","multi","d","getMonth","getDate","yearly","yLabelsTransform","lpWealthPerformance","$window","utils","wealthUtils","lpChartUtils","lpCoreI18n","axesFactory","barsFactory","lineFactory","pointsFactory","tooltipFactory","getFirstDate","vData","i","getFirstIndex","item","hasVCR","date","main","scope","element","value","datapoint","totalPortfolioValue","rate","valueChangeRate","maxExtent","arr1","arr2","Math","min","max","barClassName","barY","singleTick","y","yRate","barX","width","state","xScale","parsers","x","barWidth","accumulative","range","curr1","prev1","curr2","prev2","j","from","dateBisect","length","to","ret","push","zoom","model","domain","firstVCRDate","modeIsSet","accum","map","firstVal","extent","accumState","line","render","points","axes","domainWidth","getDomainSize","bars","chart","select","attr","_height","selectAll","resize","innerWidth","innerHeight","ticks","svg","tooltip","formatters","scale","linear","el","find","compose","append","numFormat","timeFormats","rateFormat","node","centerSingleTick","yScale","currency","formatCurrency","cashIn","cashOut","toFixed","itemAttr","class","height","abs","onParentPanelToggle","onRange","r","bus","$watch","on","debounce","property","none","bisector","right","restrict","priority","Number","MAX_VALUE","link","template"],"mappings":"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","file":"scripts/main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"module-charts\", \"module-wealth\", \"d3\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-portfolio-performance\"] = factory(require(\"base\"), require(\"core\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse\n\t\troot[\"widget-portfolio-performance\"] = factory(root[\"base\"], root[\"core\"], root[\"module-charts\"], root[\"module-wealth\"], root[\"d3\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"module-charts\", \"module-wealth\", \"d3\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-portfolio-performance\"] = factory(require(\"base\"), require(\"core\"), require(\"module-charts\"), require(\"module-wealth\"), require(\"d3\"));\n\telse\n\t\troot[\"widget-portfolio-performance\"] = factory(root[\"base\"], root[\"core\"], root[\"module-charts\"], root[\"module-wealth\"], root[\"d3\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_9__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    module.name = 'widget-portfolio-performance';\n\n\t    var base = __webpack_require__(3);\n\t    var core = __webpack_require__(4);\n\t    var charts = __webpack_require__(5);\n\t    var wealth = __webpack_require__(6);\n\n\t    var deps = [\n\t    core.name,\n\t    charts.name,\n\t    wealth.name];\n\n\n\t    // @ngInject\n\t    function run(lpWidget, lpWealth) {\n\t        lpWealth.setConfig({\n\t            portfolioEndPoint: lpWidget.getPreference('dataSrc') });\n\n\t    }\n\n\t    module.exports = base.createModule(module.name, deps).\n\t    controller(__webpack_require__(7)).\n\t    directive(__webpack_require__(8)).\n\t    run(run);\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\n\t    /*----------------------------------------------------------------*/\n\t    /* Main Controller\n\t                                                                         /*----------------------------------------------------------------*/\n\n\t    // @ngInject\n\t    exports.MainCtrl = function (ptfModel, $timeout, lpCoreBus, lpWealth) {\n\t        var ctrl = this;\n\n\t        var config = ctrl.config = {\n\t            frequency: lpWealth.getConfig('frequency'),\n\t            mode: true };\n\n\n\t        function renderComponent(data) {\n\t            ctrl.loading = false;\n\t            ctrl.data = data;\n\t        }\n\n\t        function updateTitle() {\n\t            ctrl.title = ctrl.modeAvail && config.mode ? 'Performance' : 'Valuation';\n\t        }\n\n\t        ctrl.modeAvail = ctrl.modeAvail || false;\n\n\t        ctrl.toggleMode = function () {\n\t            config.mode = !config.mode;\n\t            updateTitle();\n\t        };\n\n\t        ctrl.onSwitch = function (modeIsAvailable) {\n\t            $timeout(function () {\n\t                ctrl.modeAvail = modeIsAvailable;\n\t                updateTitle();\n\t            });\n\t        };\n\n\t        lpCoreBus.subscribe('launchpad-retail.portfolioSelected', function (ptf) {\n\t            ctrl.loading = true;\n\t            ptfModel.getData(ptf.id).then(renderComponent);\n\t        });\n\n\t        lpCoreBus.subscribe('portfolio-frequency', function (freq) {\n\t            $timeout(function () {\n\t                config.frequency = freq;\n\t            });\n\t        });\n\t    };\n\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t    'use strict';\n\t    var d3 = __webpack_require__(9);\n\t    var angular = __webpack_require__(3).ng;\n\n\t    var DEFAULT_Y_DOMAIN = 10; // If there is no range how much of the single value should be covered (%) on the Y axis\n\t    var DEFAULT_BAR_WIDTH = 50; // In case there is no range, bar width should not use whole chart\n\t    var MARGIN = { top: 10, bottom: 20 },\n\t    Y_LABELS_SHIFT = { top: -5, left: 15 },\n\t    AXIS_FORMATS = {\n\t        monthly: d3.time.format.multi([\n\t        ['%b %Y', function (d) {return d.getMonth() === 0;}],\n\t        ['%b', function (d) {return d.getDate() === 1;}],\n\t        ['', function () {return true;}]]),\n\n\t        yearly: d3.time.format.multi([\n\t        ['%Y', function (d) {return d.getMonth() === 0;}],\n\t        ['', function () {return true;}]]) };\n\n\n\t    var yLabelsTransform = 'translate(' + Y_LABELS_SHIFT.left + ',' + Y_LABELS_SHIFT.top + ')';\n\n\t    // @ngInject\n\t    exports.lpWealthPerformance = function ($window, utils, wealthUtils, lpChartUtils, lpCoreBus, lpCoreI18n, axesFactory, barsFactory, lineFactory, pointsFactory, tooltipFactory) {\n\t        var bus = lpCoreBus;\n\t        var date = utils.property('date');\n\t        var data = utils.property('data');\n\n\t        var hasVCR = function hasVCR(d, none) {return d.datapoint.valueChangeRate === null ? 0 : 1;},\n\t        getFirstIndex = d3.bisector(hasVCR).right;\n\n\t        var dateBisect = d3.bisector(date).left;\n\n\t        function getFirstDate(vData) {\n\t            var i = getFirstIndex(vData),\n\t            item = vData[i];\n\t            return i === 0 && hasVCR(item) ? -1 : date(item);\n\t        }\n\n\t        function main(scope, element) {\n\t            var config = scope.config;\n\t            var x = d3.time.scale();\n\t            var y = d3.scale.linear();\n\t            var ticks = lpChartUtils.ticks();\n\t            var accum, width, _height, domainWidth, firstVCRDate, mode, modeIsAvailable, singleTick, barWidth;\n\t            var modeIsSet = true;\n\t            var el = element.find('svg')[0];\n\t            var yRate;\n\n\t            function value(d) {\n\t                return d.datapoint.totalPortfolioValue;\n\t            }\n\n\t            function rate(d) {\n\t                return mode ? d.datapoint.valueChangeRate : d.datapoint.totalPortfolioValue;\n\t            }\n\n\t            function maxExtent(arr1, arr2) {\n\t                return [Math.min(d3.min(arr1), d3.min(arr2)), Math.max(d3.max(arr1), d3.max(arr2))];\n\t            }\n\n\t            function barClassName(d) {\n\t                return rate(d) < 0 ? 'negative' : '';\n\t            }\n\n\t            yRate = utils.compose(y, rate);\n\n\t            function barY(d) {\n\t                return singleTick ? 0 : mode ? Math.min(y(0), yRate(d)) : yRate(d);\n\t            }\n\n\t            function barX(d) {\n\t                return singleTick ? (width - DEFAULT_BAR_WIDTH) / 2 : state.xScale(state.parsers.x(d)) - barWidth / 2;\n\t            }\n\n\t            var svg = d3.select(el);\n\t            var chart = svg.append('g').attr('transform', 'translate(0,' + MARGIN.top + ')');\n\n\t            var numFormat = d3.format('.2s');\n\t            var timeFormats = {\n\t                monthly: d3.time.format('%b %Y'),\n\t                yearly: d3.time.format('%Y') };\n\n\t            var rateFormat = d3.format('+,.2f');\n\n\t            var state = {\n\t                node: chart,\n\t                centerSingleTick: true,\n\t                xScale: x,\n\t                yScale: y,\n\t                parsers: {\n\t                    x: date,\n\t                    y: function y(d) {\n\t                        return Math.max(0, rate(d));\n\t                    } },\n\n\t                formatters: {\n\t                    y: function y(d) {return mode ? d + '%' : numFormat(d);},\n\t                    tooltip: function tooltip(d) {\n\t                        var currency = d.datapoint.currency;\n\t                        return (\n\t                            '<div>' + timeFormats[config.frequency](date(d)) + '</div>' +\n\t                            '<div>' + lpCoreI18n.formatCurrency(value(d), currency) + '</div>' + (\n\t                            mode ? '<div>' + rateFormat(rate(d)) + '%</div>' : '') +\n\t                            '<div> &rarr; ' + lpCoreI18n.formatCurrency(d.datapoint.cashIn, currency) + '</div>' +\n\t                            '<div> &larr; ' + lpCoreI18n.formatCurrency(d.datapoint.cashOut, currency) + '</div>' + (\n\t                            mode ? '<div>Cumul: ' + data(accum[dateBisect(accum, date(d))]).toFixed(2) + '%</div>' : ''));\n\n\t                    } } };\n\n\n\n\t            var accumState = {\n\t                node: chart,\n\t                xScale: x,\n\t                yScale: y,\n\t                parsers: {\n\t                    x: date,\n\t                    y: data } };\n\n\n\n\t            var axes = axesFactory(state).ticks({ x: ticks, y: 5 });\n\t            var bars = barsFactory(state).\n\t            attr('class', 'bars').\n\t            itemAttr({\n\t                class: barClassName,\n\t                y: barY,\n\t                x: barX,\n\t                height: function height(d) {\n\t                    return singleTick ? _height : mode ? Math.abs(y(0) - yRate(d)) : _height - yRate(d);\n\t                } });\n\n\t            var line = lineFactory(accumState);\n\t            var points = pointsFactory(accumState).attr('class', 'dots');\n\n\t            chart.append('g').attr('class', 'x axis zero').append('line');\n\n\t            var tooltip = tooltipFactory(state);\n\n\t            function accumulative(range, vData) {\n\t                var from = dateBisect(vData, range[0], 0, vData.length - 1);\n\t                var to = dateBisect(vData, range[1] || range[0], 0, vData.length - 1);\n\t                var ret = [];\n\t                var curr1, prev1, curr2, prev2;\n\n\t                for (var i = from, j; i <= to; i++) {\n\t                    j = i - from;\n\t                    curr1 = 1 + rate(vData[i]) / 100;\n\t                    curr2 = j === 0 ? curr1 : curr1 * (j === 1 ? prev1 : prev2);\n\t                    prev1 = curr1;\n\t                    prev2 = curr2;\n\n\t                    ret.push({\n\t                        date: vData[i].date,\n\t                        data: (curr2 - 1) * 100 });\n\n\t                }\n\n\t                return ret;\n\t            }\n\n\t            function zoom() {\n\t                if (!scope.data) {\n\t                    return;\n\t                }\n\n\t                var model = scope.data[config.frequency];\n\t                var range = scope.range;\n\t                singleTick = true;\n\t                if (range && model.length > 1) {\n\t                    singleTick = false;\n\t                    x.domain(range);\n\t                    if (modeIsAvailable !== range[0] > firstVCRDate) {\n\t                        modeIsAvailable = range[0] > firstVCRDate;\n\t                        mode = modeIsAvailable && modeIsSet;\n\t                        scope.onSwitch({ modeIsAvailable: modeIsAvailable });\n\t                    }\n\t                }\n\n\t                if (mode) {\n\t                    accum = accumulative(range, model);\n\t                    y.domain(maxExtent(accum.map(data), model.map(rate)));\n\t                } else {\n\t                    accum = [];\n\t                    var firstVal = value(model[0]);\n\t                    y.domain(singleTick ? [firstVal * (1 - DEFAULT_Y_DOMAIN / 100), firstVal] : d3.extent(model, rate));\n\t                }\n\n\t                accumState.data = accum;\n\t                line.render();\n\t                points.render();\n\n\t                axes.render();\n\t                barWidth = domainWidth / wealthUtils.getDomainSize(x) * 0.75 || DEFAULT_BAR_WIDTH;\n\t                bars.barWidth(barWidth);\n\t                bars.render();\n\n\t                chart.select('.x.axis').attr('transform', 'translate(' + (singleTick ? width / 2 : 0) + ',' + _height + ')');\n\t                chart.select('.y.axis').selectAll('text').attr('transform', yLabelsTransform);\n\t                chart.select('.x.zero').attr('transform', 'translate(0,' + y(0) + ')');\n\t            }\n\n\t            function resize() {\n\t                width = element.innerWidth();\n\t                _height = element.innerHeight() - MARGIN.top - MARGIN.bottom;\n\t                if (width <= 0 || _height <= 0) {\n\t                    return;\n\t                }\n\n\t                ticks.width(width);\n\t                x.range([0, width]);\n\t                y.range([_height, 0]);\n\t                svg.attr('width', width).\n\t                attr('height', _height + MARGIN.top + MARGIN.bottom);\n\n\t                axes.resize(width, _height);\n\t                tooltip.resize(width, _height);\n\n\t                chart.select('.x.zero line').attr('x2', width);\n\t                render();\n\t            }\n\n\t            function render() {\n\t                var vData = scope.data;\n\t                if (!vData) {\n\t                    return;\n\t                }\n\t                vData = vData[config.frequency];\n\t                if (!vData || vData.length < 1) {\n\t                    return;\n\t                }\n\n\t                state.data = vData;\n\t                firstVCRDate = getFirstDate(vData);\n\t                x.domain(d3.extent(vData, date));\n\t                domainWidth = width / vData.length * wealthUtils.getDomainSize(x);\n\n\t                state.formatters.x = AXIS_FORMATS[config.frequency];\n\n\t                zoom();\n\t            }\n\n\t            resize();\n\n\t            wealthUtils.onParentPanelToggle(element, resize);\n\n\t            var onRange = utils.compose(zoom, function (r) {scope.range = r;});\n\n\t            bus.subscribe('portfolio-rangeSelected', onRange);\n\t            bus.subscribe('portfolio-rangeSelected-live', onRange);\n\n\t            scope.$watch('data', render);\n\t            scope.$watch('config.frequency', render);\n\t            scope.$watch('config.mode', function (m) {\n\t                modeIsSet = m;\n\t                mode = modeIsAvailable && modeIsSet;\n\t                zoom();\n\t            });\n\n\t            angular.element($window).on('resize', utils.debounce(resize, 250));\n\t        }\n\n\t        return {\n\t            restrict: 'EA',\n\t            require: '?ngModel',\n\t            priority: Number.MAX_VALUE,\n\t            link: main,\n\t            template: '<svg/>',\n\t            scope: {\n\t                config: '=lpWealthPerformance',\n\t                data: '=ngModel',\n\t                onSwitch: '&' } };\n\n\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n// WEBPACK FOOTER //\n// scripts/main.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 27b28ea26296fe644a47","define(function (require, exports, module) {\n    'use strict';\n\n    module.name = 'widget-portfolio-performance';\n\n    var base = require('base');\n    var core = require('core');\n    var charts = require('module-charts');\n    var wealth = require('module-wealth');\n\n    var deps = [\n        core.name,\n        charts.name,\n        wealth.name\n    ];\n\n    // @ngInject\n    function run(lpWidget, lpWealth) {\n        lpWealth.setConfig({\n            portfolioEndPoint: lpWidget.getPreference('dataSrc')\n        });\n    }\n\n    module.exports = base.createModule(module.name, deps)\n        .controller(require('./controllers'))\n        .directive(require('./directives'))\n        .run(run);\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/main.js\n// module id = 1\n// module chunks = 0","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// (webpack)/buildin/module.js\n// module id = 2\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"base\"\n// module id = 3\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"core\"\n// module id = 4\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"module-charts\"\n// module id = 5\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"module-wealth\"\n// module id = 6\n// module chunks = 0","define(function (require, exports, module) {\n    'use strict';\n\n    /*----------------------------------------------------------------*/\n    /* Main Controller\n    /*----------------------------------------------------------------*/\n\n    // @ngInject\n    exports.MainCtrl = function (ptfModel, $timeout, lpCoreBus, lpWealth) {\n        var ctrl = this;\n\n        var config = ctrl.config = {\n            frequency: lpWealth.getConfig('frequency'),\n            mode: true\n        };\n\n        function renderComponent(data) {\n            ctrl.loading = false;\n            ctrl.data = data;\n        }\n\n        function updateTitle() {\n            ctrl.title = ctrl.modeAvail && config.mode ? 'Performance' : 'Valuation';\n        }\n\n        ctrl.modeAvail = ctrl.modeAvail || false;\n\n        ctrl.toggleMode = function () {\n            config.mode = !config.mode;\n            updateTitle();\n        };\n\n        ctrl.onSwitch = function (modeIsAvailable) {\n            $timeout(function () {\n                ctrl.modeAvail = modeIsAvailable;\n                updateTitle();\n            });\n        };\n\n        lpCoreBus.subscribe('launchpad-retail.portfolioSelected', function (ptf) {\n            ctrl.loading = true;\n            ptfModel.getData(ptf.id).then(renderComponent);\n        });\n\n        lpCoreBus.subscribe('portfolio-frequency', function (freq) {\n            $timeout(function () {\n                config.frequency = freq;\n            });\n        });\n    };\n\n});\n\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/controllers.js\n// module id = 7\n// module chunks = 0","define(function (require, exports, module) {\n    'use strict';\n    var d3 = require('d3');\n    var angular = require('base').ng;\n\n    var DEFAULT_Y_DOMAIN = 10; // If there is no range how much of the single value should be covered (%) on the Y axis\n    var DEFAULT_BAR_WIDTH = 50; // In case there is no range, bar width should not use whole chart\n    var MARGIN = {top: 10, bottom: 20},\n        Y_LABELS_SHIFT = {top: -5, left: 15},\n        AXIS_FORMATS = {\n            monthly: d3.time.format.multi([\n                ['%b %Y', function(d) { return d.getMonth() === 0; }],\n                ['%b', function(d) { return d.getDate() === 1; }],\n                ['', function() { return true; }]\n            ]),\n            yearly: d3.time.format.multi([\n                ['%Y', function(d) { return d.getMonth() === 0; }],\n                ['', function() { return true; }]\n            ])\n        };\n    var yLabelsTransform = 'translate(' + Y_LABELS_SHIFT.left + ',' + Y_LABELS_SHIFT.top + ')';\n\n    // @ngInject\n    exports.lpWealthPerformance = function ($window, utils, wealthUtils, lpChartUtils, lpCoreBus, lpCoreI18n, axesFactory, barsFactory, lineFactory, pointsFactory, tooltipFactory) {\n        var bus = lpCoreBus;\n        var date = utils.property('date');\n        var data = utils.property('data');\n\n        var hasVCR = function (d, none) { return d.datapoint.valueChangeRate === null ? 0 : 1; },\n            getFirstIndex = d3.bisector(hasVCR).right;\n\n        var dateBisect = d3.bisector(date).left;\n\n        function getFirstDate(vData) {\n            var i = getFirstIndex(vData),\n                item = vData[i];\n            return i === 0 && hasVCR(item) ? -1 : date(item);\n        }\n\n        function main(scope, element) {\n            var config = scope.config;\n            var x = d3.time.scale();\n            var y = d3.scale.linear();\n            var ticks = lpChartUtils.ticks();\n            var accum, width, height, domainWidth, firstVCRDate, mode, modeIsAvailable, singleTick, barWidth;\n            var modeIsSet = true;\n            var el = element.find('svg')[0];\n            var yRate;\n\n            function value(d) {\n                return d.datapoint.totalPortfolioValue;\n            }\n\n            function rate(d) {\n                return mode ? d.datapoint.valueChangeRate : d.datapoint.totalPortfolioValue;\n            }\n\n            function maxExtent(arr1, arr2) {\n                return [Math.min(d3.min(arr1), d3.min(arr2)), Math.max(d3.max(arr1), d3.max(arr2))];\n            }\n\n            function barClassName(d) {\n                return rate(d) < 0 ? 'negative' : '';\n            }\n\n            yRate = utils.compose(y, rate);\n\n            function barY(d) {\n                return singleTick ? 0 : (mode ? Math.min(y(0), yRate(d)) : yRate(d));\n            }\n\n            function barX(d) {\n                return singleTick ? ((width - DEFAULT_BAR_WIDTH) / 2) : (state.xScale(state.parsers.x(d)) - barWidth / 2);\n            }\n\n            var svg = d3.select(el);\n            var chart = svg.append('g').attr('transform', 'translate(0,' + MARGIN.top + ')');\n\n            var numFormat = d3.format('.2s');\n            var timeFormats = {\n                    monthly: d3.time.format('%b %Y'),\n                    yearly: d3.time.format('%Y')\n                };\n            var rateFormat = d3.format('+,.2f');\n\n            var state = {\n                node: chart,\n                centerSingleTick: true,\n                xScale: x,\n                yScale: y,\n                parsers: {\n                    x: date,\n                    y: function (d) {\n                        return Math.max(0, rate(d));\n                    }\n                },\n                formatters: {\n                    y: function (d) { return mode ? d + '%' : numFormat(d); },\n                    tooltip: function (d) {\n                        var currency = d.datapoint.currency;\n                        return (\n                            '<div>' + timeFormats[config.frequency](date(d)) + '</div>' +\n                            '<div>' + lpCoreI18n.formatCurrency(value(d), currency) + '</div>' +\n                            (mode ? '<div>' + rateFormat(rate(d)) + '%</div>' : '') +\n                            '<div> &rarr; ' + lpCoreI18n.formatCurrency(d.datapoint.cashIn, currency) + '</div>' +\n                            '<div> &larr; ' + lpCoreI18n.formatCurrency(d.datapoint.cashOut, currency) + '</div>' +\n                            (mode ? '<div>Cumul: ' + data(accum[dateBisect(accum, date(d))]).toFixed(2) + '%</div>' : '')\n                        );\n                    }\n                }\n            };\n\n            var accumState = {\n                node: chart,\n                xScale: x,\n                yScale: y,\n                parsers: {\n                    x: date,\n                    y: data\n                }\n            };\n\n            var axes = axesFactory(state).ticks({x: ticks, y: 5});\n            var bars = barsFactory(state)\n                .attr('class', 'bars')\n                .itemAttr({\n                    class: barClassName,\n                    y: barY,\n                    x: barX,\n                    height: function (d) {\n                        return singleTick ? height : (mode ? Math.abs(y(0) - yRate(d)) : height - yRate(d));\n                    }\n                });\n            var line = lineFactory(accumState);\n            var points = pointsFactory(accumState).attr('class', 'dots');\n\n            chart.append('g').attr('class', 'x axis zero').append('line');\n\n            var tooltip = tooltipFactory(state);\n\n            function accumulative(range, vData) {\n                var from = dateBisect(vData, range[0], 0, vData.length - 1);\n                var to = dateBisect(vData, range[1] || range[0], 0, vData.length - 1);\n                var ret = [];\n                var curr1, prev1, curr2, prev2;\n\n                for (var i = from, j; i <= to; i++) {\n                    j = i - from;\n                    curr1 = 1 + rate(vData[i]) / 100;\n                    curr2 = j === 0 ? curr1 : curr1 * (j === 1 ? prev1 : prev2);\n                    prev1 = curr1;\n                    prev2 = curr2;\n\n                    ret.push({\n                        date: vData[i].date,\n                        data: (curr2 - 1) * 100\n                    });\n                }\n\n                return ret;\n            }\n\n            function zoom() {\n                if (!scope.data) {\n                     return;\n                }\n\n                var model = scope.data[config.frequency];\n                var range = scope.range;\n                singleTick = true;\n                if (range && model.length > 1) {\n                    singleTick = false;\n                    x.domain(range);\n                    if (modeIsAvailable !== range[0] > firstVCRDate) {\n                        modeIsAvailable = range[0] > firstVCRDate;\n                        mode = modeIsAvailable && modeIsSet;\n                        scope.onSwitch({modeIsAvailable: modeIsAvailable});\n                    }\n                }\n\n                if (mode) {\n                    accum = accumulative(range, model);\n                    y.domain(maxExtent(accum.map(data), model.map(rate)));\n                } else {\n                    accum = [];\n                    var firstVal = value(model[0]);\n                    y.domain(singleTick ? [firstVal * (1 - DEFAULT_Y_DOMAIN / 100), firstVal] : d3.extent(model, rate));\n                }\n\n                accumState.data = accum;\n                line.render();\n                points.render();\n\n                axes.render();\n                barWidth = (domainWidth / wealthUtils.getDomainSize(x) * 0.75) || DEFAULT_BAR_WIDTH;\n                bars.barWidth(barWidth);\n                bars.render();\n\n                chart.select('.x.axis').attr('transform', 'translate(' + (singleTick ? (width / 2) : 0) + ',' + height + ')');\n                chart.select('.y.axis').selectAll('text').attr('transform', yLabelsTransform);\n                chart.select('.x.zero').attr('transform', 'translate(0,' + y(0) + ')');\n            }\n\n            function resize() {\n                width = element.innerWidth();\n                height = element.innerHeight() - MARGIN.top - MARGIN.bottom;\n                if (width <= 0 || height <= 0) {\n                    return;\n                }\n\n                ticks.width(width);\n                x.range([0, width]);\n                y.range([height, 0]);\n                svg .attr('width', width)\n                    .attr('height', height + MARGIN.top + MARGIN.bottom);\n\n                axes.resize(width, height);\n                tooltip.resize(width, height);\n\n                chart.select('.x.zero line').attr('x2', width);\n                render();\n            }\n\n            function render() {\n                var vData = scope.data;\n                if (!vData) {\n                    return;\n                }\n                vData = vData[config.frequency];\n                if (!vData || vData.length < 1) {\n                    return;\n                }\n\n                state.data = vData;\n                firstVCRDate = getFirstDate(vData);\n                x.domain(d3.extent(vData, date));\n                domainWidth = width / vData.length * wealthUtils.getDomainSize(x);\n\n                state.formatters.x = AXIS_FORMATS[config.frequency];\n\n                zoom();\n            }\n\n            resize();\n\n            wealthUtils.onParentPanelToggle(element, resize);\n\n            var onRange = utils.compose(zoom, function (r) { scope.range = r; });\n\n            bus.subscribe('portfolio-rangeSelected', onRange);\n            bus.subscribe('portfolio-rangeSelected-live', onRange);\n\n            scope.$watch('data', render);\n            scope.$watch('config.frequency', render);\n            scope.$watch('config.mode', function (m) {\n                modeIsSet = m;\n                mode = modeIsAvailable && modeIsSet;\n                zoom();\n            });\n\n            angular.element($window).on('resize', utils.debounce(resize, 250));\n        }\n\n        return {\n            restrict: 'EA',\n            require: '?ngModel',\n            priority: Number.MAX_VALUE,\n            link: main,\n            template: '<svg/>',\n            scope: {\n                config: '=lpWealthPerformance',\n                data: '=ngModel',\n                onSwitch: '&'\n            }\n        };\n    };\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./scripts/directives.js\n// module id = 8\n// module chunks = 0","module.exports = __WEBPACK_EXTERNAL_MODULE_9__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"d3\"\n// module id = 9\n// module chunks = 0"],"sourceRoot":""}