{"version":3,"sources":["webpack:///widget-estatement-list/webpack/universalModuleDefinition","webpack:///widget-estatement-list/scripts/main.js","webpack:///widget-estatement-list/webpack/bootstrap a4c05dfd4c1a69eee02c","webpack:///widget-estatement-list/./scripts/main.js","webpack:///widget-estatement-list/(webpack)/buildin/module.js","webpack:///widget-estatement-list/external \"base\"","webpack:///widget-estatement-list/external \"core\"","webpack:///widget-estatement-list/external \"ui\"","webpack:///widget-estatement-list/external \"module-users\"","webpack:///widget-estatement-list/external \"module-estatements\"","webpack:///widget-estatement-list/./scripts/directives.js","webpack:///widget-estatement-list/./scripts/controllers.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_7__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_RESULT__","run","lpWidget","lpEstatements","setConfig","estatementListEndpoint","getPreference","estatementEnrollmentEndpoint","$inject","name","base","core","ui","users","estatement","deps","createModule","directive","controller","undefined","webpackPolyfill","deprecate","paths","children","lpEstatementsLink","getTemplate","join","linkFn","scope","el","attrs","type","link","split","iconClass","TYPE_STYLE","isDisabled","href","pdf","html","restrict","template","utils","MainCtrl","lpPortal","lpUserDetails","$q","$element","$timeout","lpCoreError","ctrl","docsToLoad","EstatementsError","createException","VIEW","MAIN","DETAIL","NO_RESULTS","ERROR","fetchEstatements","estatementsLoading","promise","getAll","then","estatements","estatementList","throwException","onFetchSuccess","hasEstatements","length","setCurrentView","handleError","err","captureException","initialize","initializing","enrolled","categoryStatements","endpoint","getResolvedPreference","userDetailsPromise","get","data","userName","firstName","lastName","estatementsPromise","all","checkLoadedDocs","docs","documents","stopLoadingDocs","loadDocuments","slice","reload","showCurrentView","view","currentView","showCategoryStatements","categoryName","findWhere","find","scrollTop","sliceDocuments","num","loadMoreDocuments","concat"],"mappings":"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","file":"scripts/main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-users\"), require(\"module-estatements\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"ui\", \"module-users\", \"module-estatements\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-estatement-list\"] = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-users\"), require(\"module-estatements\"));\n\telse\n\t\troot[\"widget-estatement-list\"] = factory(root[\"base\"], root[\"core\"], root[\"ui\"], root[\"module-users\"], root[\"module-estatements\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-users\"), require(\"module-estatements\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"ui\", \"module-users\", \"module-estatements\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-estatement-list\"] = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-users\"), require(\"module-estatements\"));\n\telse\n\t\troot[\"widget-estatement-list\"] = factory(root[\"base\"], root[\"core\"], root[\"ui\"], root[\"module-users\"], root[\"module-estatements\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/_karma_webpack_//\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\n\t/**\n\t * @requires module:base\n\t * @requires module:core\n\t * @requires module:ui\n\t *\n\t * @example Require Widget\n\t * // add this in the index.html\n\t * window.requireWidget( __WIDGET__ ,'scripts/index');\n\t */\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\n\t    'use strict';\n\n\t    module.name = 'widget-estatement-list';\n\n\t    /**\n\t     * Dependencies\n\t     */\n\t    var base = __webpack_require__(3);\n\t    var core = __webpack_require__(4);\n\t    var ui = __webpack_require__(5);\n\n\t    // Resources\n\t    var users = __webpack_require__(6);\n\t    var estatement = __webpack_require__(7);\n\n\t    var deps = [core.name, ui.name, estatement.name, users.name];\n\n\t    // @ngInject\n\t    function run(lpWidget, lpEstatements) {\n\t        lpEstatements.setConfig({\n\t            'estatementListEndpoint': lpWidget.getPreference('estatementListEndpoint'),\n\t            'estatementEnrollmentEndpoint': lpWidget.getPreference('estatementEnrollmentEndpoint')\n\t        });\n\t    }\n\n\t    module.exports = base.createModule(module.name, deps).directive(__webpack_require__(8)).controller(__webpack_require__(9)).run(run);\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t/**\n\t * Directives\n\t * @module directives\n\t */\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\t    'use strict';\n\n\t    exports.lpEstatementsLink = function () {\n\t        var TYPE_STYLE = {\n\t            'pdf': 'fa-file-pdf-o',\n\t            'html': 'fa-eye'\n\t        };\n\n\t        function getTemplate() {\n\t            return ['<a href=\"{{link.href}}\" target=\"_blank\" ng-if=\"!isDisabled\" title=\"{{type}}\">', '<i class=\"fa {{iconClass}} {{type}}\"></i>', '</a>', '<i ng-if=\"isDisabled\" class=\"fa {{iconClass}} {{type}} disabled\"></i>'].join('');\n\t        }\n\n\t        function linkFn(scope, el, attrs) {\n\t            scope.type = scope.link.type.split('/')[1];\n\t            scope.iconClass = TYPE_STYLE[scope.type];\n\t            scope.isDisabled = scope.link.href === 'null&admin=0';\n\t        }\n\n\t        return {\n\t            restrict: 'AE',\n\t            scope: {\n\t                link: '='\n\t            },\n\t            template: getTemplate(),\n\t            link: linkFn\n\t        };\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t/**\n\t * Controllers\n\t * @module controllers\n\t */\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\n\t    'use strict';\n\n\t    var utils = __webpack_require__(3).utils;\n\n\t    /**\n\t     * MainCtrl description.\n\t     * @ngInject\n\t     */\n\t    exports.MainCtrl = function (lpWidget, lpPortal, lpEstatements, lpUserDetails, $q, $element, $timeout, lpCoreError) {\n\t        var ctrl = this;\n\t        var docsToLoad = 10;\n\t        var EstatementsError = lpCoreError.createException('EstatementsError');\n\n\t        // Constants\n\t        ctrl.VIEW = {\n\t            'MAIN': 'MAIN',\n\t            'DETAIL': 'DETAIL',\n\t            'NO_RESULTS': 'NO_RESULTS',\n\t            'ERROR': 'ERROR'\n\t        };\n\n\t        // Loads all the statements\n\t        var fetchEstatements = function fetchEstatements() {\n\t            ctrl.estatementsLoading = true;\n\t            var promise = lpEstatements.getAll();\n\t            promise.then(function (estatements) {\n\t                ctrl.estatementList = estatements;\n\t            }, function () {\n\t                lpCoreError.throwException(new EstatementsError('Unable to fetch data.'));\n\t            })['finally'](function () {\n\t                ctrl.estatementsLoading = false;\n\t            });\n\t            return promise;\n\t        };\n\n\t        var onFetchSuccess = function onFetchSuccess() {\n\t            var hasEstatements = !!ctrl.estatementList.length;\n\t            var VIEW = ctrl.VIEW;\n\t            ctrl.setCurrentView(hasEstatements ? VIEW.MAIN : VIEW.NO_RESULTS);\n\t        };\n\n\t        var handleError = function handleError(err) {\n\t            lpCoreError.captureException(err);\n\t            ctrl.setCurrentView(ctrl.VIEW.ERROR);\n\t        };\n\n\t        var initialize = function initialize() {\n\t            ctrl.initializing = true;\n\t            ctrl.enrolled = null;\n\t            ctrl.estatementList = null;\n\t            ctrl.estatementsLoading = true;\n\t            ctrl.categoryStatements = null;\n\t            ctrl.setCurrentView(ctrl.VIEW.MAIN);\n\n\t            var endpoint = lpWidget.getResolvedPreference('detailsEndpoint') || lpPortal.root + '/services/rest/v1/party-data-management/party';\n\t            var userDetailsPromise = lpUserDetails.get(endpoint).then(function (data) {\n\t                ctrl.userName = [data.firstName, data.lastName].join(' ');\n\t            });\n\n\t            var estatementsPromise = fetchEstatements();\n\n\t            $q.all([userDetailsPromise, estatementsPromise]).then(onFetchSuccess, handleError)['finally'](function () {\n\t                ctrl.initializing = false;\n\t            });\n\t        };\n\n\t        var checkLoadedDocs = function checkLoadedDocs() {\n\t            if (ctrl.docs.length === ctrl.categoryStatements.documents.length) {\n\t                ctrl.stopLoadingDocs = true;\n\t            }\n\t        };\n\n\t        var loadDocuments = function loadDocuments() {\n\t            ctrl.stopLoadingDocs = false;\n\t            ctrl.docs = ctrl.categoryStatements.documents.slice(0, docsToLoad);\n\t            checkLoadedDocs();\n\t        };\n\n\t        ctrl.reload = function () {\n\t            ctrl.setCurrentView(ctrl.VIEW.MAIN);\n\t            ctrl.initializing = true;\n\n\t            fetchEstatements().then(onFetchSuccess, handleError)['finally'](function () {\n\t                ctrl.initializing = false;\n\t            });\n\t        };\n\n\t        /**\n\t         * Checks if `view` is being displayed\n\t         * @param  {String} view Name of the view to check\n\t         * @return {Boolean}\n\t         */\n\t        ctrl.showCurrentView = function (view) {\n\t            return ctrl.currentView === view;\n\t        };\n\n\t        /**\n\t         * Displays the `view` and hide the current one\n\t         * @param  {String} view Name of the view to display\n\t         */\n\t        ctrl.setCurrentView = function (view) {\n\t            ctrl.currentView = view;\n\t        };\n\n\t        /**\n\t         * Shows the full list of statements for a certain category\n\t         * @param  {String} categoryName Name of the category\n\t         */\n\t        ctrl.showCategoryStatements = function (categoryName) {\n\t            ctrl.categoryStatements = utils(ctrl.estatementList).findWhere({ name: categoryName });\n\t            loadDocuments();\n\t            ctrl.setCurrentView(ctrl.VIEW.DETAIL);\n\t            // When changing from categories reset the scroll\n\t            $timeout(function () {\n\t                $element.find('.category-detail-body')[0].scrollTop = 0;\n\t            });\n\t        };\n\n\t        /**\n\t         * Returns a subset of the documents provided\n\t         * @param  {Array} documents List of documents\n\t         * @param  {Number} num       Number of documents to return\n\t         * @return {Array}           List of the first `num` documents\n\t         */\n\t        ctrl.sliceDocuments = function (documents, num) {\n\t            return documents.slice(0, num);\n\t        };\n\n\t        /**\n\t         * Loads more documents of the selected category\n\t         */\n\t        ctrl.loadMoreDocuments = function () {\n\t            ctrl.docs = ctrl.docs.concat(ctrl.categoryStatements.documents.slice(ctrl.docs.length, ctrl.docs.length + docsToLoad));\n\t            checkLoadedDocs();\n\t        };\n\n\t        // Bootstrap\n\t        initialize();\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** scripts/main.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/_karma_webpack_//\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap a4c05dfd4c1a69eee02c\n **/","/**\n * @requires module:base\n * @requires module:core\n * @requires module:ui\n *\n * @example Require Widget\n * // add this in the index.html\n * window.requireWidget( __WIDGET__ ,'scripts/index');\n */\n\ndefine(function (require, exports, module) {\n\n    'use strict';\n\n    module.name = 'widget-estatement-list';\n\n    /**\n     * Dependencies\n     */\n    var base = require('base');\n    var core = require('core');\n    var ui = require('ui');\n\n    // Resources\n    var users = require('module-users');\n    var estatement = require('module-estatements');\n\n    var deps = [\n        core.name,\n        ui.name,\n        estatement.name,\n        users.name\n    ];\n\n    // @ngInject\n    function run(lpWidget, lpEstatements) {\n        lpEstatements.setConfig({\n            'estatementListEndpoint': lpWidget.getPreference('estatementListEndpoint'),\n            'estatementEnrollmentEndpoint': lpWidget.getPreference('estatementEnrollmentEndpoint')\n        });\n    }\n\n    module.exports = base.createModule(module.name, deps)\n        .directive( require('./directives') )\n        .controller( require('./controllers') )\n        .run( run );\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/main.js\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"base\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"core\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ui\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"module-users\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"module-estatements\"\n ** module id = 7\n ** module chunks = 0\n **/","/**\n * Directives\n * @module directives\n */\ndefine(function(require, exports) {\n    'use strict';\n\n    exports.lpEstatementsLink = function () {\n        var TYPE_STYLE = {\n            'pdf': 'fa-file-pdf-o',\n            'html': 'fa-eye'\n        };\n\n        function getTemplate () {\n            return [\n                '<a href=\"{{link.href}}\" target=\"_blank\" ng-if=\"!isDisabled\" title=\"{{type}}\">',\n                    '<i class=\"fa {{iconClass}} {{type}}\"></i>',\n                '</a>',\n                '<i ng-if=\"isDisabled\" class=\"fa {{iconClass}} {{type}} disabled\"></i>'\n            ].join('');\n        }\n\n        function linkFn(scope, el, attrs) {\n            scope.type = scope.link.type.split('/')[1];\n            scope.iconClass = TYPE_STYLE[scope.type];\n            scope.isDisabled = scope.link.href === 'null&admin=0';\n        }\n\n        return {\n            restrict: 'AE',\n            scope: {\n                link: '='\n            },\n            template: getTemplate(),\n            link: linkFn\n        };\n    };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/directives.js\n **/","/**\n * Controllers\n * @module controllers\n */\ndefine(function(require, exports) {\n\n    'use strict';\n\n    var utils = require('base').utils;\n\n    /**\n     * MainCtrl description.\n     * @ngInject\n     */\n    exports.MainCtrl = function(lpWidget, lpPortal, lpEstatements, lpUserDetails, $q, $element, $timeout, lpCoreError) {\n        var ctrl = this;\n        var docsToLoad = 10;\n        var EstatementsError = lpCoreError.createException('EstatementsError');\n\n        // Constants\n        ctrl.VIEW = {\n            'MAIN': 'MAIN',\n            'DETAIL': 'DETAIL',\n            'NO_RESULTS': 'NO_RESULTS',\n            'ERROR': 'ERROR'\n        };\n\n        // Loads all the statements\n        var fetchEstatements = function() {\n            ctrl.estatementsLoading = true;\n            var promise = lpEstatements.getAll();\n            promise.then(function(estatements) {\n                ctrl.estatementList = estatements;\n            }, function() {\n                lpCoreError.throwException( new EstatementsError('Unable to fetch data.') );\n            })\n            ['finally'](function() {\n                ctrl.estatementsLoading = false;\n            });\n            return promise;\n        };\n\n        var onFetchSuccess = function() {\n            var hasEstatements = !!ctrl.estatementList.length;\n            var VIEW = ctrl.VIEW;\n            ctrl.setCurrentView(hasEstatements ? VIEW.MAIN : VIEW.NO_RESULTS);\n        };\n\n        var handleError = function(err) {\n            lpCoreError.captureException(err);\n            ctrl.setCurrentView(ctrl.VIEW.ERROR);\n        };\n\n        var initialize = function() {\n            ctrl.initializing = true;\n            ctrl.enrolled = null;\n            ctrl.estatementList = null;\n            ctrl.estatementsLoading = true;\n            ctrl.categoryStatements = null;\n            ctrl.setCurrentView(ctrl.VIEW.MAIN);\n\n            var endpoint = lpWidget.getResolvedPreference('detailsEndpoint') || (lpPortal.root + '/services/rest/v1/party-data-management/party');\n            var userDetailsPromise = lpUserDetails.get(endpoint).then(function(data) {\n                ctrl.userName = [data.firstName, data.lastName].join(' ');\n            });\n\n            var estatementsPromise = fetchEstatements();\n\n            $q.all([userDetailsPromise, estatementsPromise])\n                .then( onFetchSuccess, handleError )\n                ['finally'](function() {\n                    ctrl.initializing = false;\n                });\n        };\n\n        var checkLoadedDocs = function() {\n            if (ctrl.docs.length === ctrl.categoryStatements.documents.length) {\n                ctrl.stopLoadingDocs = true;\n            }\n        };\n\n        var loadDocuments = function() {\n            ctrl.stopLoadingDocs = false;\n            ctrl.docs = ctrl.categoryStatements.documents.slice(0, docsToLoad);\n            checkLoadedDocs();\n        };\n\n        ctrl.reload = function() {\n            ctrl.setCurrentView(ctrl.VIEW.MAIN);\n            ctrl.initializing = true;\n\n            fetchEstatements()\n            .then( onFetchSuccess, handleError )\n            ['finally'](function() {\n                ctrl.initializing = false;\n            });\n        };\n\n        /**\n         * Checks if `view` is being displayed\n         * @param  {String} view Name of the view to check\n         * @return {Boolean}\n         */\n        ctrl.showCurrentView = function(view) {\n            return ctrl.currentView === view;\n        };\n\n        /**\n         * Displays the `view` and hide the current one\n         * @param  {String} view Name of the view to display\n         */\n        ctrl.setCurrentView = function(view) {\n            ctrl.currentView = view;\n        };\n\n        /**\n         * Shows the full list of statements for a certain category\n         * @param  {String} categoryName Name of the category\n         */\n        ctrl.showCategoryStatements = function(categoryName) {\n            ctrl.categoryStatements = utils(ctrl.estatementList).findWhere({ name: categoryName });\n            loadDocuments();\n            ctrl.setCurrentView(ctrl.VIEW.DETAIL);\n            // When changing from categories reset the scroll\n            $timeout(function() {\n                $element.find('.category-detail-body')[0].scrollTop = 0;\n            });\n        };\n\n        /**\n         * Returns a subset of the documents provided\n         * @param  {Array} documents List of documents\n         * @param  {Number} num       Number of documents to return\n         * @return {Array}           List of the first `num` documents\n         */\n        ctrl.sliceDocuments = function(documents, num) {\n            return documents.slice(0, num);\n        };\n\n        /**\n         * Loads more documents of the selected category\n         */\n        ctrl.loadMoreDocuments = function() {\n            ctrl.docs = ctrl.docs.concat(ctrl.categoryStatements.documents.slice(ctrl.docs.length, ctrl.docs.length + docsToLoad));\n            checkLoadedDocs();\n        };\n\n        // Bootstrap\n        initialize();\n    };\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/controllers.js\n **/"],"sourceRoot":""}