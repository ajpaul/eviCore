{"version":3,"sources":["webpack:///widget-review-transfers/webpack/universalModuleDefinition","webpack:///widget-review-transfers/scripts/main.js","webpack:///widget-review-transfers/webpack/bootstrap 5bd8c51c0cb9178e255d","webpack:///widget-review-transfers/./scripts/main.js","webpack:///widget-review-transfers/(webpack)/buildin/module.js","webpack:///widget-review-transfers/external \"base\"","webpack:///widget-review-transfers/external \"core\"","webpack:///widget-review-transfers/external \"ui\"","webpack:///widget-review-transfers/external \"module-accounts\"","webpack:///widget-review-transfers/external \"module-payments\"","webpack:///widget-review-transfers/external \"module-p2p\"","webpack:///widget-review-transfers/./scripts/constants.js","webpack:///widget-review-transfers/./scripts/controllers.js","webpack:///widget-review-transfers/./scripts/profile-image.js","webpack:///widget-review-transfers/./scripts/models.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_7__","__WEBPACK_EXTERNAL_MODULE_8__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_RESULT__","run","lpWidget","lpAccounts","lpCoreBus","lpPayments","setConfig","accountsEndpoint","getPreference","paymentsEndpoint","model","name","publish","$inject","base","core","ui","accounts","payments","p2p","deps","createModule","constant","controller","service","undefined","webpackPolyfill","deprecate","paths","children","reviewTransfersConfig","statusSuccess","statusAuthorization","statusAuthorizationError","_","utils","profile","MainCtrl","$templateCache","lpAlerts","$translate","$modal","$log","$timeout","transferTypes","lpCoreUpdate","lpP2P","lpCoreUtils","ctrl","p2pTransferMade","bankTransferMade","p2pService","api","url","resolvePortalPlaceholders","review","put","decodePhotoUrl","photo","getDefaultProfileImage","updateModel","loading","load","then","identifiers","map","account","p2pPaymentOrders","getAll","data","p2pUser","accountNumber","email","emailVerified","initialize","hideFooter","parseBoolean","alerts","accountsModel","ordersModel","pendingOrdersGroups","unsubscribe","subscribe","pendingOrdersTotals","currency","groups","amount","count","length","paymentOrders","instructedCurrency","i","len","j","instructedAmount","changeLanguage","key","use","editOrder","order","makePayment","makeFormObject","close","refreshTransactionWidgets","processOrdersSeq","pendingOrders","push","pop","type","p2pEmail","verificationFailure","submitPayment","p2pVerificationFailed","submitPayments","paymentsGroups","forEach","group","concat","authorizePayment","authorization","info","verifyP2PDetails","n","accountId","send","paymentId","response","status","authorize","bank","orders","submitted","splice","indexOf","error","modalError","removeOrder","modalInstance","open","template","get","resolve","paymentOrder","result","orderIndex","groupIndex","err","console","log","currentOrder","P2PUser","success","sameCurrency","RemoveConfirmationCtrl","$scope","$modalInstance","isError","message","remove","delPromise","res","statusText","cancel","dismiss","AuthenticationCtrl","auth_password","VerificationCtrl","verify","handleP2PVerification","verifyCode","verificationCode","SameCurrencyCtrl","defaultProfileImage","extractInitials","initials","split","substr","toUpperCase","getColorFromInitials","a","charCodeAt","x","Math","floor","colors","width","height","color","canvas","document","createElement","getContext","setAttribute","ctx","fillStyle","isArray","join","fillRect","scale","fontSize","parseInt","marginBottom","font","textAlign","fillText","dataUri","toDataURL","ALERT_TIMEOUT","list","timeout","self","msg"],"mappings":";CAAA,SAAAA,EAAAC,GACA,gBAAAC,UAAA,gBAAAC,QACAA,OAAAD,QAAAD,EAAAG,QAAA,QAAAA,QAAA,QAAAA,QAAA,MAAAA,QAAA,mBAAAA,QAAA,mBAAAA,QAAA,eACA,kBAAAC,gBAAAC,IACAD,QAAA,qEAAAJ,GACA,gBAAAC,SACAA,QAAA,2BAAAD,EAAAG,QAAA,QAAAA,QAAA,QAAAA,QAAA,MAAAA,QAAA,mBAAAA,QAAA,mBAAAA,QAAA,eAEAJ,EAAA,2BAAAC,EAAAD,EAAA,KAAAA,EAAA,KAAAA,EAAA,GAAAA,EAAA,mBAAAA,EAAA,mBAAAA,EAAA,gBACCO,KAAA,SAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,GACD,MCAgB,UAAUC,GCN1B,QAAAC,GAAAC,GAGA,GAAAC,EAAAD,GACA,MAAAC,GAAAD,GAAAd,OAGA,IAAAC,GAAAc,EAAAD,IACAd,WACAgB,GAAAF,EACAG,QAAA,EAUA,OANAL,GAAAE,GAAAI,KAAAjB,EAAAD,QAAAC,IAAAD,QAAAa,GAGAZ,EAAAgB,QAAA,EAGAhB,EAAAD,QAvBA,GAAAe,KAqCA,OATAF,GAAAM,EAAAP,EAGAC,EAAAO,EAAAL,EAGAF,EAAAQ,EAAA,GAGAR,EAAA,KDgBM,SAASZ,EAAQD,QAASa,GAE/BZ,EAAOD,QAAUa,EAAoB,IAKhC,SAASZ,EAAQD,QAASa,GAE/B,GAAIS,IAA0D,SAASrB,GAAS,YEhDjFqB,GAAO,SAASpB,QAASF,QAASC,GAAQ,QAiC7BsB,GAAIC,EAAUC,EAAYC,EAAWC,GAE1CF,EAAWG,WACPC,iBAAoBL,EAASM,cAAc,qBAE/CH,EAAWC,WACPG,iBAAoBP,EAASM,cAAc,iCAG5CN,GAAYA,EAASQ,OAASR,EAASQ,MAAMC,MAC5CP,EAAUQ,QAAQ,mBAAqBlB,GAAIQ,EAASQ,MAAMC,OF0BjEV,EAAIY,SAAW,WAAY,aAAc,YAAa,cEjEvDlC,EAAOgC,KAAO,yBAJwB,IASlCG,GAAOvB,EAAQ,GACfwB,EAAOxB,EAAQ,GACfyB,EAAKzB,EAAQ,GAEb0B,EAAW1B,EAAQ,GACnB2B,EAAW3B,EAAQ,GACnB4B,EAAM5B,EAAQ,GASd6B,GACAL,EAAKJ,KACLK,EAAGL,KACHM,EAASN,KACTO,EAASP,KACTQ,EAAIR,KAkBRhC,GAAOD,QAAUoC,EAAKO,aAAa1C,EAAOgC,KAAMS,GAC3CE,SAAS/B,EAAQ,IACjBgC,WAAWhC,EAAQ,KACnBiC,QAAQjC,EAAQ,KAChBU,IAAIA,IAnDNL,KAAAlB,QAAAa,EAAAb,QAAAC,KAAA8C,SAAAzB,IAAArB,EAAAD,QAAAsB,MF4GuBJ,KAAKlB,QAASa,EAAoB,GAAGZ,KAI7D,SAASA,EAAQD,SG/HvBC,EAAAD,QAAA,SAAAC,GAQA,MAPAA,GAAA+C,kBACA/C,EAAAgD,UAAA,aACAhD,EAAAiD,SAEAjD,EAAAkD,YACAlD,EAAA+C,gBAAA,GAEA/C,IHuIM,SAASA,EAAQD,SI/IvBC,EAAAD,QAAAM,GJqJM,SAASL,EAAQD,SKrJvBC,EAAAD,QAAAO,GL2JM,SAASN,EAAQD,SM3JvBC,EAAAD,QAAAQ,GNiKM,SAASP,EAAQD,SOjKvBC,EAAAD,QAAAS,GPuKM,SAASR,EAAQD,SQvKvBC,EAAAD,QAAAU,GR6KM,SAAST,EAAQD,SS7KvBC,EAAAD,QAAAW,GTmLM,SAASV,EAAQD,QAASa,GAE/B,GAAIS,EUrLLA,GAAQ,SAAUpB,QAASF,QAASC,GAClC,YAEAD,SAAQoD,uBACNC,cAAe,UACfC,oBAAqB,uBACrBC,yBAA0B,+BANtBrC,KAAAlB,QAAAa,EAAAb,QAAAC,KAAA8C,SAAAzB,IAAArB,EAAAD,QAAAsB,KVmMF,SAASrB,EAAQD,QAASa,GAE/B,GAAIS,EWjMLA,GAAO,SAASpB,QAASF,SAErB,YAEA,IAAIwD,GAAI3C,EAAQ,GAAQ4C,MACpBC,EAAU7C,EAAQ,GALQb,SAWtB2D,SAAW,SAAUC,EAAgBC,EAAUC,EAAYC,EAAQC,EAAMC,EAAUtC,EAAYF,EAAYyC,EAAexC,EAAWyC,EAAcC,EAAOhB,EAAuBiB,EAAa7C,GAClM,GAAI8C,GAAOjE,KACPkE,GAAkB,EAClBC,GAAmB,EACnBC,EAAaL,EAAMM,IAAI,kBACtB9C,WACG+C,IAAKN,EAAYO,0BAA0BpD,EAASM,cAAc,2BAG1EH,GAAaA,EAAW+C,MACxBJ,EAAKO,UAELjB,EAAekB,IAAI,uCACf,y0CAuBJlB,EAAekB,IAAI,8BACf,wxCAuBJlB,EAAekB,IAAI,wCACf,gmDAqCJlB,EAAekB,IAAI,mCACf,8fAcJR,EAAKS,eAAiB,SAASC,GAC3B,MAAOtB,GAAQuB,uBAAuBD,EAAO,GAAI,IAlHuJ,IAwHxME,GAAc,WAId,MAFAZ,GAAKa,SAAU,EAER1D,EAAW2D,OAAOC,KAAK,SAAU9C,GAEpC,GAAI+C,GAAc/C,EAASgD,IAAI,SAAUC,GACrC,MAAOA,GAAQxE,IAMnB,OAT8CsD,GAOzCmB,iBAAmBnB,EAAKmB,qBAEtB9D,EAAWyD,KAAKE,GAAaD,KAAK,WACrC,MAAOZ,GAAWiB,WAErBL,KAAK,SAAUM,GACZrB,EAAKsB,SACDC,cAAeF,EAAKE,cACpBC,MAAOH,EAAKG,MACZC,cAAeJ,EAAKI,iBAG3B,SAAS,WACNzB,EAAKsB,SACDG,eAAe,KAGtB,WAAW,WACRzB,EAAKa,SAAU,OAMvBa,EAAa,WAEb1B,EAAK2B,WAAa5B,EAAY6B,aAAa1E,EAASM,cAAc,eAElEwC,EAAK6B,OAAStC,EACdS,EAAK8B,cAAgB3E,EACrB6C,EAAK+B,YAAc1E,EACnB2C,EAAK+B,YAAYC,uBAEjBpB,IAAc,WAAW,WAErBxD,EAAU6E,YAAY,yCAA0CrB,GAChExD,EAAU8E,UAAU,yCAA0CtB,KAvKsIZ,GA+KvMmC,oBAAsB,WACvB,GAGIC,GAHAC,EAASrC,EAAK+B,YAAYC,oBAC1BM,EAAS,EACTC,EAAQ,CAGZ,KAAKF,IAAWA,EAAOG,OACnB,OAAO,CAGXJ,GAAWC,EAAO,GAAGI,cAAc,GAAGC,kBAEtC,KAAK,GAAIC,GAAI,EAAGC,EAAMP,EAAOG,OAAYI,EAAJD,EAASA,IAC1C,IAAI,GAAIE,GAAI,EAAGA,EAAIR,EAAOM,GAAGF,cAAcD,OAAQK,IAC/CP,GAAUD,EAAOM,GAAGF,cAAcI,GAAGC,iBACjCV,GAAYA,IAAaC,EAAOM,GAAGF,cAAcI,GAAGH,qBACpDN,GAAW,GAEfG,GAIR,QACIA,MAAOA,EACPD,OAAQA,EACRF,SAAUA,IAIlBpC,EAAK+C,eAAiB,SAAUC,GAC5BxD,EAAWyD,IAAID,IA7MyLhD,EAqNvMkD,UAAY,SAAUC,GACvBnD,EAAKoD,cACLhG,EAAUQ,QAAQ,yBAA0BoC,EAAK+B,YAAYsB,eAAeF,KAGhFnD,EAAKoD,YAAc,WACfpD,EAAK6B,OAAOyB,QACZlG,EAAUQ,QAAQ,yCA5NsL,IAmOxM2F,GAA4B,WACxBrD,GACA9C,EAAUQ,QAAQ,sDAIlBqC,GACA7C,EAAUQ,QAAQ,yDAPiBsC,GAYpB,EACnBD,GAAkB,GAOlBuD,EAAmB,WACnB,GAAkC,IAA9BxD,EAAKyD,cAAcjB,QAAiD,IAAjCxC,EAAKmB,iBAAiBqB,OAIzD,MAHAxC,GAAK6B,OAAO6B,KAAK,mBAAoB,WACrC1D,EAAKa,SAAU,MACf0C,IAJ0B,IAS1BJ,GAAQnD,EAAKyD,cAAcE,KAE3BR,IAEIA,EAAMS,OAAShE,EAAciE,WAC7BV,EAAMW,qBAAsB,EAC5B9D,EAAKmB,iBAAiBuC,KAAKP,IAE/BnD,EAAK+D,cAAcZ,KAGnBnD,EAAKmB,oBACLnB,EAAKgE,uBAAwB,GA5QuKhE,GAiRvMiE,eAAiB,SAASC,GAC3BlE,EAAKa,SAAU,CACf,IAAI4C,KAEJvE,GAAEiF,QAAQnE,EAAK+B,YAAYC,oBAAqB,SAASoC,GACrDX,EAAgBA,EAAcY,OAAOD,EAAM3B,iBAG/CzC,EAAKyD,cAAgBA,EACrBD,KAGDxD,EAAK2B,YACJvE,EAAU8E,UAAU,kBAAmB,WACnClC,EAAKiE,eAAejE,EAAK+B,YAAYC,uBAI7ChC,EAAKsE,iBAAmB,SAASnB,EAAOoB,GACpCvE,EAAK+D,cAAcZ,EAAOoB,IApS8KvE,EAwSvM+D,cAAgB,SAASZ,EAAOoB,GAGjC,GADA7E,EAAK8E,KAAK,cAAgBrB,EAAMzG,GAAK,kBACjCyG,EAAMW,oBAEN,WADAN,IAJ4C,IAS5CL,EAAMS,OAAShE,EAAciE,WAAa7D,EAAKsB,QAAQG,cAEvD,WADAzB,GAAKyE,iBAAiBtB,EAVsB,KAkB3C,GAJDd,GAASrC,EAAK+B,YAAYC,oBAC1BoC,EAAQ,KAGHzB,EAAI,EAAG+B,EAAIrC,EAAOG,OAAYkC,EAAJ/B,EAAOA,IACtC,GAAIN,EAAOM,GAAG,SAAWQ,EAAMwB,UAAW,CACtCP,EAAQ/B,EAAOM,EACf,OAIR,MAAMyB,OAKNjB,GAAMyB,MAAMC,UAAW1B,EAAMzG,IAAK6H,GAAexD,KAAK,SAAS+D,GAG3D,GAAIA,EAASC,SAAWjG,EAAsBE,oBAE1C,WADAgB,GAAKgF,UAAU7B,EAKfA,GAAMS,OAAShE,EAAcqF,KAC7B/E,GAAmB,EACZiD,EAAMS,OAAShE,EAAciE,WACpC5D,GAAkB,EAGtB,IAAIiF,GAASd,EAAM3B,aACnBU,GAAMgC,WAAY,EAElBxF,EAAS,WAELuF,EAAOE,OAAOF,EAAOG,QAAQlC,GAAQ,GAEf,IAAlB+B,EAAO1C,QACPH,EAAO+C,OAAO/C,EAAOgD,QAAQjB,GAAQ,GAGrCpE,EAAKmB,iBAAiBkE,QAAQlC,GAAS,IACvCnD,EAAKmB,iBAAiBiE,OAAOpF,EAAKmB,iBAAiBkE,QAAQlC,GAAQ,GATxDK,KAahB,MAEJ,SAAS8B,GACa,MAAjBA,EAAMP,OACN/E,EAAKgF,UAAU7B,GACS,MAAjBmC,EAAMP,QACb/E,EAAKgF,UAAU7B,GACfnD,EAAKO,OAAOgF,WAAa,uBACzB5F,EAAS,WAAaK,EAAKO,OAAOgF,WAAa,IAAO,OAEtD7F,EAAK4F,MAAM,gBAAkBnC,EAAMzG,GAAK,oBACxCsD,EAAK6B,OAAO6B,KAAK,iBAAkB,UACnC1D,EAAKa,SAAU,SA/CnBnB,GAAK4F,MAAM,gBAAkBnC,EAAMzG,GAAK,mCAlU4JsD,EA4XvMwF,YAAc,SAASpB,EAAOjB,GAC/B,GAAIsC,GAAgBhG,EAAOiG,MACvBC,SAAUrG,EAAesG,IAAI,yCAC7BrH,WAAY,yBACZsH,SACIC,aAAc,WACV,MAAO3C,MAKnBsC,GAAcM,OAAOhF,KAAK,SAAU+D,GAChC,GAAIkB,GAAa5B,EAAM3B,cAAc4C,QAAQlC,EAE7C,IADAiB,EAAM3B,cAAc2C,OAAOY,EAAY,GACJ,IAA/B5B,EAAM3B,cAAcD,OAAc,CAClC,GAAIyD,GAAajG,EAAK+B,YAAYC,oBAAoBqD,QAAQjB,EAC9DpE,GAAK+B,YAAYC,oBAAoBoD,OAAOa,EAAY,KAE7D,SAAUC,GAETC,QAAQC,IAAIF,MAIpBlG,EAAKgF,UAAY,SAAU7B,GACvB,GAAIsC,GAAgBhG,EAAOiG,MACvBC,SAAUrG,EAAesG,IAAI,+BAC7BrH,WAAY,qBAEZsH,SACIQ,aAAc,WACV,MAAOlD,IAEXoC,WAAY,WACR,MAAOvF,GAAKO,OAAOgF,cAK/BE,GAAcM,OAAOhF,KAAK,SAAUwD,GAChCvE,EAAKa,SAAU,EACfb,EAAKsE,iBAAiBnB,EAAOoB,IAC9B,WACCvE,EAAKa,SAAU,KAKvBb,EAAKyE,iBAAmB,SAAUtB,GAC9B,GAAIsC,GAAgBhG,EAAOiG,MACvBC,SAAUrG,EAAesG,IAAI,wCAC7BrH,WAAY,mBACZsH,SACIQ,aAAc,WACV,MAAOlD,IAEXmD,QAAS,WACL,MAAOtG,GAAKsB,WAKxBmE,GAAcM,OAAOhF,KACjB,SAAUwF,GACNvG,EAAKa,SAAU,EACfsC,EAAMW,qBAAuByC,EACzBA,KAAY,IACZvG,EAAKsB,QAAQG,eAAgB,EAC7BzB,EAAK+D,cAAcZ,KAExB,SAAUmC,GACTtF,EAAKa,SAAU,KAM3Bb,EAAKwG,aAAe,WAChBxG,EAAKa,SAAU,CACf,IAAI4E,GAAgBhG,EAAOiG,MACvBC,SAAUrG,EAAesG,IAAI,oCAC7BrH,WAAY,oBAGhBkH,GAAcM,OAAOhF,KAAK,WACtBf,EAAKa,SAAU,GAChB,WACCb,EAAKa,SAAU,KAKvBa,KXuGHhG,QAAQ2D,SAASxB,SAAW,iBAAkB,WAAY,aAAc,SAAU,OAAQ,WAAY,aAAc,aAAc,gBAAiB,YAAa,eAAgB,QAAS,wBAAyB,cAAe,YW1kBpMnC,QAuetB+K,uBAAyB,SAASC,EAAQ/G,EAAUgH,EAAgBb,EAAczI,GACtFqJ,EAAOpB,OAAUsB,SAAS,EAAOC,QAAS,IAC1CH,EAAOZ,aAAeA,EACtBzI,EAAaA,EAAW+C,MAExBsG,EAAOI,OAAS,WACZ,GAAIC,GAAa1J,EAAWyJ,OAAOJ,EAAOZ,aAAapJ,GACvDqK,GAAWhG,KAAK,SAASiG,GACrBL,EAAerD,MAAM0D,IACtB,SAAS1B,GAERoB,EAAOpB,MAAMsB,SAAU,EACvBF,EAAOpB,MAAMuB,QAAUvB,EAAM2B,WAC7BtH,EAAS,WAAa+G,EAAOpB,MAAMsB,SAAU,GAAU,QAI/DF,EAAOQ,OAAS,WACZP,EAAeQ,QAAQ,YX2G9BzL,QAAQ+K,uBAAuB5I,SAAW,SAAU,WAAY,iBAAkB,eAAgB,cWpmBrEnC,QA8ftB0L,mBAAqB,SAASV,EAAQC,EAAgBN,EAAcd,GACxEmB,EAAOR,KAAQX,WAAYA,GAC3BmB,EAAOnG,QAAW8G,cAAiB,IACnCX,EAAOL,aAAeA,EAEtBK,EAAO1B,UAAY,WACf2B,EAAerD,MAAMoD,EAAOnG,SAGhCmG,EAAOQ,OAAS,WACZP,EAAeQ,QAAQ,YX4G9BzL,QAAQ0L,mBAAmBvJ,SAAW,SAAU,iBAAkB,eAAgB,cWpnBrDnC,QA6gBtB4L,iBAAmB,SAASZ,EAAQC,EAAgBN,EAAcC,EAASvG,EAAa7C,EAAU4C,GACtG4G,EAAOa,UACPb,EAAOL,aAAeA,EACtBK,EAAOpF,QAAUgF,CACjB,IAAInG,GAAaL,EAAMM,IAAI,kBACtB9C,WACG+C,IAAKN,EAAYO,0BAA0BpD,EAASM,cAAc,2BAG1EkJ,GAAOc,sBAAwB,WAC3BrH,EAAWsH,WAAWf,EAAOpF,QAAQE,MAAOkF,EAAOa,OAAOG,kBAAkB3G,KAAK,SAAS+D,GAC/D,MAApBA,EAASC,QACR4B,EAAerD,OAAM,IAE1B,SAASwB,GACe,MAApBA,EAASC,QACR4B,EAAerD,OAAM,MAKjCoD,EAAOQ,OAAS,WACZP,EAAeQ,QAAQ,YX4G9BzL,QAAQ4L,iBAAiBzJ,SAAW,SAAU,iBAAkB,eAAgB,UAAW,cAAe,WAAY,SW/oBzFnC,QAwiBtBiM,iBAAmB,SAASjB,EAAQC,GACxCD,EAAOQ,OAAS,WACZP,EAAeQ,QAAQ,YX6G9BzL,QAAQiM,iBAAiB9J,SAAW,SAAU,mBWvpB5CjB,KAAAlB,QAAAa,EAAAb,QAAAC,KAAA8C,SAAAzB,IAAArB,EAAAD,QAAAsB,KXspBD,SAASrB,EAAQD,QAASa,GAE/B,GAAIS,EY5pBLA,GAAO,SAAUpB,QAASF,QAASC,GAEjC,YAED,IAAIuD,GAAI3C,EAAQ,GAAQ4C,MAKnByI,EAAsB,i6FAEtBC,EAAkB,SAASlK,GAE3B,GAAImK,GAAW,EACfnK,GAAOA,EAAKoK,MAAM,IAElB,KAAK,GAAIpF,GAAI,EAAGA,EAAIhF,EAAK6E,OAAQG,IAC/BmF,GAAYnK,EAAKgF,GAAGqF,OAAO,EAAG,EAIhC,OADAF,GAAWA,EAASG,eAKpBC,EAAuB,SAASJ,GAEhC,GAAIK,GAAIL,EAASM,WAAW,GAAK,GAC7BC,EAAIF,EAAI,IAERxF,EAAI2F,KAAKC,OAASJ,EAAI,MAAW,EAAgB,EAAK,GACtDK,IACAH,EAAG,IAAK,MACRA,EAAGA,EAAG,MACN,IAAKA,EAAGA,IACRA,EAAG,IAAKA,IACR,IAAKA,EAAG,KAEZ,OAAOG,GAAO7F,GAGlBjH,SAAQiF,uBAAyB,SAAShD,EAAM8K,EAAOC,EAAQC,GAE3D,GAAIC,GAASC,SAASC,cAAc,SAEpC,KAAKnL,IAASiL,EAAOG,aAAeH,EAAOG,WAAW,MACpD,MAAOnB,EAGT,IAAIE,GAAWD,EAAgBlK,EAC/BgL,GAAQA,GAAST,EAAqBJ,GAEtCc,EAAOI,aAAa,QAASP,GAC7BG,EAAOI,aAAa,SAAUN,EAC9B,IAAIO,GAAML,EAAOG,WAAW,KAE5BE,GAAIC,UAAYhK,EAAEiK,QAAQR,GAAS,OAASA,EAAMS,KAAK,KAAO,IAAMT,EACpEM,EAAII,SAAS,EAAG,EAAGZ,EAAOC,GAC1BO,EAAIC,UAAY,kBAEhB,IAAII,EAnB8D,QAsB1DxB,EAAStF,QACf,IAAK,GACH8G,EAAQ,EADV,MADF,KAMO,GACHA,EAAQ,EADV,MANF,KAWO,GACHA,EAAQ,GADV,MAXF,SAiBIA,EAAQ,GAKZ,GAAIC,GAAWC,SAAUF,EAAQZ,EAAQ,IACrCe,EAAenB,KAAKC,MAAO,IAAOG,EAEtCO,GAAIS,KAAOH,EAAW,oEACtBN,EAAIU,UAAY,QAChBV,EAAIW,SAAS9B,EAAUW,EAAQ,EAAGC,EAASe,EAE3C,IAAII,GAAUjB,EAAOkB,UAAU,YAC/B,OAAOD,KA7FNjN,KAAAlB,QAAAa,EAAAb,QAAAC,KAAA8C,SAAAzB,IAAArB,EAAAD,QAAAsB,KZyvBD,SAASrB,EAAQD,QAASa,GAE/B,GAAIS,EavvBLA,GAAO,SAAUpB,QAASF,QAASC,GAEjC,YAGAD,SAAQ6D,SAAW,SAASI,GAC1B,GAAIoK,GAAgB,IAChBlI,IAEJ9F,MAAKiO,KAAO,WACV,MAAOnI,IAGT9F,KAAKuH,MAAQ,WACXzB,MAGF9F,KAAK2H,KAAO,SAASmD,EAASjD,EAAMqG,GAClClO,KAAKuH,OACL,IAAI4G,GAAOnO,IACX8F,GAAO6B,MACLE,KAAMA,GAAQ,SACduG,IAAKtD,IAEHoD,GACFtK,EAAS,WAAauK,EAAK5G,SAAYyG,Kb0wB5CrO,QAAQ6D,SAAS1B,SAAW,aanyBxBjB,KAAAlB,QAAAa,EAAAb,QAAAC,KAAA8C,SAAAzB,IAAArB,EAAAD,QAAAsB","file":"scripts/main.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-accounts\"), require(\"module-payments\"), require(\"module-p2p\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"ui\", \"module-accounts\", \"module-payments\", \"module-p2p\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-review-transfers\"] = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-accounts\"), require(\"module-payments\"), require(\"module-p2p\"));\n\telse\n\t\troot[\"widget-review-transfers\"] = factory(root[\"base\"], root[\"core\"], root[\"ui\"], root[\"module-accounts\"], root[\"module-payments\"], root[\"module-p2p\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-accounts\"), require(\"module-payments\"), require(\"module-p2p\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"base\", \"core\", \"ui\", \"module-accounts\", \"module-payments\", \"module-p2p\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"widget-review-transfers\"] = factory(require(\"base\"), require(\"core\"), require(\"ui\"), require(\"module-accounts\"), require(\"module-payments\"), require(\"module-p2p\"));\n\telse\n\t\troot[\"widget-review-transfers\"] = factory(root[\"base\"], root[\"core\"], root[\"ui\"], root[\"module-accounts\"], root[\"module-payments\"], root[\"module-p2p\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__, __WEBPACK_EXTERNAL_MODULE_8__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n\n\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1);\n\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* WEBPACK VAR INJECTION */(function(module) {'use strict';\n\n\t/**\n\t * @module widget-review-transfers\n\t * @version 1.0.0\n\t * @file widget-review-transfers description\n\t * @copyright Backbase Amsterdam\n\t * @requires module:lp/base\n\t * @requires module:lp/resources/core\n\t * @requires module:lp/resources/ui\n\t * @requires interact\n\t *\n\t * @example Require Widget\n\t * // add this in the index.html\n\t * window.requireWidget( __WIDGET__,'scripts/index');\n\t */\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\n\t    'use strict';\n\n\t    module.name = 'widget-review-transfers';\n\n\t    /**\n\t     * Dependencies\n\t     */\n\t    var base = __webpack_require__(3);\n\t    var core = __webpack_require__(4);\n\t    var ui = __webpack_require__(5);\n\n\t    var accounts = __webpack_require__(6);\n\t    var payments = __webpack_require__(7);\n\t    var p2p = __webpack_require__(8);\n\n\t    /**\n\t     * Angular - Translate libs\n\t     */\n\t    // require('translateMessageFormat');\n\t    // require(['messageformatLocale/en']);\n\t    // require(['messageformatLocale/lt']);\n\n\t    var deps = [core.name, ui.name, accounts.name, payments.name, p2p.name];\n\n\t    // @ngInject\n\t    function run(lpWidget, lpAccounts, lpCoreBus, lpPayments) {\n\t        // Pass config to module providers.\n\t        lpAccounts.setConfig({\n\t            'accountsEndpoint': lpWidget.getPreference('accountsDataSrc')\n\t        });\n\t        lpPayments.setConfig({\n\t            'paymentsEndpoint': lpWidget.getPreference('pendingPaymentOrdersDataSrc')\n\t        });\n\n\t        if (lpWidget && lpWidget.model && lpWidget.model.name) {\n\t            lpCoreBus.publish('cxp.item.loaded', { id: lpWidget.model.name });\n\t        }\n\t    }\n\n\t    module.exports = base.createModule(module.name, deps).constant(__webpack_require__(9)).controller(__webpack_require__(10)).service(__webpack_require__(12)).run(run);\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(2)(module)))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = function(module) {\r\n\t\tif(!module.webpackPolyfill) {\r\n\t\t\tmodule.deprecate = function() {};\r\n\t\t\tmodule.paths = [];\r\n\t\t\t// module.parent = undefined by default\r\n\t\t\tmodule.children = [];\r\n\t\t\tmodule.webpackPolyfill = 1;\r\n\t\t}\r\n\t\treturn module;\r\n\t}\r\n\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\t  'use strict';\n\n\t  exports.reviewTransfersConfig = {\n\t    statusSuccess: 'PENDING', // Success status response from server\n\t    statusAuthorization: 'AUTHORIZATION_NEEDED',\n\t    statusAuthorizationError: 'UNSUCCESSFUL_AUTHORIZATION'\n\t  };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t/**\n\t * Controllers\n\t * @module controllers\n\t */\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports) {\n\n\t    'use strict';\n\n\t    var _ = __webpack_require__(3).utils;\n\t    var profile = __webpack_require__(11);\n\n\t    /**\n\t     * MainCtrl description.\n\t     */\n\t    // @ngInject\n\t    exports.MainCtrl = function ($templateCache, lpAlerts, $translate, $modal, $log, $timeout, lpPayments, lpAccounts, transferTypes, lpCoreBus, lpCoreUpdate, lpP2P, reviewTransfersConfig, lpCoreUtils, lpWidget) {\n\t        var ctrl = this;\n\t        var p2pTransferMade = false;\n\t        var bankTransferMade = false;\n\t        var p2pService = lpP2P.api('enroll-service').setConfig({\n\t            url: lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('p2pEnrollmentEndpoint'))\n\t        });\n\n\t        lpPayments = lpPayments.api();\n\t        ctrl.review = {};\n\n\t        $templateCache.put('templates/verify-p2p-details.ng.html', '<div class=\"modal-header\">' + '    <h2><i class=\"lp-icon lp-icon-xxl lp-icon-info-sign\"></i> <span lp-i18n=\"Verify your contact details\"></span></h2>' + '</div>' + '<form role=\"form\" ng-submit=\"handleP2PVerification()\">' + '    <div class=\"modal-body\">' + '       <p>' + '           <span lp-i18n=\"We have sent a message containing a verification code to {{p2pUser.email}}.\"></span>' + '           <br />' + '           <span lp-i18n=\"Please check your email and enter the code\"></span>' + '       </p>' + '       <p lp-i18n=\"The code will expire in 20 minutes\"></p>' + '       <div ng-class=\"{\\'has-error\\': verify.validationError && verify.verificationCode.length > 0, \\'has-feedback\\': true, \\'form-group\\': true}\">' + '           <label class=\"control-label\"><strong lp-i18n=\"Verification Code:\"></strong></label>' + '           <input type=\"input\" ng-model=\"verify.verificationCode\" class=\"form-control\" tabindex=\"0\" aria-label=\"Verification code\" maxlength=\"4\" placeholder=\"enter the 4 digits\" />' + '       </div>' + '    </div>' + '    <div class=\"modal-footer text-right\">' + '       <button name=\"closeModal\" class=\"btn btn-link\" ng-click=\"cancel()\" type=\"button\" lp-i18n=\"Cancel\"></button>' + '       <button name=\"resendCode\" class=\"btn btn-link\" type=\"button\" lp-i18n=\"Resend Code\"></button>' + '       <button type=\"submit\" class=\"btn btn-primary\" ng-disabled=\"!verify.verificationCode\" lp-i18n=\"Submit\"></button>' + '    </div>' + '</form>');\n\n\t        $templateCache.put('templates/authorize.ng.html', '<div class=\"modal-header\">' + '    <h2>' + '        <i class=\"lp-icon lp-icon-xxl lp-icon-info-sign\"></i>' + '        <span lp-i18n=\"Verify your payment(s)\"></span>' + '    </h2>' + '</div>' + '<form role=\"form\" ng-submit=\"authorize()\">' + '    <div class=\"modal-body\">' + '        <div ng-show=\"err.modalError\">' + '            <div alert=\"alert\" type=\"danger\">{{ err.modalError | translate }}</div>' + '        </div>' + '        <p>Because your transaction to <b>{{currentOrder.counterpartyName}}</b> is over <span lp-amount=\"1000\" lp-amount-currency=\"currentOrder.instructedCurrency\" locale=\"locale\"></span>(<i><span lp-amount=\"currentOrder.instructedAmount\" lp-amount-currency=\"currentOrder.instructedCurrency\" locale=\"locale\"></span></i>), you need to verify it.</p>' + '        <div class=\"form-group has-feedback\">' + '            <label class=\"control-label\"><strong lp-i18n=\"Please enter authentication code:\"></strong></label>' + '            <input type=\"password\" ng-model=\"review.auth_password\" class=\"form-control \" placeholder=\"Password\" />' + '        </div>' + '    </div>' + '    <div class=\"modal-footer text-right\" >' + '        <button name=\"closeModal\" class=\"btn btn-link\" ng-click=\"cancel()\" type=\"button\" lp-i18n=\"Cancel\"></button>' + '        <button type=\"submit\" class=\"btn btn-primary\" ng-disabled=\"!review.auth_password\" lp-i18n=\"Verify\"></button>' + '    </div>' + '</form>');\n\n\t        $templateCache.put('templates/remove-confirmation.ng.html', '<div class=\"modal-header\">' + '    <h2><i class=\"lp-icon lp-icon-xxl lp-icon-info-sign\"></i> <span lp-i18n=\"Please confirm\"></span></h2>' + '</div>' + '<form role=\"form\" ng-submit=\"remove()\">' + '    <div class=\"modal-body\">' + '        <div ng-show=\"review.modalError\">' + '        <div alert=\"alert\" type=\"danger\">{{ review.modalError | translate }}</div>' + '        </div>' + '        <p>' + '            <b lp-i18n=\"Are you sure you want to remove this payment?\"></b>' + '        </p>' + '        <div class=\"row\">' + '            <div class=\"col-xs-8\">' + '            <small class=\"text-muted\" lp-i18n=\"messages.TRANSFER_TO\"></small><span class=\"h4\" itemprop=\"counterpartyName\"> {{paymentOrder.counterpartyName}}</span>' + '        </div>' + '        <div class=\"col-xs-4 text-right\">' + '            <span class=\"h4\" lp-amount=\"paymentOrder.instructedAmount\" lp-amount-currency=\"paymentOrder.instructedCurrency\" itemprop=\"instructedAmount\"></span>' + '        </div>' + '    </div>' + '    <div class=\"row\">' + '        <div class=\"col-xs-8\">' + '            <small class=\"text-muted\">' + '                {{ paymentOrder.accountDetails }}' + '            </small>' + '            </div>' + '            <div class=\"col-xs-4 text-right\">' + '                <small class=\"text-muted\" translate>{{ paymentOrder.onDate | date:\\'longDate\\' }}</small>' + '            </div>' + '        </div>' + '    </div>' + '    <div class=\"modal-footer text-right\" >' + '        <div ng-show=\"error.isError\" class=\"bg-warning text-danger pull-left\" lp-i18n=\"Server error!\"></div>' + '        <button name=\"closeModal\" class=\"btn btn-link\" ng-click=\"cancel()\" type=\"button\" lp-i18n=\"Cancel\"></button>' + '        <button type=\"submit\" class=\"btn btn-danger\" lp-i18n=\"Remove\"></button>' + '    </div>' + '</form>');\n\n\t        $templateCache.put('templates/currency.not.same.html', '<div class=\"modal-header\">' + '   <h2><i class=\"lp-icon lp-icon-xxl lp-icon-info-sign\"></i> <span lp-i18n=\"Total amount\"></span></h2>' + '</div>' + '<form role=\"form\">' + '    <div class=\"modal-body\">' + '       <p lp-i18n=\"Please note that in case of multi-currency usage the transfers cannot be calculated.' + '       Total amount is shown only for the same currency.\"></p>' + '   </div>' + '   <div class=\"modal-footer text-right\" >' + '       <button class=\"btn btn-primary\" ng-click=\"cancel()\" type=\"button\" lp-i18n=\"Ok\"></button>' + '   </div>' + '</form>');\n\n\t        ctrl.decodePhotoUrl = function (photo) {\n\t            return profile.getDefaultProfileImage(photo, 50, 50);\n\t        };\n\n\t        /**\n\t         * Update model of the widget\n\t         */\n\t        var updateModel = function updateModel() {\n\n\t            ctrl.loading = true;\n\n\t            return lpAccounts.load().then(function (accounts) {\n\n\t                var identifiers = accounts.map(function (account) {\n\t                    return account.id;\n\t                });\n\n\t                //store unsent P2P payments here so widget doesn't think all po's are sent\n\t                ctrl.p2pPaymentOrders = ctrl.p2pPaymentOrders || [];\n\n\t                return lpPayments.load(identifiers).then(function () {\n\t                    return p2pService.getAll();\n\t                }).then(function (data) {\n\t                    ctrl.p2pUser = {\n\t                        accountNumber: data.accountNumber,\n\t                        email: data.email,\n\t                        emailVerified: data.emailVerified\n\t                    };\n\t                })['catch'](function () {\n\t                    ctrl.p2pUser = {\n\t                        emailVerified: false\n\t                    };\n\t                })['finally'](function () {\n\t                    ctrl.loading = false;\n\t                });\n\t            });\n\t        };\n\n\t        var initialize = function initialize() {\n\n\t            ctrl.hideFooter = lpCoreUtils.parseBoolean(lpWidget.getPreference('hideFooter'));\n\n\t            ctrl.alerts = lpAlerts;\n\t            ctrl.accountsModel = lpAccounts;\n\t            ctrl.ordersModel = lpPayments;\n\t            ctrl.ordersModel.pendingOrdersGroups = [];\n\n\t            updateModel()['finally'](function () {\n\t                // Flush possible previous events before subscribing to prevent double updateModel call\n\t                lpCoreBus.unsubscribe('launchpad-retail.paymentOrderInitiated', updateModel);\n\t                lpCoreBus.subscribe('launchpad-retail.paymentOrderInitiated', updateModel);\n\t            });\n\t        };\n\n\t        /**\n\t         * Returns transfers total information\n\t         * TODO: Once API supports, this data should be pulled from PaymentsAPI\n\t         */\n\t        ctrl.pendingOrdersTotals = function () {\n\t            var groups = ctrl.ordersModel.pendingOrdersGroups;\n\t            var amount = 0;\n\t            var count = 0;\n\t            var currency;\n\n\t            if (!groups || !groups.length) {\n\t                return false;\n\t            }\n\n\t            currency = groups[0].paymentOrders[0].instructedCurrency;\n\n\t            for (var i = 0, len = groups.length; i < len; i++) {\n\t                for (var j = 0; j < groups[i].paymentOrders.length; j++) {\n\t                    amount += groups[i].paymentOrders[j].instructedAmount;\n\t                    if (currency && currency !== groups[i].paymentOrders[j].instructedCurrency) {\n\t                        currency = false;\n\t                    }\n\t                    count++;\n\t                }\n\t            }\n\n\t            return {\n\t                count: count,\n\t                amount: amount,\n\t                currency: currency\n\t            };\n\t        };\n\n\t        ctrl.changeLanguage = function (key) {\n\t            $translate.use(key);\n\t        };\n\n\t        /**\n\t         * EDIT ORDER\n\t         *\n\t         * @param order\n\t         */\n\t        ctrl.editOrder = function (order) {\n\t            ctrl.makePayment();\n\t            lpCoreBus.publish('lpMoneyTransfer.update', ctrl.ordersModel.makeFormObject(order));\n\t        };\n\n\t        ctrl.makePayment = function () {\n\t            ctrl.alerts.close();\n\t            lpCoreBus.publish('launchpad-retail.requestMoneyTransfer');\n\t            // gadgets.pubsub.Publish('launchpad-retail.requestMoneyTransfer');\n\t        };\n\n\t        /**\n\t         * Publish pub sub messages to instruct other widgets to refresh transaction lists\n\t         */\n\t        var refreshTransactionWidgets = function refreshTransactionWidgets() {\n\t            if (bankTransferMade) {\n\t                lpCoreBus.publish('launchpad-retail.transactions.newTransferSubmitted');\n\t                // gadgets.pubsub.publish('launchpad-retail.transactions.newTransferSubmitted');\n\t            }\n\n\t            if (p2pTransferMade) {\n\t                lpCoreBus.publish('launchpad-retail.p2pTransactions.newTransferSubmitted');\n\t                // gadgets.pubsub.publish('launchpad-retail.p2pTransactions.newTransferSubmitted');\n\t            }\n\n\t            //reset flags for next group of transfers\n\t            bankTransferMade = false;\n\t            p2pTransferMade = false;\n\t        };\n\n\t        /*\n\t         * Submit pending orders sequentially\n\t         * Processes items in ctrl.pendingOrders\n\t         */\n\t        var processOrdersSeq = function processOrdersSeq() {\n\t            if (ctrl.pendingOrders.length === 0 && ctrl.p2pPaymentOrders.length === 0) {\n\t                ctrl.alerts.push('alerts.SUBMITTED', 'success');\n\t                ctrl.loading = false;\n\t                refreshTransactionWidgets();\n\t                return;\n\t            }\n\n\t            // Get the first order\n\t            var order = ctrl.pendingOrders.pop();\n\n\t            if (order) {\n\t                //if p2p po, add to list and reset verification status\n\t                if (order.type === transferTypes.p2pEmail) {\n\t                    order.verificationFailure = false;\n\t                    ctrl.p2pPaymentOrders.push(order);\n\t                }\n\t                ctrl.submitPayment(order);\n\t            } else {\n\t                //pending orders list is empty, reset p2p validation and array\n\t                ctrl.p2pPaymentOrders = [];\n\t                ctrl.p2pVerificationFailed = false;\n\t            }\n\t        };\n\n\t        // Submit all pending payments\n\t        ctrl.submitPayments = function (paymentsGroups) {\n\t            ctrl.loading = true;\n\t            var pendingOrders = [];\n\n\t            _.forEach(ctrl.ordersModel.pendingOrdersGroups, function (group) {\n\t                pendingOrders = pendingOrders.concat(group.paymentOrders);\n\t            });\n\n\t            ctrl.pendingOrders = pendingOrders;\n\t            processOrdersSeq();\n\t        };\n\n\t        if (ctrl.hideFooter) {\n\t            lpCoreBus.subscribe('payments:submit', function () {\n\t                ctrl.submitPayments(ctrl.ordersModel.pendingOrdersGroups);\n\t            });\n\t        }\n\n\t        ctrl.authorizePayment = function (order, authorization) {\n\t            ctrl.submitPayment(order, authorization);\n\t        };\n\n\t        // Submit a specific pending payment\n\t        ctrl.submitPayment = function (order, authorization) {\n\n\t            $log.info('Processing ' + order.id + ' payment order');\n\t            if (order.verificationFailure) {\n\t                processOrdersSeq();\n\t                return;\n\t            }\n\n\t            //if the user's P2P details need to verified\n\t            if (order.type === transferTypes.p2pEmail && !ctrl.p2pUser.emailVerified) {\n\t                ctrl.verifyP2PDetails(order);\n\t                return;\n\t            }\n\n\t            var groups = ctrl.ordersModel.pendingOrdersGroups,\n\t                group = null;\n\n\t            // Find the group containing this order\n\t            for (var i = 0, n = groups.length; i < n; i++) {\n\t                if (groups[i]['@id'] === order.accountId) {\n\t                    group = groups[i];\n\t                    break;\n\t                }\n\t            }\n\n\t            if (!group) {\n\t                $log.error('Error: Order ' + order.id + ' does not belong to any group.');\n\t                return;\n\t            }\n\n\t            order.send({ paymentId: order.id }, authorization).then(function (response) {\n\n\t                // check authorization\n\t                if (response.status === reviewTransfersConfig.statusAuthorization) {\n\t                    ctrl.authorize(order);\n\t                    return;\n\t                }\n\n\t                //refresh transactions?\n\t                if (order.type === transferTypes.bank) {\n\t                    bankTransferMade = true;\n\t                } else if (order.type === transferTypes.p2pEmail) {\n\t                    p2pTransferMade = true;\n\t                }\n\n\t                var orders = group.paymentOrders;\n\t                order.submitted = true;\n\n\t                $timeout(function () {\n\t                    // Remove orders\n\t                    orders.splice(orders.indexOf(order), 1);\n\t                    // Remove groups\n\t                    if (orders.length === 0) {\n\t                        groups.splice(groups.indexOf(group), 1);\n\t                    }\n\t                    // Remove p2p orders\n\t                    if (ctrl.p2pPaymentOrders.indexOf(order) > -1) {\n\t                        ctrl.p2pPaymentOrders.splice(ctrl.p2pPaymentOrders.indexOf(order), 1);\n\t                    }\n\t                    // Successfuly executed order. Keep processing...\n\t                    processOrdersSeq();\n\t                }, 1000);\n\t            }, function (error) {\n\t                if (error.status === 401) {\n\t                    ctrl.authorize(order);\n\t                } else if (error.status === 403) {\n\t                    ctrl.authorize(order);\n\t                    ctrl.review.modalError = 'Authorization error.';\n\t                    $timeout(function () {\n\t                        ctrl.review.modalError = '';\n\t                    }, 7000);\n\t                } else {\n\t                    $log.error('Error: Order ' + order.id + ' didn\\'t succeed.');\n\t                    ctrl.alerts.push('alerts.FAILURE', 'danger');\n\t                    ctrl.loading = false;\n\t                }\n\t            });\n\t        };\n\n\t        /**\n\t         * Delete order action\n\t         *\n\t         * @param group\n\t         * @param order\n\t         */\n\t        ctrl.removeOrder = function (group, order) {\n\t            var modalInstance = $modal.open({\n\t                template: $templateCache.get('templates/remove-confirmation.ng.html'),\n\t                controller: 'RemoveConfirmationCtrl',\n\t                resolve: {\n\t                    paymentOrder: function paymentOrder() {\n\t                        return order;\n\t                    }\n\t                }\n\t            });\n\n\t            modalInstance.result.then(function (response) {\n\t                var orderIndex = group.paymentOrders.indexOf(order);\n\t                group.paymentOrders.splice(orderIndex, 1);\n\t                if (group.paymentOrders.length === 0) {\n\t                    var groupIndex = ctrl.ordersModel.pendingOrdersGroups.indexOf(group);\n\t                    ctrl.ordersModel.pendingOrdersGroups.splice(groupIndex, 1);\n\t                }\n\t            }, function (err) {\n\t                //TODO: Add Error handling\n\t                console.log(err);\n\t            });\n\t        };\n\n\t        ctrl.authorize = function (order) {\n\t            var modalInstance = $modal.open({\n\t                template: $templateCache.get('templates/authorize.ng.html'),\n\t                controller: 'AuthenticationCtrl',\n\t                // size: size,\n\t                resolve: {\n\t                    currentOrder: function currentOrder() {\n\t                        return order;\n\t                    },\n\t                    modalError: function modalError() {\n\t                        return ctrl.review.modalError;\n\t                    }\n\t                }\n\t            });\n\n\t            modalInstance.result.then(function (authorization) {\n\t                ctrl.loading = false;\n\t                ctrl.authorizePayment(order, authorization);\n\t            }, function () {\n\t                ctrl.loading = false;\n\t                //TODO: Add Error handling\n\t            });\n\t        };\n\n\t        ctrl.verifyP2PDetails = function (order) {\n\t            var modalInstance = $modal.open({\n\t                template: $templateCache.get('templates/verify-p2p-details.ng.html'),\n\t                controller: 'VerificationCtrl',\n\t                resolve: {\n\t                    currentOrder: function currentOrder() {\n\t                        return order;\n\t                    },\n\t                    P2PUser: function P2PUser() {\n\t                        return ctrl.p2pUser;\n\t                    }\n\t                }\n\t            });\n\n\t            modalInstance.result.then(function (success) {\n\t                ctrl.loading = false;\n\t                order.verificationFailure = !success;\n\t                if (success === true) {\n\t                    ctrl.p2pUser.emailVerified = true;\n\t                    ctrl.submitPayment(order);\n\t                }\n\t            }, function (error) {\n\t                ctrl.loading = false;\n\t                //TODO: Add error handler\n\t            });\n\t        };\n\n\t        ctrl.sameCurrency = function () {\n\t            ctrl.loading = true;\n\t            var modalInstance = $modal.open({\n\t                template: $templateCache.get('templates/currency.not.same.html'),\n\t                controller: 'SameCurrencyCtrl'\n\t            });\n\n\t            modalInstance.result.then(function () {\n\t                ctrl.loading = false;\n\t            }, function () {\n\t                ctrl.loading = false;\n\t                //TODO: Add Error handling\n\t            });\n\t        };\n\n\t        initialize();\n\t    };\n\n\t    // @ngInject\n\t    exports.RemoveConfirmationCtrl = function ($scope, $timeout, $modalInstance, paymentOrder, lpPayments) {\n\t        $scope.error = { isError: false, message: '' };\n\t        $scope.paymentOrder = paymentOrder;\n\t        lpPayments = lpPayments.api();\n\n\t        $scope.remove = function () {\n\t            var delPromise = lpPayments.remove($scope.paymentOrder.id);\n\t            delPromise.then(function (res) {\n\t                $modalInstance.close(res);\n\t            }, function (error) {\n\t                // show error\n\t                $scope.error.isError = true;\n\t                $scope.error.message = error.statusText;\n\t                $timeout(function () {\n\t                    $scope.error.isError = false;\n\t                }, 4000);\n\t            });\n\t        };\n\n\t        $scope.cancel = function () {\n\t            $modalInstance.dismiss('cancel');\n\t        };\n\t    };\n\n\t    // @ngInject\n\t    exports.AuthenticationCtrl = function ($scope, $modalInstance, currentOrder, modalError) {\n\t        $scope.err = { modalError: modalError };\n\t        $scope.review = { 'auth_password': '' };\n\t        $scope.currentOrder = currentOrder;\n\n\t        $scope.authorize = function () {\n\t            $modalInstance.close($scope.review);\n\t        };\n\n\t        $scope.cancel = function () {\n\t            $modalInstance.dismiss('cancel');\n\t        };\n\t    };\n\n\t    // @ngInject\n\t    exports.VerificationCtrl = function ($scope, $modalInstance, currentOrder, P2PUser, lpCoreUtils, lpWidget, lpP2P) {\n\t        $scope.verify = {};\n\t        $scope.currentOrder = currentOrder;\n\t        $scope.p2pUser = P2PUser;\n\t        var p2pService = lpP2P.api('enroll-service').setConfig({\n\t            url: lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('p2pEnrollmentEndpoint'))\n\t        });\n\n\t        $scope.handleP2PVerification = function () {\n\t            p2pService.verifyCode($scope.p2pUser.email, $scope.verify.verificationCode).then(function (response) {\n\t                if (response.status === 200) {\n\t                    $modalInstance.close(true);\n\t                }\n\t            }, function (response) {\n\t                if (response.status === 400) {\n\t                    $modalInstance.close(false);\n\t                }\n\t            });\n\t        };\n\n\t        $scope.cancel = function () {\n\t            $modalInstance.dismiss('cancel');\n\t        };\n\t    };\n\n\t    // @ngInject\n\t    exports.SameCurrencyCtrl = function ($scope, $modalInstance) {\n\t        $scope.cancel = function () {\n\t            $modalInstance.dismiss('cancel');\n\t        };\n\t    };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\n\t  'use strict';\n\n\t  var _ = __webpack_require__(3).utils;\n\n\t  // @ngInject\n\n\t  var defaultProfileImage = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABPCAIAAADz89W0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MkVFRDI3OTJERUQxMUUzQkU4Qzk1MDlEQzAyMjFFNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3MkVFRDI3QTJERUQxMUUzQkU4Qzk1MDlEQzAyMjFFNCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjcyRUVEMjc3MkRFRDExRTNCRThDOTUwOURDMDIyMUU0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjcyRUVEMjc4MkRFRDExRTNCRThDOTUwOURDMDIyMUU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gildPAAABRdJREFUeNrsmstKI0EUhicmRmO8IoKIgigoCoovIOhOX8m38RncuHWjG0HFjeAl4GWhoAvvUZPMZ/6ZQ9OtmUBa04OnFk2luqo9X51LnVMzqZWVlV8/qbX8+mHNgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR34O1umkcWVSiX4M5VK2Yj6PDUt9Co6GPxI6MvB+U0GDlL9MZiWluBe6KkJ9iqI8RmDjVeq7cO/1TQN8wTm9fX16ekpn88/Pj5ms1kky+VyLy8vdMrlMoOtra100um0MWgLghj0mfD29mav+JnJZJKiYWuA9fb2jo2NiRYwhL64uIBf0k9NTTFHWyMY5kRtVX0msIqfPK+vr0ulUnRrmgyMHF1dXQsLCz09PYChlpubm7W1tbu7O2SFbXx8fGZmxpiZDwzToobKTwhZgmKfn5/Pz883NjaKxaJMo3FR0/Pz841/Ba0iGSSDg4MPDw/Ih27b29uPj495hbUXCoWRkRGELlYb5MDAzCv6etJ4xaD2BWzGh4aGmHl5eVnD4b8PWPpBFbK6q6ur0dFRlCxzbWtrw6sZ7OjoQNXIPTs7y2ScOVttTGCVvFTN+lI7P/kyP9k4vhkLc6NBCwmQiT76RLdbW1vLy8tyP8inp6dPT09RFHi49Pb29sDAgMyVJ+N0YI6eW6yFljkMEvyYw19pftCSQ0osheWTk5OjoyNCFLolgGHGc3Nzm5ubnZ2dbMf6+jquzvj7H85kbLOCja+xO4uLi2wWO4I5yMJjceBGMy3bcsRCOBnhzs7O/f09CmcvwJ6cnAQbWgi7u7vhyVcbVIxg1cxkOX1G6LM1eDLBWX4hS47LgWMAthiLuKgCJEx3b2+PETk2KsV1IZS7QmgeyxL5M5y5apO1M5lpds4rqicrtUS94gESZoAnJib6+/sBYBcI3ZiojqtQvik1auNub2+xDu2j3CRGS47fhzVCrEJRGCR+u7S0pIAE5/DwsDpRYEuniOe7u7vsnbKO1N8WL3MMufT74VZNIVAvHY4f/JDgjEoVYC0g84x+oVRt5WpjrX3zizTcaHloSlBKaJkjZ698WOoy3do0dfTKEmw6+DNPTbCWFA2HVC0DVpOtKsYyfnBwsL+/T4gyk+aVlC8kebuKEL1VREhWPRws8aIVrD15RWp9dnYGQyhpEZvgdUQpb5MXVAItKUHLXM4MW/KZKeotZ4/O3mipYGvVOITxZKUllmNGLxuar+HQ1QT6URqsA5noRVIZugOIOoX8glWazEdk2DF6ciZ2J7E8RC4qbPItKkTxh6wjeDeiJcQ50hVLM1G4YkGC6uEQsIWcYMWD6HaVESo8dKppnBGcWaFLsZrz2WJbEjUsEqvvTWl20RHKW2zQtsBuCKiZqCsPDw/tbiiJGpboxFskNjyJa5VgjSs73RCpzKbuJ9ksFApkMhYLkwgMGInx6uoqRZKUo6u5f2rJ/FlVhOqwvr6+GAumr9Kwkko0U7+UZtLsi2KVQoDcwbKUJPqwLiikIrmxyil5bG0N6zKEQlpHsZRsdwzJ1TAiIqhiDzmj7qssONVYq9ybtVKsrUpWLh2NQBDKaaVnRFc9XOdyqVp3l1aZJNSkLdlUTLYiIXjY1nm1EDx77QxL6DkcyoHr+QexaGYe7SRUw9EEu55z5bOFH36qaRcA/11zYAd2YAd2YAd2YAd2YAd2YAd2YAd24B/QMrH/J4qkA8f7Pyhcw+7DzW6/BRgAykJQPtOgddIAAAAASUVORK5CYII=';\n\n\t  var extractInitials = function extractInitials(name) {\n\n\t    var initials = '';\n\t    name = name.split(' ');\n\n\t    for (var i = 0; i < name.length; i++) {\n\t      initials += name[i].substr(0, 1);\n\t    }\n\n\t    initials = initials.toUpperCase();\n\t    return initials;\n\t  };\n\n\t  var getColorFromInitials = function getColorFromInitials(initials) {\n\n\t    var a = initials.charCodeAt(0) - 64;\n\t    var x = a + 120;\n\n\t    var i = Math.floor((a - 1) / (26 - 1) * (5 - 1) + 1 - 1);\n\t    var colors = [[x, 210, 210], [x, x, 210], [210, x, x], [x, 210, x], [210, x, 210]];\n\t    return colors[i];\n\t  };\n\n\t  exports.getDefaultProfileImage = function (name, width, height, color) {\n\n\t    var canvas = document.createElement('canvas');\n\n\t    if (!name || !canvas.getContext || !canvas.getContext('2d')) {\n\t      return defaultProfileImage;\n\t    }\n\n\t    var initials = extractInitials(name);\n\t    color = color || getColorFromInitials(initials);\n\n\t    canvas.setAttribute('width', width);\n\t    canvas.setAttribute('height', height);\n\t    var ctx = canvas.getContext('2d');\n\n\t    ctx.fillStyle = _.isArray(color) ? 'rgb(' + color.join(',') + ')' : color;\n\t    ctx.fillRect(0, 0, width, height);\n\t    ctx.fillStyle = 'rgb(250,250,250)';\n\n\t    var scale;\n\t    // var marginRight = 0;\n\n\t    switch (initials.length) {\n\t      case 1:\n\t        scale = 0.6;\n\t        // marginRight = 4;\n\t        break;\n\n\t      case 2:\n\t        scale = 0.5;\n\t        // marginRight = 3;\n\t        break;\n\n\t      case 3:\n\t        scale = 0.45;\n\t        // marginRight = 2;\n\t        break;\n\n\t      default:\n\t        scale = 0.3;\n\t        // marginRight = 0;\n\t        break;\n\t    }\n\n\t    var fontSize = parseInt(scale * height, 10);\n\t    var marginBottom = Math.floor(0.15 * height);\n\n\t    ctx.font = fontSize + 'px Proxima Regular, Helvetica Nueue, Helvetica, Arial, sans-serif';\n\t    ctx.textAlign = 'right';\n\t    ctx.fillText(initials, width - 3, height - marginBottom);\n\n\t    var dataUri = canvas.toDataURL('image/png');\n\t    return dataUri;\n\t  };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\n\t/**\n\t* Models\n\t* @module Models\n\t*/\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function (require, exports, module) {\n\n\t  'use strict';\n\n\t  // @ngInject\n\n\t  exports.lpAlerts = function ($timeout) {\n\t    var ALERT_TIMEOUT = 5000;\n\t    var alerts = [];\n\n\t    this.list = function () {\n\t      return alerts;\n\t    };\n\n\t    this.close = function () {\n\t      alerts = [];\n\t    };\n\n\t    this.push = function (message, type, timeout) {\n\t      this.close();\n\t      var self = this;\n\t      alerts.push({\n\t        type: type || 'danger',\n\t        msg: message\n\t      });\n\t      if (timeout) {\n\t        $timeout(function () {\n\t          self.close();\n\t        }, ALERT_TIMEOUT);\n\t      }\n\t    };\n\t  };\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** scripts/main.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 5bd8c51c0cb9178e255d\n **/","/**\n * @module widget-review-transfers\n * @version 1.0.0\n * @file widget-review-transfers description\n * @copyright Backbase Amsterdam\n * @requires module:lp/base\n * @requires module:lp/resources/core\n * @requires module:lp/resources/ui\n * @requires interact\n *\n * @example Require Widget\n * // add this in the index.html\n * window.requireWidget( __WIDGET__,'scripts/index');\n */\n\ndefine(function(require, exports, module) {\n\n    'use strict';\n\n    module.name = 'widget-review-transfers';\n\n    /**\n     * Dependencies\n     */\n    var base = require('base');\n    var core = require('core');\n    var ui = require('ui');\n\n    var accounts = require('module-accounts');\n    var payments = require('module-payments');\n    var p2p = require('module-p2p');\n\n    /**\n     * Angular - Translate libs\n     */\n    // require('translateMessageFormat');\n    // require(['messageformatLocale/en']);\n    // require(['messageformatLocale/lt']);\n\n    var deps = [\n        core.name,\n        ui.name,\n        accounts.name,\n        payments.name,\n        p2p.name\n    ];\n\n    // @ngInject\n    function run(lpWidget, lpAccounts, lpCoreBus, lpPayments) {\n        // Pass config to module providers.\n        lpAccounts.setConfig({\n            'accountsEndpoint': lpWidget.getPreference('accountsDataSrc')\n        });\n        lpPayments.setConfig({\n            'paymentsEndpoint': lpWidget.getPreference('pendingPaymentOrdersDataSrc')\n        });\n\n        if(lpWidget && lpWidget.model && lpWidget.model.name){\n            lpCoreBus.publish('cxp.item.loaded', { id: lpWidget.model.name });\n        }\n    }\n\n    module.exports = base.createModule(module.name, deps)\n        .constant(require('./constants'))\n        .controller(require('./controllers'))\n        .service(require('./models'))\n        .run(run);\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/main.js\n **/","module.exports = function(module) {\r\n\tif(!module.webpackPolyfill) {\r\n\t\tmodule.deprecate = function() {};\r\n\t\tmodule.paths = [];\r\n\t\t// module.parent = undefined by default\r\n\t\tmodule.children = [];\r\n\t\tmodule.webpackPolyfill = 1;\r\n\t}\r\n\treturn module;\r\n}\r\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** (webpack)/buildin/module.js\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"base\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"core\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"ui\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"module-accounts\"\n ** module id = 6\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"module-payments\"\n ** module id = 7\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_8__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"module-p2p\"\n ** module id = 8\n ** module chunks = 0\n **/","define( function (require, exports, module) {\n  'use strict';\n\n  exports.reviewTransfersConfig = {\n    statusSuccess: 'PENDING', // Success status response from server\n    statusAuthorization: 'AUTHORIZATION_NEEDED',\n    statusAuthorizationError: 'UNSUCCESSFUL_AUTHORIZATION'\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/constants.js\n **/","/**\n * Controllers\n * @module controllers\n */\ndefine(function(require, exports) {\n\n    'use strict';\n\n    var _ = require('base').utils;\n    var profile = require('./profile-image');\n\n    /**\n     * MainCtrl description.\n     */\n    // @ngInject\n    exports.MainCtrl = function ($templateCache, lpAlerts, $translate, $modal, $log, $timeout, lpPayments, lpAccounts, transferTypes, lpCoreBus, lpCoreUpdate, lpP2P, reviewTransfersConfig, lpCoreUtils, lpWidget) {\n        var ctrl = this;\n        var p2pTransferMade = false;\n        var bankTransferMade = false;\n        var p2pService = lpP2P.api('enroll-service')\n            .setConfig({\n                url: lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('p2pEnrollmentEndpoint'))\n            });\n\n        lpPayments = lpPayments.api();\n        ctrl.review = {};\n\n        $templateCache.put('templates/verify-p2p-details.ng.html',\n            '<div class=\"modal-header\">' +\n            '    <h2><i class=\"lp-icon lp-icon-xxl lp-icon-info-sign\"></i> <span lp-i18n=\"Verify your contact details\"></span></h2>' +\n            '</div>' +\n            '<form role=\"form\" ng-submit=\"handleP2PVerification()\">' +\n            '    <div class=\"modal-body\">' +\n            '       <p>' +\n            '           <span lp-i18n=\"We have sent a message containing a verification code to {{p2pUser.email}}.\"></span>' +\n            '           <br />' +\n            '           <span lp-i18n=\"Please check your email and enter the code\"></span>' +\n            '       </p>' +\n            '       <p lp-i18n=\"The code will expire in 20 minutes\"></p>' +\n            '       <div ng-class=\"{\\'has-error\\': verify.validationError && verify.verificationCode.length > 0, \\'has-feedback\\': true, \\'form-group\\': true}\">' +\n            '           <label class=\"control-label\"><strong lp-i18n=\"Verification Code:\"></strong></label>' +\n            '           <input type=\"input\" ng-model=\"verify.verificationCode\" class=\"form-control\" tabindex=\"0\" aria-label=\"Verification code\" maxlength=\"4\" placeholder=\"enter the 4 digits\" />' +\n            '       </div>' +\n            '    </div>' +\n            '    <div class=\"modal-footer text-right\">' +\n            '       <button name=\"closeModal\" class=\"btn btn-link\" ng-click=\"cancel()\" type=\"button\" lp-i18n=\"Cancel\"></button>' +\n            '       <button name=\"resendCode\" class=\"btn btn-link\" type=\"button\" lp-i18n=\"Resend Code\"></button>' +\n            '       <button type=\"submit\" class=\"btn btn-primary\" ng-disabled=\"!verify.verificationCode\" lp-i18n=\"Submit\"></button>' +\n            '    </div>' +\n            '</form>');\n\n        $templateCache.put('templates/authorize.ng.html',\n            '<div class=\"modal-header\">' +\n            '    <h2>' +\n            '        <i class=\"lp-icon lp-icon-xxl lp-icon-info-sign\"></i>' +\n            '        <span lp-i18n=\"Verify your payment(s)\"></span>' +\n            '    </h2>' +\n            '</div>' +\n            '<form role=\"form\" ng-submit=\"authorize()\">' +\n            '    <div class=\"modal-body\">' +\n            '        <div ng-show=\"err.modalError\">' +\n            '            <div alert=\"alert\" type=\"danger\">{{ err.modalError | translate }}</div>' +\n            '        </div>' +\n            '        <p>Because your transaction to <b>{{currentOrder.counterpartyName}}</b> is over <span lp-amount=\"1000\" lp-amount-currency=\"currentOrder.instructedCurrency\" locale=\"locale\"></span>(<i><span lp-amount=\"currentOrder.instructedAmount\" lp-amount-currency=\"currentOrder.instructedCurrency\" locale=\"locale\"></span></i>), you need to verify it.</p>' +\n            '        <div class=\"form-group has-feedback\">' +\n            '            <label class=\"control-label\"><strong lp-i18n=\"Please enter authentication code:\"></strong></label>' +\n            '            <input type=\"password\" ng-model=\"review.auth_password\" class=\"form-control \" placeholder=\"Password\" />' +\n            '        </div>' +\n            '    </div>' +\n            '    <div class=\"modal-footer text-right\" >' +\n            '        <button name=\"closeModal\" class=\"btn btn-link\" ng-click=\"cancel()\" type=\"button\" lp-i18n=\"Cancel\"></button>' +\n            '        <button type=\"submit\" class=\"btn btn-primary\" ng-disabled=\"!review.auth_password\" lp-i18n=\"Verify\"></button>' +\n            '    </div>' +\n            '</form>');\n\n        $templateCache.put('templates/remove-confirmation.ng.html',\n            '<div class=\"modal-header\">' +\n            '    <h2><i class=\"lp-icon lp-icon-xxl lp-icon-info-sign\"></i> <span lp-i18n=\"Please confirm\"></span></h2>' +\n            '</div>' +\n            '<form role=\"form\" ng-submit=\"remove()\">' +\n            '    <div class=\"modal-body\">' +\n            '        <div ng-show=\"review.modalError\">' +\n            '        <div alert=\"alert\" type=\"danger\">{{ review.modalError | translate }}</div>' +\n            '        </div>' +\n            '        <p>' +\n            '            <b lp-i18n=\"Are you sure you want to remove this payment?\"></b>' +\n            '        </p>' +\n            '        <div class=\"row\">' +\n            '            <div class=\"col-xs-8\">' +\n            '            <small class=\"text-muted\" lp-i18n=\"messages.TRANSFER_TO\"></small><span class=\"h4\" itemprop=\"counterpartyName\"> {{paymentOrder.counterpartyName}}</span>' +\n            '        </div>' +\n            '        <div class=\"col-xs-4 text-right\">' +\n            '            <span class=\"h4\" lp-amount=\"paymentOrder.instructedAmount\" lp-amount-currency=\"paymentOrder.instructedCurrency\" itemprop=\"instructedAmount\"></span>' +\n            '        </div>' +\n            '    </div>' +\n            '    <div class=\"row\">' +\n            '        <div class=\"col-xs-8\">' +\n            '            <small class=\"text-muted\">' +\n            '                {{ paymentOrder.accountDetails }}' +\n            '            </small>' +\n            '            </div>' +\n            '            <div class=\"col-xs-4 text-right\">' +\n            '                <small class=\"text-muted\" translate>{{ paymentOrder.onDate | date:\\'longDate\\' }}</small>' +\n            '            </div>' +\n            '        </div>' +\n            '    </div>' +\n            '    <div class=\"modal-footer text-right\" >' +\n            '        <div ng-show=\"error.isError\" class=\"bg-warning text-danger pull-left\" lp-i18n=\"Server error!\"></div>' +\n            '        <button name=\"closeModal\" class=\"btn btn-link\" ng-click=\"cancel()\" type=\"button\" lp-i18n=\"Cancel\"></button>' +\n            '        <button type=\"submit\" class=\"btn btn-danger\" lp-i18n=\"Remove\"></button>' +\n            '    </div>' +\n            '</form>');\n\n        $templateCache.put('templates/currency.not.same.html',\n            '<div class=\"modal-header\">' +\n            '   <h2><i class=\"lp-icon lp-icon-xxl lp-icon-info-sign\"></i> <span lp-i18n=\"Total amount\"></span></h2>' +\n            '</div>' +\n            '<form role=\"form\">' +\n            '    <div class=\"modal-body\">' +\n            '       <p lp-i18n=\"Please note that in case of multi-currency usage the transfers cannot be calculated.' +\n            '       Total amount is shown only for the same currency.\"></p>' +\n            '   </div>' +\n            '   <div class=\"modal-footer text-right\" >' +\n            '       <button class=\"btn btn-primary\" ng-click=\"cancel()\" type=\"button\" lp-i18n=\"Ok\"></button>' +\n            '   </div>' +\n            '</form>'\n        );\n\n        ctrl.decodePhotoUrl = function(photo) {\n            return profile.getDefaultProfileImage(photo, 50, 50);\n        };\n\n        /**\n         * Update model of the widget\n         */\n        var updateModel = function () {\n\n            ctrl.loading = true;\n\n            return lpAccounts.load().then(function (accounts) {\n\n                var identifiers = accounts.map(function (account) {\n                    return account.id;\n                });\n\n                //store unsent P2P payments here so widget doesn't think all po's are sent\n                ctrl.p2pPaymentOrders = ctrl.p2pPaymentOrders || [];\n\n                return lpPayments.load(identifiers).then(function () {\n                    return p2pService.getAll();\n                })\n                .then(function (data) {\n                    ctrl.p2pUser = {\n                        accountNumber: data.accountNumber,\n                        email: data.email,\n                        emailVerified: data.emailVerified\n                    };\n                })\n                ['catch'](function () {\n                    ctrl.p2pUser = {\n                        emailVerified: false\n                    };\n                })\n                ['finally'](function() {\n                    ctrl.loading = false;\n                });\n\n            });\n        };\n\n        var initialize = function () {\n\n            ctrl.hideFooter = lpCoreUtils.parseBoolean(lpWidget.getPreference('hideFooter'));\n\n            ctrl.alerts = lpAlerts;\n            ctrl.accountsModel = lpAccounts;\n            ctrl.ordersModel = lpPayments;\n            ctrl.ordersModel.pendingOrdersGroups = [];\n\n            updateModel()['finally'](function() {\n                // Flush possible previous events before subscribing to prevent double updateModel call\n                lpCoreBus.unsubscribe('launchpad-retail.paymentOrderInitiated', updateModel);\n                lpCoreBus.subscribe('launchpad-retail.paymentOrderInitiated', updateModel);\n            });\n        };\n\n        /**\n         * Returns transfers total information\n         * TODO: Once API supports, this data should be pulled from PaymentsAPI\n         */\n        ctrl.pendingOrdersTotals = function() {\n            var groups = ctrl.ordersModel.pendingOrdersGroups;\n            var amount = 0;\n            var count = 0;\n            var currency;\n\n            if (!groups || !groups.length) {\n                return false;\n            }\n\n            currency = groups[0].paymentOrders[0].instructedCurrency;\n\n            for (var i = 0, len = groups.length; i < len; i++) {\n                for(var j = 0; j < groups[i].paymentOrders.length; j++) {\n                    amount += groups[i].paymentOrders[j].instructedAmount;\n                    if (currency && currency !== groups[i].paymentOrders[j].instructedCurrency) {\n                        currency = false;\n                    }\n                    count++;\n                }\n            }\n\n            return {\n                count: count,\n                amount: amount,\n                currency: currency\n            };\n        };\n\n        ctrl.changeLanguage = function (key) {\n            $translate.use(key);\n        };\n\n        /**\n         * EDIT ORDER\n         *\n         * @param order\n         */\n        ctrl.editOrder = function (order) {\n            ctrl.makePayment();\n            lpCoreBus.publish('lpMoneyTransfer.update', ctrl.ordersModel.makeFormObject(order));\n        };\n\n        ctrl.makePayment = function(){\n            ctrl.alerts.close();\n            lpCoreBus.publish('launchpad-retail.requestMoneyTransfer');\n            // gadgets.pubsub.Publish('launchpad-retail.requestMoneyTransfer');\n        };\n\n        /**\n         * Publish pub sub messages to instruct other widgets to refresh transaction lists\n         */\n        var refreshTransactionWidgets = function() {\n            if (bankTransferMade) {\n                lpCoreBus.publish('launchpad-retail.transactions.newTransferSubmitted');\n                // gadgets.pubsub.publish('launchpad-retail.transactions.newTransferSubmitted');\n            }\n\n            if (p2pTransferMade) {\n                lpCoreBus.publish('launchpad-retail.p2pTransactions.newTransferSubmitted');\n                // gadgets.pubsub.publish('launchpad-retail.p2pTransactions.newTransferSubmitted');\n            }\n\n            //reset flags for next group of transfers\n            bankTransferMade = false;\n            p2pTransferMade = false;\n        };\n\n        /*\n         * Submit pending orders sequentially\n         * Processes items in ctrl.pendingOrders\n         */\n        var processOrdersSeq = function() {\n            if (ctrl.pendingOrders.length === 0 && ctrl.p2pPaymentOrders.length === 0) {\n                ctrl.alerts.push('alerts.SUBMITTED', 'success');\n                ctrl.loading = false;\n                refreshTransactionWidgets();\n                return;\n            }\n\n            // Get the first order\n            var order = ctrl.pendingOrders.pop();\n\n            if (order) {\n                //if p2p po, add to list and reset verification status\n                if (order.type === transferTypes.p2pEmail) {\n                    order.verificationFailure = false;\n                    ctrl.p2pPaymentOrders.push(order);\n                }\n                ctrl.submitPayment(order);\n            } else {\n                //pending orders list is empty, reset p2p validation and array\n                ctrl.p2pPaymentOrders = [];\n                ctrl.p2pVerificationFailed = false;\n            }\n        };\n\n        // Submit all pending payments\n        ctrl.submitPayments = function(paymentsGroups) {\n            ctrl.loading = true;\n            var pendingOrders = [];\n\n            _.forEach(ctrl.ordersModel.pendingOrdersGroups, function(group) {\n                pendingOrders = pendingOrders.concat(group.paymentOrders);\n            });\n\n            ctrl.pendingOrders = pendingOrders;\n            processOrdersSeq();\n        };\n\n        if(ctrl.hideFooter) {\n            lpCoreBus.subscribe('payments:submit', function () {\n                ctrl.submitPayments(ctrl.ordersModel.pendingOrdersGroups);\n            });\n        }\n\n        ctrl.authorizePayment = function(order, authorization) {\n            ctrl.submitPayment(order, authorization);\n        };\n\n        // Submit a specific pending payment\n        ctrl.submitPayment = function(order, authorization) {\n\n            $log.info('Processing ' + order.id + ' payment order');\n            if (order.verificationFailure) {\n                processOrdersSeq();\n                return;\n            }\n\n            //if the user's P2P details need to verified\n            if (order.type === transferTypes.p2pEmail && !ctrl.p2pUser.emailVerified) {\n                ctrl.verifyP2PDetails(order);\n                return;\n            }\n\n            var groups = ctrl.ordersModel.pendingOrdersGroups,\n                group = null;\n\n            // Find the group containing this order\n            for (var i = 0, n = groups.length; i < n; i++) {\n                if (groups[i]['@id'] === order.accountId) {\n                    group = groups[i];\n                    break;\n                }\n            }\n\n            if ( !group ) {\n                $log.error('Error: Order ' + order.id + ' does not belong to any group.');\n                return;\n            }\n\n            order.send({paymentId: order.id}, authorization).then(function(response) {\n\n                // check authorization\n                if (response.status === reviewTransfersConfig.statusAuthorization) {\n                    ctrl.authorize(order);\n                    return;\n                }\n\n                //refresh transactions?\n                if (order.type === transferTypes.bank) {\n                    bankTransferMade = true;\n                } else if (order.type === transferTypes.p2pEmail) {\n                    p2pTransferMade = true;\n                }\n\n                var orders = group.paymentOrders;\n                order.submitted = true;\n\n                $timeout(function(){\n                    // Remove orders\n                    orders.splice(orders.indexOf(order), 1);\n                    // Remove groups\n                    if (orders.length === 0) {\n                        groups.splice(groups.indexOf(group), 1);\n                    }\n                    // Remove p2p orders\n                    if (ctrl.p2pPaymentOrders.indexOf(order) > -1) {\n                        ctrl.p2pPaymentOrders.splice(ctrl.p2pPaymentOrders.indexOf(order), 1);\n                    }\n                    // Successfuly executed order. Keep processing...\n                    processOrdersSeq();\n                }, 1000);\n\n            }, function(error) {\n                if (error.status === 401) {\n                    ctrl.authorize(order);\n                } else if (error.status === 403) {\n                    ctrl.authorize(order);\n                    ctrl.review.modalError = 'Authorization error.';\n                    $timeout(function() { ctrl.review.modalError = ''; }, 7000);\n                } else {\n                    $log.error('Error: Order ' + order.id + ' didn\\'t succeed.');\n                    ctrl.alerts.push('alerts.FAILURE', 'danger');\n                    ctrl.loading = false;\n                }\n            });\n        };\n\n        /**\n         * Delete order action\n         *\n         * @param group\n         * @param order\n         */\n        ctrl.removeOrder = function(group, order) {\n            var modalInstance = $modal.open({\n                template: $templateCache.get('templates/remove-confirmation.ng.html'),\n                controller: 'RemoveConfirmationCtrl',\n                resolve: {\n                    paymentOrder: function() {\n                        return order;\n                    }\n                }\n            });\n\n            modalInstance.result.then(function (response) {\n                var orderIndex = group.paymentOrders.indexOf(order);\n                group.paymentOrders.splice(orderIndex, 1);\n                if (group.paymentOrders.length === 0) {\n                    var groupIndex = ctrl.ordersModel.pendingOrdersGroups.indexOf(group);\n                    ctrl.ordersModel.pendingOrdersGroups.splice(groupIndex, 1);\n                }\n            }, function (err) {\n                //TODO: Add Error handling\n                console.log(err);\n            });\n        };\n\n        ctrl.authorize = function (order) {\n            var modalInstance = $modal.open({\n                template: $templateCache.get('templates/authorize.ng.html'),\n                controller: 'AuthenticationCtrl',\n                // size: size,\n                resolve: {\n                    currentOrder: function() {\n                        return order;\n                    },\n                    modalError: function() {\n                        return ctrl.review.modalError;\n                    }\n                }\n            });\n\n            modalInstance.result.then(function (authorization) {\n                ctrl.loading = false;\n                ctrl.authorizePayment(order, authorization);\n            }, function () {\n                ctrl.loading = false;\n                //TODO: Add Error handling\n            });\n        };\n\n        ctrl.verifyP2PDetails = function (order) {\n            var modalInstance = $modal.open({\n                template: $templateCache.get('templates/verify-p2p-details.ng.html'),\n                controller: 'VerificationCtrl',\n                resolve: {\n                    currentOrder: function() {\n                        return order;\n                    },\n                    P2PUser: function() {\n                        return ctrl.p2pUser;\n                    }\n                }\n            });\n\n            modalInstance.result.then(\n                function (success) {\n                    ctrl.loading = false;\n                    order.verificationFailure = !success;\n                    if (success === true) {\n                        ctrl.p2pUser.emailVerified = true;\n                        ctrl.submitPayment(order);\n                    }\n                }, function (error) {\n                    ctrl.loading = false;\n                    //TODO: Add error handler\n                }\n            );\n        };\n\n        ctrl.sameCurrency = function () {\n            ctrl.loading = true;\n            var modalInstance = $modal.open({\n                template: $templateCache.get('templates/currency.not.same.html'),\n                controller: 'SameCurrencyCtrl'\n            });\n\n            modalInstance.result.then(function () {\n                ctrl.loading = false;\n            }, function () {\n                ctrl.loading = false;\n                //TODO: Add Error handling\n            });\n        };\n\n        initialize();\n    };\n\n    // @ngInject\n    exports.RemoveConfirmationCtrl = function($scope, $timeout, $modalInstance, paymentOrder, lpPayments) {\n        $scope.error = { isError: false, message: ''};\n        $scope.paymentOrder = paymentOrder;\n        lpPayments = lpPayments.api();\n\n        $scope.remove = function() {\n            var delPromise = lpPayments.remove($scope.paymentOrder.id);\n            delPromise.then(function(res) {\n                $modalInstance.close(res);\n            }, function(error) {\n                // show error\n                $scope.error.isError = true;\n                $scope.error.message = error.statusText;\n                $timeout(function() { $scope.error.isError = false; }, 4000);\n            });\n        };\n\n        $scope.cancel = function () {\n            $modalInstance.dismiss('cancel');\n        };\n    };\n\n    // @ngInject\n    exports.AuthenticationCtrl = function($scope, $modalInstance, currentOrder, modalError) {\n        $scope.err = { modalError: modalError };\n        $scope.review = { 'auth_password': '' };\n        $scope.currentOrder = currentOrder;\n\n        $scope.authorize = function() {\n            $modalInstance.close($scope.review);\n        };\n\n        $scope.cancel = function () {\n            $modalInstance.dismiss('cancel');\n        };\n    };\n\n    // @ngInject\n    exports.VerificationCtrl = function($scope, $modalInstance, currentOrder, P2PUser, lpCoreUtils, lpWidget, lpP2P) {\n        $scope.verify = {};\n        $scope.currentOrder = currentOrder;\n        $scope.p2pUser = P2PUser;\n        var p2pService = lpP2P.api('enroll-service')\n            .setConfig({\n                url: lpCoreUtils.resolvePortalPlaceholders(lpWidget.getPreference('p2pEnrollmentEndpoint'))\n            });\n\n        $scope.handleP2PVerification = function () {\n            p2pService.verifyCode($scope.p2pUser.email, $scope.verify.verificationCode).then(function(response) {\n                if(response.status === 200) {\n                    $modalInstance.close(true);\n                }\n            }, function(response) {\n                if(response.status === 400) {\n                    $modalInstance.close(false);\n                }\n            });\n        };\n\n        $scope.cancel = function () {\n            $modalInstance.dismiss('cancel');\n        };\n    };\n\n    // @ngInject\n    exports.SameCurrencyCtrl = function($scope, $modalInstance) {\n        $scope.cancel = function () {\n            $modalInstance.dismiss('cancel');\n        };\n    };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/controllers.js\n **/","define(function (require, exports, module) {\n\n  'use strict';\n\n\tvar _ = require('base').utils;\n\n\t// @ngInject\n\n\n\t\tvar defaultProfileImage = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFAAAABPCAIAAADz89W0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3MkVFRDI3OTJERUQxMUUzQkU4Qzk1MDlEQzAyMjFFNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo3MkVFRDI3QTJERUQxMUUzQkU4Qzk1MDlEQzAyMjFFNCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjcyRUVEMjc3MkRFRDExRTNCRThDOTUwOURDMDIyMUU0IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjcyRUVEMjc4MkRFRDExRTNCRThDOTUwOURDMDIyMUU0Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+gildPAAABRdJREFUeNrsmstKI0EUhicmRmO8IoKIgigoCoovIOhOX8m38RncuHWjG0HFjeAl4GWhoAvvUZPMZ/6ZQ9OtmUBa04OnFk2luqo9X51LnVMzqZWVlV8/qbX8+mHNgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR3YgR34O1umkcWVSiX4M5VK2Yj6PDUt9Co6GPxI6MvB+U0GDlL9MZiWluBe6KkJ9iqI8RmDjVeq7cO/1TQN8wTm9fX16ekpn88/Pj5ms1kky+VyLy8vdMrlMoOtra100um0MWgLghj0mfD29mav+JnJZJKiYWuA9fb2jo2NiRYwhL64uIBf0k9NTTFHWyMY5kRtVX0msIqfPK+vr0ulUnRrmgyMHF1dXQsLCz09PYChlpubm7W1tbu7O2SFbXx8fGZmxpiZDwzToobKTwhZgmKfn5/Pz883NjaKxaJMo3FR0/Pz841/Ba0iGSSDg4MPDw/Ih27b29uPj495hbUXCoWRkRGELlYb5MDAzCv6etJ4xaD2BWzGh4aGmHl5eVnD4b8PWPpBFbK6q6ur0dFRlCxzbWtrw6sZ7OjoQNXIPTs7y2ScOVttTGCVvFTN+lI7P/kyP9k4vhkLc6NBCwmQiT76RLdbW1vLy8tyP8inp6dPT09RFHi49Pb29sDAgMyVJ+N0YI6eW6yFljkMEvyYw19pftCSQ0osheWTk5OjoyNCFLolgGHGc3Nzm5ubnZ2dbMf6+jquzvj7H85kbLOCja+xO4uLi2wWO4I5yMJjceBGMy3bcsRCOBnhzs7O/f09CmcvwJ6cnAQbWgi7u7vhyVcbVIxg1cxkOX1G6LM1eDLBWX4hS47LgWMAthiLuKgCJEx3b2+PETk2KsV1IZS7QmgeyxL5M5y5apO1M5lpds4rqicrtUS94gESZoAnJib6+/sBYBcI3ZiojqtQvik1auNub2+xDu2j3CRGS47fhzVCrEJRGCR+u7S0pIAE5/DwsDpRYEuniOe7u7vsnbKO1N8WL3MMufT74VZNIVAvHY4f/JDgjEoVYC0g84x+oVRt5WpjrX3zizTcaHloSlBKaJkjZ698WOoy3do0dfTKEmw6+DNPTbCWFA2HVC0DVpOtKsYyfnBwsL+/T4gyk+aVlC8kebuKEL1VREhWPRws8aIVrD15RWp9dnYGQyhpEZvgdUQpb5MXVAItKUHLXM4MW/KZKeotZ4/O3mipYGvVOITxZKUllmNGLxuar+HQ1QT6URqsA5noRVIZugOIOoX8glWazEdk2DF6ciZ2J7E8RC4qbPItKkTxh6wjeDeiJcQ50hVLM1G4YkGC6uEQsIWcYMWD6HaVESo8dKppnBGcWaFLsZrz2WJbEjUsEqvvTWl20RHKW2zQtsBuCKiZqCsPDw/tbiiJGpboxFskNjyJa5VgjSs73RCpzKbuJ9ksFApkMhYLkwgMGInx6uoqRZKUo6u5f2rJ/FlVhOqwvr6+GAumr9Kwkko0U7+UZtLsi2KVQoDcwbKUJPqwLiikIrmxyil5bG0N6zKEQlpHsZRsdwzJ1TAiIqhiDzmj7qssONVYq9ybtVKsrUpWLh2NQBDKaaVnRFc9XOdyqVp3l1aZJNSkLdlUTLYiIXjY1nm1EDx77QxL6DkcyoHr+QexaGYe7SRUw9EEu55z5bOFH36qaRcA/11zYAd2YAd2YAd2YAd2YAd2YAd2YAd24B/QMrH/J4qkA8f7Pyhcw+7DzW6/BRgAykJQPtOgddIAAAAASUVORK5CYII=';\n\n\t\tvar extractInitials = function(name) {\n\n      var initials = '';\n      name = name.split(' ');\n\n      for (var i = 0; i < name.length; i++) {\n        initials += name[i].substr(0, 1);\n      }\n\n      initials = initials.toUpperCase();\n      return initials;\n\n    };\n\n\t\tvar getColorFromInitials = function(initials) {\n\n      var a = initials.charCodeAt(0) - 64;\n      var x = a + 120;\n\n      var i = Math.floor((((a - 1) / (26 - 1)) * (5 - 1) + 1) - 1);\n      var colors = [\n        [ x, 210, 210 ],\n        [ x, x, 210 ],\n        [ 210, x, x ],\n        [ x, 210, x ],\n        [ 210, x, 210 ]\n      ];\n      return colors[i];\n    };\n\n\t\texports.getDefaultProfileImage = function(name, width, height, color) {\n\n      var canvas = document.createElement('canvas');\n\n      if (!name || !canvas.getContext || !canvas.getContext('2d') ) {\n        return defaultProfileImage;\n      }\n\n      var initials = extractInitials(name);\n      color = color || getColorFromInitials(initials);\n\n      canvas.setAttribute('width', width);\n      canvas.setAttribute('height', height);\n      var ctx = canvas.getContext('2d');\n\n      ctx.fillStyle = _.isArray(color) ? 'rgb(' + color.join(',') + ')' : color;\n      ctx.fillRect(0, 0, width, height);\n      ctx.fillStyle = 'rgb(250,250,250)';\n\n      var scale;\n      // var marginRight = 0;\n\n      switch (initials.length) {\n        case 1:\n          scale = 0.6;\n          // marginRight = 4;\n          break;\n\n        case 2:\n          scale = 0.5;\n          // marginRight = 3;\n          break;\n\n        case 3:\n          scale = 0.45;\n          // marginRight = 2;\n          break;\n\n        default:\n          scale = 0.3;\n          // marginRight = 0;\n          break;\n      }\n\n      var fontSize = parseInt( scale * height, 10);\n      var marginBottom = Math.floor( 0.15 * height);\n\n      ctx.font = fontSize + 'px Proxima Regular, Helvetica Nueue, Helvetica, Arial, sans-serif';\n      ctx.textAlign = 'right';\n      ctx.fillText(initials, width - 3, height - marginBottom);\n\n      var dataUri = canvas.toDataURL('image/png');\n      return dataUri;\n    };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/profile-image.js\n **/","/**\n* Models\n* @module Models\n*/\ndefine(function (require, exports, module) {\n\n  'use strict';\n\n  // @ngInject\n  exports.lpAlerts = function($timeout) {\n    var ALERT_TIMEOUT = 5000;\n    var alerts = [];\n\n    this.list = function() {\n      return alerts;\n    };\n\n    this.close = function() {\n      alerts = [];\n    };\n\n    this.push = function(message, type, timeout) {\n      this.close();\n      var self = this;\n      alerts.push({\n        type: type || 'danger',\n        msg: message\n      });\n      if (timeout) {\n        $timeout(function() { self.close(); }, ALERT_TIMEOUT);\n      }\n    };\n  };\n\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./scripts/models.js\n **/"],"sourceRoot":""}