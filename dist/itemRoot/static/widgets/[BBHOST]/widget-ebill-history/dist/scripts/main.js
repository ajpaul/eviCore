/* Build with bb-lp-cli @ v1.8.1 */
!function(e,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("base"),require("core"),require("ui"),require("module-ebilling")):"function"==typeof define&&define.amd?define(["base","core","ui","module-ebilling"],i):"object"==typeof exports?exports["widget-ebill-history"]=i(require("base"),require("core"),require("ui"),require("module-ebilling")):e["widget-ebill-history"]=i(e.base,e.core,e.ui,e["module-ebilling"])}(this,function(e,i,t,n){return function(e){function i(n){if(t[n])return t[n].exports;var l=t[n]={exports:{},id:n,loaded:!1};return e[n].call(l.exports,l,l.exports,i),l.loaded=!0,l.exports}var t={};return i.m=e,i.c=t,i.p="",i(0)}([function(e,exports,i){var t;(function(e){t=function(require,exports,e){"use strict";e.name="widget-ebill-history";var t=i(2),n=i(3),l=i(4),o=i(5),r=[n.name,l.name,o.name],s=function(e,i,t,n){i.setConfig({debitOrdersSrc:e.getPreference("debitOrdersSrc"),mandatesSrc:e.getPreference("mandatesSrc"),baseUrl:t.getWidgetBaseUrl(e),locale:e.getPreference("locale")}),e&&e.model&&e.model.name&&n.publish("cxp.item.loaded",{id:e.model.name})};s.$inject=["lpWidget","lpEbilling","lpCoreUtils","lpCoreBus"],e.exports=t.createModule(e.name,r).controller(i(6)).run(s)}.call(exports,i,exports,e),!(void 0!==t&&(e.exports=t))}).call(exports,i(1)(e))},function(e,exports){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(i,exports){i.exports=e},function(e,exports){e.exports=i},function(e,exports){e.exports=t},function(e,exports){e.exports=n},function(e,exports,i){var t;t=function(require,exports,e){"use strict";exports.MainCtrl=function(e,i){var t=e.getConfig();this.isTouch=i.isTouch,this.baseUrl=t.baseUrl},exports.MainCtrl.$inject=["lpEbilling","lpEbillingUtils"],exports.DetailsCtrl=function(){var e=this;e.init=function(i){e.processing=!0,i.mandate.$get().then(function(i){e.mandate=i},function(i){e.response="Unable to fetch e-bill."})["finally"](function(){e.processing=!1})}},exports.BillsListCtrl=function(e,i,t,n,l,o,r,s){var c=this,u={f:0,l:2,sort:"-modifiedDate"};c.hasMore=!1;var a=function(e){"number"==typeof e&&(c.hasMore=e>=u.l)};n.subscribe("lp.widget.e-bill-inbox:sync",function(e){c.fetch()},!0),c.init=function(){c.fetch()},c.loadMore=function(){u.f=c.bills.length,i.getHistory(u).then(function(e){a(e.length),e.length>0&&(c.bills=c.bills.concat(e),c.groups=t.groupBy(c.bills,"modifiedDate","","",!0))})},c.fetch=function(){c.loading=!0,c.bills=[];var e=i.getHistory(u);s.all([e]).then(function(e){var i=e[0];a(i.length),i.length?(c.bills=c.bills.concat(i),c.groups=t.groupBy(c.bills,"modifiedDate","","",!0)):c.response="No results"},function(e){c.response="Unable to fetch data"})["finally"](function(){c.loading=!1})}},exports.BillsListCtrl.$inject=["lpEbilling","lpEbillingDebitOrdersModel","lpEbillingUtils","lpEbillingBus","$scope","$filter","$timeout","$q"]}.call(exports,i,exports,e),!(void 0!==t&&(e.exports=t))}])});
//# sourceMappingURL=main.js.map